"use strict";(self.webpackChunkfirebase_travel=self.webpackChunkfirebase_travel||[]).push([[179],{2011:(dt,Te,L)=>{L.d(Te,{Dh:()=>ue,GT:()=>_e,cc:()=>Me,hO:()=>Ge,on:()=>z,pX:()=>re,xv:()=>ge});var _=L(5e3),G=L(127),P=L(5813);dt=L.hmd(dt);const se=["ngOnDestroy"],re=(be,Je,$e,Re={})=>new Proxy(be,{get:(Ae,Ie)=>$e.runOutsideAngular(()=>{var Ke;if(be[Ie])return(null===(Ke=null==Re?void 0:Re.spy)||void 0===Ke?void 0:Ke.get)&&Re.spy.get(Ie,be[Ie]),be[Ie];if(se.indexOf(Ie)>-1)return()=>{};const te=Je.toPromise().then(Ye=>{const Q=Ye&&Ye[Ie];return"function"==typeof Q?Q.bind(Ye):Q&&Q.then?Q.then(de=>$e.run(()=>de)):$e.run(()=>Q)});return new Proxy(()=>{},{get:(Ye,Q)=>te[Q],apply:(Ye,Q,de)=>te.then(le=>{var pe;const Le=le&&le(...de);return(null===(pe=null==Re?void 0:Re.spy)||void 0===pe?void 0:pe.apply)&&Re.spy.apply(Ie,de,Le),Le})})})}),_e=(be,Je)=>{Je.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(Re=>{Object.defineProperty(be.prototype,Re,Object.getOwnPropertyDescriptor($e.prototype||$e,Re))})})};class ce{constructor(Je){return Je}}const ue=new _.OlP("angularfire2.app.options"),ge=new _.OlP("angularfire2.app.name");function z(be,Je,$e){const Ae="object"==typeof $e&&$e||{};Ae.name=Ae.name||"string"==typeof $e&&$e||"[DEFAULT]";const Ke=G.Z.apps.filter(te=>te&&te.name===Ae.name)[0]||Je.runOutsideAngular(()=>G.Z.initializeApp(be,Ae));try{JSON.stringify(be)!==JSON.stringify(Ke.options)&&q("error",`${Ke.name} Firebase App already initialized with different options${dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(te){}return new ce(Ke)}const q=(be,...Je)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[be](...Je)},ne={provide:ce,useFactory:z,deps:[ue,_.R0b,[new _.FiY,ge]]};let Ge=(()=>{class be{constructor($e){G.Z.registerVersion("angularfire",P.q4.full,"core"),G.Z.registerVersion("angularfire",P.q4.full,"app-compat"),G.Z.registerVersion("angular",_.q4F.full,$e.toString())}static initializeApp($e,Re){return{ngModule:be,providers:[{provide:ue,useValue:$e},{provide:ge,useValue:Re}]}}}return be.\u0275fac=function($e){return new($e||be)(_.LFG(_.Lbi))},be.\u0275mod=_.oAB({type:be}),be.\u0275inj=_.cJS({providers:[ne]}),be})();function Me(be,Je,$e,Re,Ae){const[,Ie,Ke]=globalThis.\u0275AngularfireInstanceCache.find(te=>te[0]===be)||[];if(Ie)return function Fe(be,Je){try{return be.toString()===Je.toString()}catch($e){return be===Je}}(Ae,Ke)||(me("error",`${Je} was already initialized on the ${$e} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Ae,was:Ke})),Ie;{const te=Re();return globalThis.\u0275AngularfireInstanceCache.push([be,te,Ae]),te}}const Ue=!!dt.hot,me=(be,...Je)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[be](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(dt,Te,L)=>{L.d(Te,{q4:()=>su,iC:()=>Ul,fc:()=>Xn,HU:()=>qu,vb:()=>Ap,JM:()=>ls});var _=L(5e3),G=L(5867),P=L(5861),se=L(9681),re=L(2090),_e=L(4859),ce=L(1877);const ue="@firebase/installations",q="w:0.5.7",ne="FIS_v2",be=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(C){return C instanceof re.ZR&&C.code.includes("request-failed")}function $e({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Re(C){return{token:C.token,requestStatus:2,expiresIn:de(C.expiresIn),creationTime:Date.now()}}function Ae(C,T){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,P.Z)(function*(C,T){const B=(yield T.json()).error;return be.create("request-failed",{requestName:C,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Ke({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function te(C,{refreshToken:T}){const M=Ke(C);return M.append("Authorization",function le(C){return`${ne} ${C}`}(T)),M}function Ye(C){return Q.apply(this,arguments)}function Q(){return(Q=(0,P.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function de(C){return Number(C.replace("s","000"))}function pe(C,T){return Le.apply(this,arguments)}function Le(){return(Le=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:T},{fid:M}){const B=$e(C),J=Ke(C),ie=T.getImmediate({optional:!0});if(ie){const bt=yield ie.getHeartbeatsHeader();bt&&J.append("x-firebase-client",bt)}const Pe={method:"POST",headers:J,body:JSON.stringify({fid:M,authVersion:ne,appId:C.appId,sdkVersion:q})},nt=yield Ye(()=>fetch(B,Pe));if(nt.ok){const bt=yield nt.json();return{fid:bt.fid||M,registrationStatus:2,refreshToken:bt.refreshToken,authToken:Re(bt.authToken)}}throw yield Ae("Create Installation",nt)})).apply(this,arguments)}function oe(C){return new Promise(T=>{setTimeout(T,C)})}const en=/^[cdef][\w-]{21}$/;function ut(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function ht(C){return function It(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return en.test(M)?M:""}catch(C){return""}}function pn(C){return`${C.appName}!${C.appId}`}const an=new Map;function hi(C,T){const M=pn(C);nn(M,T),function xn(C,T){const M=function yr(){return!fr&&"BroadcastChannel"in self&&(fr=new BroadcastChannel("[Firebase] FID Change"),fr.onmessage=C=>{nn(C.data.key,C.data.fid)}),fr}();M&&M.postMessage({key:C,fid:T}),function vr(){0===an.size&&fr&&(fr.close(),fr=null)}()}(M,T)}function nn(C,T){const M=an.get(C);if(M)for(const B of M)B(T)}let fr=null;const pr="firebase-installations-store";let wr=null;function Xi(){return wr||(wr=(0,re.X3)("firebase-installations-database",1,(C,T)=>{0===T&&C.createObjectStore(pr)})),wr}function ft(C,T){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,P.Z)(function*(C,T){const M=pn(C),J=(yield Xi()).transaction(pr,"readwrite"),ie=J.objectStore(pr),Ne=yield ie.get(M);return yield ie.put(T,M),yield J.complete,(!Ne||Ne.fid!==T.fid)&&hi(C,T.fid),T})).apply(this,arguments)}function Un(C){return rn.apply(this,arguments)}function rn(){return(rn=(0,P.Z)(function*(C){const T=pn(C),B=(yield Xi()).transaction(pr,"readwrite");yield B.objectStore(pr).delete(T),yield B.complete})).apply(this,arguments)}function Gn(C,T){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,P.Z)(function*(C,T){const M=pn(C),J=(yield Xi()).transaction(pr,"readwrite"),ie=J.objectStore(pr),Ne=yield ie.get(M),Pe=T(Ne);return void 0===Pe?yield ie.delete(M):yield ie.put(Pe,M),yield J.complete,Pe&&(!Ne||Ne.fid!==Pe.fid)&&hi(C,Pe.fid),Pe})).apply(this,arguments)}function Nn(C){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,P.Z)(function*(C){let T;const M=yield Gn(C.appConfig,B=>{const J=Ar(B),ie=$s(C,J);return T=ie.registrationPromise,ie.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function Ar(C){return Wt(C||{fid:ut(),registrationStatus:0})}function $s(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(be.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},B=function Bt(C,T){return lt.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:B}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:rt(C)}:{installationEntry:T}}function lt(){return(lt=(0,P.Z)(function*(C,T){try{const M=yield pe(C,T);return ft(C.appConfig,M)}catch(M){throw Je(M)&&409===M.customData.serverCode?yield Un(C.appConfig):yield ft(C.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function rt(C){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,P.Z)(function*(C){let T=yield es(C.appConfig);for(;1===T.registrationStatus;)yield oe(100),T=yield es(C.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:B}=yield Nn(C);return B||M}return T})).apply(this,arguments)}function es(C){return Gn(C,T=>{if(!T)throw be.create("installation-not-found");return Wt(T)})}function Wt(C){return function ts(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Vn(C,T){return sn.apply(this,arguments)}function sn(){return(sn=(0,P.Z)(function*({appConfig:C,heartbeatServiceProvider:T},M){const B=mt(C,M),J=te(C,M),ie=T.getImmediate({optional:!0});if(ie){const bt=yield ie.getHeartbeatsHeader();bt&&J.append("x-firebase-client",bt)}const Pe={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:q,appId:C.appId}})},nt=yield Ye(()=>fetch(B,Pe));if(nt.ok)return Re(yield nt.json());throw yield Ae("Generate Auth Token",nt)})).apply(this,arguments)}function mt(C,{fid:T}){return`${$e(C)}/${T}/authTokens:generate`}function Bn(C){return qt.apply(this,arguments)}function qt(){return(qt=(0,P.Z)(function*(C,T=!1){let M;const B=yield Gn(C.appConfig,ie=>{if(!Nt(ie))throw be.create("not-registered");const Ne=ie.authToken;if(!T&&K(Ne))return ie;if(1===Ne.requestStatus)return M=He(C,T),ie;{if(!navigator.onLine)throw be.create("app-offline");const Pe=Y(ie);return M=pt(C,Pe),Pe}});return M?yield M:B.authToken})).apply(this,arguments)}function He(C,T){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,P.Z)(function*(C,T){let M=yield Xe(C.appConfig);for(;1===M.authToken.requestStatus;)yield oe(100),M=yield Xe(C.appConfig);const B=M.authToken;return 0===B.requestStatus?Bn(C,T):B})).apply(this,arguments)}function Xe(C){return Gn(C,T=>{if(!Nt(T))throw be.create("not-registered");return function he(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function pt(C,T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,P.Z)(function*(C,T){try{const M=yield Vn(C,T),B=Object.assign(Object.assign({},T),{authToken:M});return yield ft(C.appConfig,B),M}catch(M){if(!Je(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const B=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield ft(C.appConfig,B)}else yield Un(C.appConfig);throw M}})).apply(this,arguments)}function Nt(C){return void 0!==C&&2===C.registrationStatus}function K(C){return 2===C.requestStatus&&!function $(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+36e5}(C)}function Y(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}function V(){return(V=(0,P.Z)(function*(C){const T=C,{installationEntry:M,registrationPromise:B}=yield Nn(T);return B?B.catch(console.error):Bn(T).catch(console.error),M.fid})).apply(this,arguments)}function ae(){return(ae=(0,P.Z)(function*(C,T=!1){const M=C;return yield Ve(M),(yield Bn(M,T)).token})).apply(this,arguments)}function Ve(C){return qe.apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(C){const{registrationPromise:T}=yield Nn(C);T&&(yield T)})).apply(this,arguments)}function Zn(C){return be.create("missing-app-config-values",{valueName:C})}const xu="installations",Ze=C=>{const T=C.getProvider("app").getImmediate(),M=function Mi(C){if(!C||!C.options)throw Zn("App Configuration");if(!C.name)throw Zn("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!C.options[M])throw Zn(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ht=C=>{const T=C.getProvider("app").getImmediate(),M=(0,se._getProvider)(T,xu).getImmediate();return{getId:()=>function O(C){return V.apply(this,arguments)}(M),getToken:J=>function H(C){return ae.apply(this,arguments)}(M,J)}};(function mn(){(0,se._registerComponent)(new _e.wA(xu,Ze,"PUBLIC")),(0,se._registerComponent)(new _e.wA("installations-internal",Ht,"PRIVATE"))})(),(0,se.registerVersion)(ue,"0.5.7"),(0,se.registerVersion)(ue,"0.5.7","esm2017");const Rr="@firebase/remote-config",jn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class _l{constructor(T,M,B,J){this.client=T,this.storage=M,this.storageCache=B,this.logger=J}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-M,J=B<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${J}.`),J}fetch(T){var M=this;return(0,P.Z)(function*(){const[B,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(T.cacheMaxAgeMillis,B))return J;T.eTag=J&&J.eTag;const ie=yield M.client.fetch(T),Ne=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Ne.push(M.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Ne),ie})()}}function Nu(C=navigator){return C.languages&&C.languages[0]||C.language}class Gs{constructor(T,M,B,J,ie,Ne){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=B,this.projectId=J,this.apiKey=ie,this.appId=Ne}fetch(T){var M=this;return(0,P.Z)(function*(){const[B,J]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Pe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},nt={sdk_version:M.sdkVersion,app_instance_id:B,app_instance_id_token:J,app_id:M.appId,language_code:Nu()},bt={method:"POST",headers:Pe,body:JSON.stringify(nt)},Gt=fetch(Ne,bt),Dt=new Promise((ii,Ui)=>{T.signal.addEventListener(()=>{const Oo=new Error("The operation was aborted.");Oo.name="AbortError",Ui(Oo)})});let er;try{yield Promise.race([Gt,Dt]),er=yield Gt}catch(ii){let Ui="fetch-client-network";throw"AbortError"===ii.name&&(Ui="fetch-timeout"),jn.create(Ui,{originalErrorMessage:ii.message})}let zn=er.status;const uu=er.headers.get("ETag")||void 0;let ro,_i;if(200===er.status){let ii;try{ii=yield er.json()}catch(Ui){throw jn.create("fetch-client-parse",{originalErrorMessage:Ui.message})}ro=ii.entries,_i=ii.state}if("INSTANCE_STATE_UNSPECIFIED"===_i?zn=500:"NO_CHANGE"===_i?zn=304:("NO_TEMPLATE"===_i||"EMPTY_CONFIG"===_i)&&(ro={}),304!==zn&&200!==zn)throw jn.create("fetch-status",{httpStatus:zn});return{status:zn,eTag:uu,config:ro}})()}}class Es{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,P.Z)(function*(){const B=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,B)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:B}){var J=this;return(0,P.Z)(function*(){yield function Xr(C,T){return new Promise((M,B)=>{const J=Math.max(T-Date.now(),0),ie=setTimeout(M,J);C.addEventListener(()=>{clearTimeout(ie),B(jn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ie=yield J.client.fetch(T);return yield J.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function _p(C){if(!(C instanceof re.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ie))throw ie;const Ne={throttleEndTimeMillis:Date.now()+(0,re.$s)(B),backoffCount:B+1};return yield J.storage.setThrottleMetadata(Ne),J.attemptFetch(T,Ne)}})()}}class vp{constructor(T,M,B,J,ie){this.app=T,this._client=M,this._storageCache=B,this._storage=J,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ga(C,T){const M=C.target.error||void 0;return jn.create(T,{originalErrorMessage:M&&M.message})}const ua="app_namespace_store";class Mc{constructor(T,M,B,J=function Ep(){return new Promise((C,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=B=>{T(Ga(B,"storage-open"))},M.onsuccess=B=>{C(B.target.result)},M.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(ua,{keyPath:"compositeKey"})}}catch(M){T(jn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=T,this.appName=M,this.namespace=B,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,P.Z)(function*(){const B=yield M.openDbPromise;return new Promise((J,ie)=>{const Pe=B.transaction([ua],"readonly").objectStore(ua),nt=M.createCompositeKey(T);try{const bt=Pe.get(nt);bt.onerror=Gt=>{ie(Ga(Gt,"storage-get"))},bt.onsuccess=Gt=>{const Dt=Gt.target.result;J(Dt?Dt.value:void 0)}}catch(bt){ie(jn.create("storage-get",{originalErrorMessage:bt&&bt.message}))}})})()}set(T,M){var B=this;return(0,P.Z)(function*(){const J=yield B.openDbPromise;return new Promise((ie,Ne)=>{const nt=J.transaction([ua],"readwrite").objectStore(ua),bt=B.createCompositeKey(T);try{const Gt=nt.put({compositeKey:bt,value:M});Gt.onerror=Dt=>{Ne(Ga(Dt,"storage-set"))},Gt.onsuccess=()=>{ie()}}catch(Gt){Ne(jn.create("storage-set",{originalErrorMessage:Gt&&Gt.message}))}})})()}delete(T){var M=this;return(0,P.Z)(function*(){const B=yield M.openDbPromise;return new Promise((J,ie)=>{const Pe=B.transaction([ua],"readwrite").objectStore(ua),nt=M.createCompositeKey(T);try{const bt=Pe.delete(nt);bt.onerror=Gt=>{ie(Ga(Gt,"storage-delete"))},bt.onsuccess=()=>{J()}}catch(bt){ie(jn.create("storage-delete",{originalErrorMessage:bt&&bt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class la{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const M=T.storage.getLastFetchStatus(),B=T.storage.getLastSuccessfulFetchTimestampMillis(),J=T.storage.getActiveConfig(),ie=yield M;ie&&(T.lastFetchStatus=ie);const Ne=yield B;Ne&&(T.lastSuccessfulFetchTimestampMillis=Ne);const Pe=yield J;Pe&&(T.activeConfig=Pe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Nc(){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,P.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Ip(){(0,se._registerComponent)(new _e.wA("remote-config",function C(T,{instanceIdentifier:M}){const B=T.getProvider("app").getImmediate(),J=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw jn.create("registration-window");if(!(0,re.hl)())throw jn.create("indexed-db-unavailable");const{projectId:ie,apiKey:Ne,appId:Pe}=B.options;if(!ie)throw jn.create("registration-project-id");if(!Ne)throw jn.create("registration-api-key");if(!Pe)throw jn.create("registration-app-id");const nt=new Mc(Pe,B.name,M=M||"firebase"),bt=new la(nt),Gt=new ce.Yd(Rr);Gt.logLevel=ce.in.ERROR;const Dt=new Gs(J,se.SDK_VERSION,M,ie,Ne,Pe),er=new Es(Dt,nt),zn=new _l(er,nt,bt,Gt),uu=new vp(B,zn,bt,nt,Gt);return function Nr(C){const T=(0,re.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(uu),uu},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Rr,"0.3.6"),(0,se.registerVersion)(Rr,"0.3.6","esm2017")}();const Is="/firebase-messaging-sw.js",Wa="/firebase-cloud-messaging-push-scope",pi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ca="google.c.a.c_id",ku="google.c.a.c_l",oh="google.c.a.ts",qa="google.c.a.e";var Pi=(()=>{return(C=Pi||(Pi={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Pi;var C})();function bs(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ou(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(M),J=new Uint8Array(B.length);for(let ie=0;ie<B.length;++ie)J[ie]=B.charCodeAt(ie);return J}const za="fcm_token_details_db",da="fcm_token_object_Store";function bp(C){return ha.apply(this,arguments)}function ha(){return ha=(0,P.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(za))return null;let T=null;return(yield(0,re.X3)(za,5,function(){var B=(0,P.Z)(function*(J,ie,Ne,Pe){var nt;if(ie<2||!J.objectStoreNames.contains(da))return;const bt=Pe.objectStore(da),Gt=yield bt.index("fcmSenderId").get(C);if(yield bt.clear(),Gt)if(2===ie){const Dt=Gt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;T={token:Dt.fcmToken,createTime:null!==(nt=Dt.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:bs(Dt.vapidKey)}}}else if(3===ie){const Dt=Gt;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:bs(Dt.auth),p256dh:bs(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:bs(Dt.vapidKey)}}}else if(4===ie){const Dt=Gt;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:bs(Dt.auth),p256dh:bs(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:bs(Dt.vapidKey)}}}});return function(J,ie,Ne,Pe){return B.apply(this,arguments)}}())).close(),yield(0,re.Lj)(za),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),yl(T)?T:null}),ha.apply(this,arguments)}function yl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const qs="firebase-messaging-store";let wo=null;function vl(){return wo||(wo=(0,re.X3)("firebase-messaging-database",1,(C,T)=>{0===T&&C.createObjectStore(qs)})),wo}function En(C){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,P.Z)(function*(C){const T=zs(C),B=yield(yield vl()).transaction(qs).objectStore(qs).get(T);if(B)return B;{const J=yield bp(C.appConfig.senderId);if(J)return yield Io(C,J),J}})).apply(this,arguments)}function Io(C,T){return _n.apply(this,arguments)}function _n(){return(_n=(0,P.Z)(function*(C,T){const M=zs(C),J=(yield vl()).transaction(qs,"readwrite");return yield J.objectStore(qs).put(T,M),yield J.complete,T})).apply(this,arguments)}function wl(C){return fa.apply(this,arguments)}function fa(){return(fa=(0,P.Z)(function*(C){const T=zs(C),B=(yield vl()).transaction(qs,"readwrite");yield B.objectStore(qs).delete(T),yield B.complete})).apply(this,arguments)}function zs({appConfig:C}){return C.appId}const Yn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Fu(C,T){return gi.apply(this,arguments)}function gi(){return(gi=(0,P.Z)(function*(C,T){const M=yield is(C),B=yt(T),J={method:"POST",headers:M,body:JSON.stringify(B)};let ie;try{ie=yield(yield fetch(ki(C.appConfig),J)).json()}catch(Ne){throw Yn.create("token-subscribe-failed",{errorInfo:Ne})}if(ie.error)throw Yn.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw Yn.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Ur(C,T){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,P.Z)(function*(C,T){const M=yield is(C),B=yt(T.subscriptionOptions),J={method:"PATCH",headers:M,body:JSON.stringify(B)};let ie;try{ie=yield(yield fetch(`${ki(C.appConfig)}/${T.token}`,J)).json()}catch(Ne){throw Yn.create("token-update-failed",{errorInfo:Ne})}if(ie.error)throw Yn.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw Yn.create("token-update-no-token");return ie.token})).apply(this,arguments)}function bo(C,T){return pa.apply(this,arguments)}function pa(){return(pa=(0,P.Z)(function*(C,T){const B={method:"DELETE",headers:yield is(C)};try{const ie=yield(yield fetch(`${ki(C.appConfig)}/${T}`,B)).json();if(ie.error)throw Yn.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(J){throw Yn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function ki({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function is(C){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,P.Z)(function*({appConfig:C,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function yt({p256dh:C,auth:T,endpoint:M,vapidKey:B}){const J={web:{endpoint:M,auth:T,p256dh:C}};return B!==pi&&(J.web.applicationPubKey=B),J}const Ka=6048e5;function Oc(C){return ga.apply(this,arguments)}function ga(){return(ga=(0,P.Z)(function*(C){const T=yield uh(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:bs(T.getKey("auth")),p256dh:bs(T.getKey("p256dh"))},B=yield En(C.firebaseDependencies);if(B){if(Uu(B.subscriptionOptions,M))return Date.now()>=B.createTime+Ka?ah(C,{token:B.token,createTime:Date.now(),subscriptionOptions:M}):B.token;try{yield bo(C.firebaseDependencies,B.token)}catch(J){console.warn(J)}return De(C.firebaseDependencies,M)}return De(C.firebaseDependencies,M)})).apply(this,arguments)}function Lc(C){return ma.apply(this,arguments)}function ma(){return(ma=(0,P.Z)(function*(C){const T=yield En(C.firebaseDependencies);T&&(yield bo(C.firebaseDependencies,T.token),yield wl(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function ah(C,T){return Za.apply(this,arguments)}function Za(){return(Za=(0,P.Z)(function*(C,T){try{const M=yield Ur(C.firebaseDependencies,T),B=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield Io(C.firebaseDependencies,B),M}catch(M){throw yield Lc(C),M}})).apply(this,arguments)}function De(C,T){return jt.apply(this,arguments)}function jt(){return(jt=(0,P.Z)(function*(C,T){const B={token:yield Fu(C,T),createTime:Date.now(),subscriptionOptions:T};return yield Io(C,B),B.token})).apply(this,arguments)}function uh(C,T){return In.apply(this,arguments)}function In(){return(In=(0,P.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ou(T)})})).apply(this,arguments)}function Uu(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}function Ks(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Oi(C,T){if(!T.notification)return;C.notification={};const M=T.notification.title;M&&(C.notification.title=M);const B=T.notification.body;B&&(C.notification.body=B);const J=T.notification.image;J&&(C.notification.image=J)}(T,C),function El(C,T){!T.data||(C.data=T.data)}(T,C),function Ya(C,T){if(!T.fcmOptions)return;C.fcmOptions={};const M=T.fcmOptions.link;M&&(C.fcmOptions.link=M);const B=T.fcmOptions.analytics_label;B&&(C.fcmOptions.analyticsLabel=B)}(T,C),T}function Cp(C){return"object"==typeof C&&!!C&&ca in C}function Il(C,T){const M=[];for(let B=0;B<C.length;B++)M.push(C.charAt(B)),B<T.length&&M.push(T.charAt(B));return M.join("")}function ya(C){return Yn.create("missing-app-config-values",{valueName:C})}Il("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Il("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ar{constructor(T,M,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function _a(C){if(!C||!C.options)throw ya("App Configuration Object");if(!C.name)throw ya("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const B of T)if(!M[B])throw ya(B);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:J,installations:M,analyticsProvider:B}}_delete(){return Promise.resolve()}}function ss(C){return va.apply(this,arguments)}function va(){return(va=(0,P.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Is,{scope:Wa}),C.swRegistration.update().catch(()=>{})}catch(T){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function wa(C,T){return ei.apply(this,arguments)}function ei(){return(ei=(0,P.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield ss(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function lh(C,T){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,P.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=pi)})).apply(this,arguments)}function Qa(){return(Qa=(0,P.Z)(function*(C,T){if(!navigator)throw Yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yn.create("permission-blocked");return yield lh(C,null==T?void 0:T.vapidKey),yield wa(C,null==T?void 0:T.serviceWorkerRegistration),Oc(C)})).apply(this,arguments)}function bl(C,T,M){return Co.apply(this,arguments)}function Co(){return(Co=(0,P.Z)(function*(C,T,M){const B=ch(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:M[ca],message_name:M[ku],message_time:M[oh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ch(C){switch(C){case Pi.NOTIFICATION_CLICKED:return"notification_open";case Pi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Tl(){return(Tl=(0,P.Z)(function*(C,T){const M=T.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===Pi.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Ks(M)):C.onMessageHandler.next(Ks(M)));const B=M.data;Cp(B)&&"1"===B[qa]&&(yield bl(C,M.messageType,B))})).apply(this,arguments)}const Vu="@firebase/messaging",To=C=>{const T=new ar(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Cl(C,T){return Tl.apply(this,arguments)}(T,M)),T},Dl=C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:B=>function Fc(C,T){return Qa.apply(this,arguments)}(T,B)}};function Uc(){return Do.apply(this,arguments)}function Do(){return(Do=(0,P.Z)(function*(){try{yield(0,re.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function dh(){(0,se._registerComponent)(new _e.wA("messaging",To,"PUBLIC")),(0,se._registerComponent)(new _e.wA("messaging-internal",Dl,"PRIVATE")),(0,se.registerVersion)(Vu,"0.9.11"),(0,se.registerVersion)(Vu,"0.9.11","esm2017")}();const Al="analytics",Vc="firebase_id",xl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bu="https://www.googletagmanager.com/gtag/js",Qn=new ce.Yd("@firebase/analytics");function Bc(C){return Promise.all(C.map(T=>T.catch(M=>M)))}function jc(C,T){const M=document.createElement("script");M.src=`${Bu}?l=${C}&id=${T}`,M.async=!0,document.head.appendChild(M)}function ju(C,T,M,B,J,ie){return eu.apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(C,T,M,B,J,ie){const Ne=B[J];try{if(Ne)yield T[Ne];else{const nt=(yield Bc(M)).find(bt=>bt.measurementId===J);nt&&(yield T[nt.appId])}}catch(Pe){Qn.error(Pe)}C("config",J,ie)})).apply(this,arguments)}function fh(C,T,M,B,J){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,P.Z)(function*(C,T,M,B,J){try{let ie=[];if(J&&J.send_to){let Ne=J.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Pe=yield Bc(M);for(const nt of Ne){const bt=Pe.find(Dt=>Dt.measurementId===nt),Gt=bt&&T[bt.appId];if(!Gt){ie=[];break}ie.push(Gt)}}0===ie.length&&(ie=Object.values(T)),yield Promise.all(ie),C("event",B,J||{})}catch(ie){Qn.error(ie)}})).apply(this,arguments)}function i_(){const C=window.document.getElementsByTagName("script");for(const T of Object.values(C))if(T.src&&T.src.includes(Bu))return T;return null}const br=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ur=new class ti{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Hc(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Wn(C){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,P.Z)(function*(C){var T;const{appId:M,apiKey:B}=C,J={method:"GET",headers:Hc(B)},ie=xl.replace("{app-id}",M),Ne=yield fetch(ie,J);if(200!==Ne.status&&304!==Ne.status){let Pe="";try{const nt=yield Ne.json();(null===(T=nt.error)||void 0===T?void 0:T.message)&&(Pe=nt.error.message)}catch(nt){}throw br.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Pe})}return Ne.json()})).apply(this,arguments)}function Rl(C){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(C,T=ur,M){const{appId:B,apiKey:J,measurementId:ie}=C.options;if(!B)throw br.create("no-app-id");if(!J){if(ie)return{measurementId:ie,appId:B};throw br.create("no-api-key")}const Ne=T.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pe=new Gc;return setTimeout((0,P.Z)(function*(){Pe.abort()}),void 0!==M?M:6e4),ba({appId:B,apiKey:J,measurementId:ie},Ne,Pe,T)})).apply(this,arguments)}function ba(C,T,M){return Li.apply(this,arguments)}function Li(){return(Li=(0,P.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:M},B,J=ur){const{appId:ie,measurementId:Ne}=C;try{yield xt(B,T)}catch(Pe){if(Ne)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Pe.message}]`),{appId:ie,measurementId:Ne};throw Pe}try{const Pe=yield Wn(C);return J.deleteThrottleMetadata(ie),Pe}catch(Pe){if(!Ml(Pe)){if(J.deleteThrottleMetadata(ie),Ne)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Pe.message}]`),{appId:ie,measurementId:Ne};throw Pe}const nt=503===Number(Pe.customData.httpStatus)?(0,re.$s)(M,J.intervalMillis,30):(0,re.$s)(M,J.intervalMillis),bt={throttleEndTimeMillis:Date.now()+nt,backoffCount:M+1};return J.setThrottleMetadata(ie,bt),Qn.debug(`Calling attemptFetch again in ${nt} millis`),ba(C,bt,B,J)}})).apply(this,arguments)}function xt(C,T){return new Promise((M,B)=>{const J=Math.max(T-Date.now(),0),ie=setTimeout(M,J);C.addEventListener(()=>{clearTimeout(ie),B(br.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ml(C){if(!(C instanceof re.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Gc{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function $u(){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,P.Z)(function*(){if(!(0,re.hl)())return Qn.warn(br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return Qn.warn(br.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function Xs(){return(Xs=(0,P.Z)(function*(C,T,M,B,J,ie,Ne){var Pe;const nt=Rl(C);nt.then(zn=>{M[zn.measurementId]=zn.appId,C.options.measurementId&&zn.measurementId!==C.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zn=>Qn.error(zn)),T.push(nt);const bt=$u().then(zn=>{if(zn)return B.getId()}),[Gt,Dt]=yield Promise.all([nt,bt]);i_()||jc(ie,Gt.measurementId),J("js",new Date);const er=null!==(Pe=null==Ne?void 0:Ne.config)&&void 0!==Pe?Pe:{};return er.origin="firebase",er.update=!0,null!=Dt&&(er[Vc]=Dt),J("config",Gt.measurementId,er),Gt.measurementId})).apply(this,arguments)}class Nl{constructor(T){this.app=T}_delete(){return delete Br[this.app.options.appId],Promise.resolve()}}let Br={},Ao=[];const Ca={};let xo,As,eo="dataLayer",Pl=!1;function Ta(C,T,M){!function to(){const C=[];if((0,re.ru)()&&C.push("This is a browser extension environment."),(0,re.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map((B,J)=>`(${J+1}) ${B}`).join(" "),M=br.create("invalid-analytics-context",{errorInfo:T});Qn.warn(M.message)}}();const B=C.options.appId;if(!B)throw br.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw br.create("no-api-key");Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Br[B])throw br.create("already-exists",{id:B});if(!Pl){!function Ds(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(eo);const{wrappedGtag:ie,gtagCore:Ne}=function ph(C,T,M,B,J){let ie=function(...Ne){window[B].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ie=window[J]),window[J]=function $c(C,T,M,B){function ie(){return(ie=(0,P.Z)(function*(Ne,Pe,nt){try{"event"===Ne?yield fh(C,T,M,Pe,nt):"config"===Ne?yield ju(C,T,M,B,Pe,nt):C("set",Pe)}catch(bt){Qn.error(bt)}})).apply(this,arguments)}return function J(Ne,Pe,nt){return ie.apply(this,arguments)}}(ie,C,T,M),{gtagCore:ie,wrappedGtag:window[J]}}(Br,Ao,Ca,eo,"gtag");As=ie,xo=Ne,Pl=!0}return Br[B]=function Cn(C,T,M,B,J,ie,Ne){return Xs.apply(this,arguments)}(C,Ao,Ca,T,xo,eo,M),new Nl(C)}function nu(){return(nu=(0,P.Z)(function*(C,T,M,B,J){if(J&&J.global)C("event",M,B);else{const ie=yield T;C("event",M,Object.assign(Object.assign({},B),{send_to:ie}))}})).apply(this,arguments)}function Mn(){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,P.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}const Ro="@firebase/analytics";!function Sp(){(0,se._registerComponent)(new _e.wA(Al,(T,{options:M})=>Ta(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new _e.wA("analytics-internal",function C(T){try{const M=T.getProvider(Al).getImmediate();return{logEvent:(B,J,ie)=>function mh(C,T,M,B){C=(0,re.m9)(C),function Da(C,T,M,B,J){return nu.apply(this,arguments)}(As,Br[C.app.options.appId],T,M,B).catch(J=>Qn.error(J))}(M,B,J,ie)}}catch(M){throw br.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(Ro,"0.7.7"),(0,se.registerVersion)(Ro,"0.7.7","esm2017")}();var as=L(4408),Aa=L(7565);const iu=new class qn extends Aa.v{}(class Mo extends as.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(T,M,B):T.flush(this)}});var zc=L(4986),Wu=L(8505),Pr=L(5363),us=L(9468);const su=new _.GfV("7.3.0"),No="__angularfire_symbol__analyticsIsSupportedValue",ri="__angularfire_symbol__analyticsIsSupported",xa="__angularfire_symbol__remoteConfigIsSupportedValue",kl="__angularfire_symbol__remoteConfigIsSupported",Ol="__angularfire_symbol__messagingIsSupportedValue",Ll="__angularfire_symbol__messagingIsSupported";function ls(C,T,M){if(T){if(1===T.length)return T[0];const ie=T.filter(Ne=>Ne.app===M);if(1===ie.length)return ie[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[ri]||(globalThis[ri]=Mn().then(C=>globalThis[No]=C).catch(()=>globalThis[No]=!1)),globalThis[Ll]||(globalThis[Ll]=Uc().then(C=>globalThis[Ol]=C).catch(()=>globalThis[Ol]=!1)),globalThis[kl]||(globalThis[kl]=Nc().then(C=>globalThis[xa]=C).catch(()=>globalThis[xa]=!1));const Ap=(C,T)=>{const M=T?[T]:(0,G.C6)(),B=[];return M.forEach(J=>{J.container.getProvider(C).instances.forEach(Ne=>{B.includes(Ne)||B.push(Ne)})}),B};function Ns(){}class Zc{constructor(T,M=iu){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,B){const J=this.zone;return this.delegate.schedule(function(Ne){J.runGuarded(()=>{T.apply(this,[Ne])})},M,B)}}class mi{constructor(T){this.zone=T,this.task=null}call(T,M){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ns,{},Ns,Ns)),M.pipe((0,Wu.b)({next:B,complete:B,error:B})).subscribe(T).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let qu=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Zc(Zone.current)),this.insideAngular=M.run(()=>new Zc(Zone.current,zc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(_.LFG(_.R0b))},C.\u0275prov=_.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function no(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Xn(C){return C.pipe((0,Pr.Q)(no().outsideAngular))}function Ul(C){return no(),function ko(C){return function(M){return(M=M.lift(new mi(C.ngZone))).pipe((0,us.R)(C.outsideAngular),(0,Pr.Q)(C.insideAngular))}}(no())(C)}},424:(dt,Te,L)=>{L.d(Te,{$:()=>Oc,A:()=>q,E:()=>Ht,G:()=>Mr,I:()=>Es,K:()=>$,L:()=>Pu,M:()=>sh,N:()=>ca,P:()=>No,Q:()=>ku,R:()=>ni,T:()=>pi,U:()=>Pi,V:()=>bs,W:()=>bp,X:()=>Ir,Y:()=>Fu,Z:()=>Ur,_:()=>ki,a:()=>gt,a0:()=>Lc,a1:()=>ah,a2:()=>De,a3:()=>uh,a4:()=>Uu,a5:()=>Oi,a6:()=>El,a7:()=>Cp,a8:()=>Il,a9:()=>ss,aA:()=>er,aB:()=>zu,aC:()=>gn,aG:()=>ur,aJ:()=>qa,aa:()=>wa,ab:()=>lh,ae:()=>bl,af:()=>ch,ag:()=>Cl,aj:()=>qs,ak:()=>Sl,am:()=>xl,an:()=>ju,ao:()=>Tn,ap:()=>Q,aq:()=>Tt,ar:()=>qe,as:()=>$e,at:()=>cu,au:()=>Ku,av:()=>Re,aw:()=>te,ax:()=>le,ay:()=>Y,az:()=>ii,b:()=>bn,c:()=>Fl,d:()=>Zc,e:()=>Ap,f:()=>T,g:()=>Pe,h:()=>J,i:()=>to,j:()=>Gt,k:()=>Vo,l:()=>qn,m:()=>d_,o:()=>ue,r:()=>Gu,s:()=>Mo,u:()=>us,z:()=>Me});var _=L(5861),G=L(2090),P=L(9681),se=L(655),re=L(1877),_e=L(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new re.Yd("@firebase/auth");function Je(w,...p){be.logLevel<=re.in.ERROR&&be.error(`Auth (${P.SDK_VERSION}): ${w}`,...p)}function $e(w,...p){throw Ke(w,...p)}function Re(w,...p){return Ke(w,...p)}function Ae(w,p,m){const I=Object.assign(Object.assign({},Fe()),{[p]:m});return new G.LL("auth","Firebase",I).create(p,{appName:w.name})}function Ie(w,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&$e(w,"argument-error"),Ae(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(w,...p){if("string"!=typeof w){const m=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(m,...I)}return Ue.create(w,...p)}function te(w,p,...m){if(!w)throw Ke(p,...m)}function Ye(w){const p="INTERNAL ASSERTION FAILED: "+w;throw Je(p),new Error(p)}function Q(w,p){w||Ye(p)}const de=new Map;function le(w){Q(w instanceof Function,"Expected a class definition");let p=de.get(w);return p?(Q(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,de.set(w,p),p)}function oe(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function It(){return"http:"===en()||"https:"===en()}function en(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class ht{constructor(p,m){this.shortDelay=p,this.longDelay=m,Q(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Fn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(It()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pn(w,p){Q(w.emulator,"Emulator should always be set here");const{url:m}=w.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class an{static initialize(p,m,I){this.fetchImpl=p,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},tn=new ht(3e4,6e4);function Jt(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function nn(w,p,m,I){return xn.apply(this,arguments)}function xn(){return(xn=(0,_.Z)(function*(w,p,m,I,x={}){return fr(w,x,(0,_.Z)(function*(){let F={},ee={};I&&("GET"===p?ee=I:F={body:JSON.stringify(I)});const xe=(0,G.xO)(Object.assign({key:w.config.apiKey},ee)).slice(1),ot=yield w._getAdditionalHeaders();return ot["Content-Type"]="application/json",w.languageCode&&(ot["X-Firebase-Locale"]=w.languageCode),an.fetch()(fi(w,w.config.apiHost,m,xe),Object.assign({method:p,headers:ot,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function fr(w,p,m){return yr.apply(this,arguments)}function yr(){return(yr=(0,_.Z)(function*(w,p,m){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},hi),p);try{const x=new pr(w),F=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const ee=yield F.json();if("needConfirmation"in ee)throw wr(w,"account-exists-with-different-credential",ee);if(F.ok&&!("errorMessage"in ee))return ee;{const xe=F.ok?ee.errorMessage:ee.error.message,[ot,vt]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ot)throw wr(w,"credential-already-in-use",ee);if("EMAIL_EXISTS"===ot)throw wr(w,"email-already-in-use",ee);const kt=I[ot]||ot.toLowerCase().replace(/[_\s]+/g,"-");if(vt)throw Ae(w,kt,vt);$e(w,kt)}}catch(x){if(x instanceof G.ZR)throw x;$e(w,"network-request-failed")}})).apply(this,arguments)}function vr(w,p,m,I){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,_.Z)(function*(w,p,m,I,x={}){const F=yield nn(w,p,m,I,x);return"mfaPendingCredential"in F&&$e(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function fi(w,p,m,I){const x=`${p}${m}?${I}`;return w.config.emulator?pn(w.config,x):`${w.config.apiScheme}://${x}`}class pr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(Re(this.auth,"network-request-failed")),tn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wr(w,p,m){const I={appName:w.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const x=Re(w,p,I);return x.customData._tokenResponse=m,x}function ft(){return(ft=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Sr(w,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function rn(w,p){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Yr(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Ar(){return(Ar=(0,_.Z)(function*(w,p=!1){const m=(0,G.m9)(w),I=yield m.getIdToken(p),x=Bt(I);te(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const F="object"==typeof x.firebase?x.firebase:void 0,ee=null==F?void 0:F.sign_in_provider;return{claims:x,token:I,authTime:Yr($s(x.auth_time)),issuedAtTime:Yr($s(x.iat)),expirationTime:Yr($s(x.exp)),signInProvider:ee||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function $s(w){return 1e3*Number(w)}function Bt(w){const[p,m,I]=w.split(".");if(void 0===p||void 0===m||void 0===I)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,G.tV)(m);return x?JSON.parse(x):(Je("Failed to decode base64 JWT payload"),null)}catch(x){return Je("Caught error parsing JWT payload as JSON",x),null}}function rt(w,p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,_.Z)(function*(w,p,m=!1){if(m)return p;try{return yield p}catch(I){throw I instanceof G.ZR&&es(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function es({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Wt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,_.Z)(function*(){yield m.iteration()}),I)}iteration(){var p=this;return(0,_.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class ts{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vn(w){return sn.apply(this,arguments)}function sn(){return(sn=(0,_.Z)(function*(w){var p;const m=w.auth,I=yield w.getIdToken(),x=yield rt(w,rn(m,{idToken:I}));te(null==x?void 0:x.users.length,m,"internal-error");const F=x.users[0];w._notifyReloadListener(F);const ee=(null===(p=F.providerUserInfo)||void 0===p?void 0:p.length)?He(F.providerUserInfo):[],xe=qt(w.providerData,ee),kt=!!w.isAnonymous&&!(w.email&&F.passwordHash||(null==xe?void 0:xe.length)),un={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:xe,metadata:new ts(F.createdAt,F.lastLoginAt),isAnonymous:kt};Object.assign(w,un)})).apply(this,arguments)}function Bn(){return(Bn=(0,_.Z)(function*(w){const p=(0,G.m9)(w);yield Vn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function qt(w,p){return[...w.filter(I=>!p.some(x=>x.providerId===I.providerId)),...p]}function He(w){return w.map(p=>{var{providerId:m}=p,I=(0,se._T)(p,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Xe(){return(Xe=(0,_.Z)(function*(w,p){const m=yield fr(w,{},(0,_.Z)(function*(){const I=(0,G.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:F}=w.config,ee=fi(w,x,"/v1/token",`key=${F}`),xe=yield w._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",an.fetch()(ee,{method:"POST",headers:xe,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class pt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){te(p.idToken,"internal-error"),te(void 0!==p.idToken,"internal-error"),te(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function lt(w){const p=Bt(w);return te(p,"internal-error"),te(void 0!==p.exp,"internal-error"),te(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var I=this;return(0,_.Z)(function*(){return te(!I.accessToken||I.refreshToken,p,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var I=this;return(0,_.Z)(function*(){const{accessToken:x,refreshToken:F,expiresIn:ee}=yield function Ce(w,p){return Xe.apply(this,arguments)}(p,m);I.updateTokensAndExpiration(x,F,Number(ee))})()}updateTokensAndExpiration(p,m,I){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,m){const{refreshToken:I,accessToken:x,expirationTime:F}=m,ee=new pt;return I&&(te("string"==typeof I,"internal-error",{appName:p}),ee.refreshToken=I),x&&(te("string"==typeof x,"internal-error",{appName:p}),ee.accessToken=x),F&&(te("number"==typeof F,"internal-error",{appName:p}),ee.expirationTime=F),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new pt,this.toJSON())}_performRefresh(){return Ye("not implemented")}}function Mt(w,p){te("string"==typeof w||void 0===w,"internal-error",{appName:p})}class Nt{constructor(p){var{uid:m,auth:I,stsTokenManager:x}=p,F=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new ts(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,_.Z)(function*(){const I=yield rt(m,m.stsTokenManager.getToken(m.auth,p));return te(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(p){return function Pn(w){return Ar.apply(this,arguments)}(this,p)}reload(){return function mt(w){return Bn.apply(this,arguments)}(this)}_assign(p){this!==p&&(te(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Nt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var I=this;return(0,_.Z)(function*(){let x=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),x=!0),m&&(yield Vn(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,_.Z)(function*(){const m=yield p.getIdToken();return yield rt(p,function Xi(w,p){return ft.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var I,x,F,ee,xe,ot,vt,kt;const un=null!==(I=m.displayName)&&void 0!==I?I:void 0,Bo=null!==(x=m.email)&&void 0!==x?x:void 0,Vi=null!==(F=m.phoneNumber)&&void 0!==F?F:void 0,Ju=null!==(ee=m.photoURL)&&void 0!==ee?ee:void 0,ed=null!==(xe=m.tenantId)&&void 0!==xe?xe:void 0,Gl=null!==(ot=m._redirectEventId)&&void 0!==ot?ot:void 0,p_=null!==(vt=m.createdAt)&&void 0!==vt?vt:void 0,Wl=null!==(kt=m.lastLoginAt)&&void 0!==kt?kt:void 0,{uid:Ma,emailVerified:kp,isAnonymous:Xu,providerData:ql,stsTokenManager:Op}=m;te(Ma&&Op,p,"internal-error");const Dh=pt.fromJSON(this.name,Op);te("string"==typeof Ma,p,"internal-error"),Mt(un,p.name),Mt(Bo,p.name),te("boolean"==typeof kp,p,"internal-error"),te("boolean"==typeof Xu,p,"internal-error"),Mt(Vi,p.name),Mt(Ju,p.name),Mt(ed,p.name),Mt(Gl,p.name),Mt(p_,p.name),Mt(Wl,p.name);const du=new Nt({uid:Ma,auth:p,email:Bo,emailVerified:kp,displayName:un,isAnonymous:Xu,photoURL:Ju,phoneNumber:Vi,tenantId:ed,stsTokenManager:Dh,createdAt:p_,lastLoginAt:Wl});return ql&&Array.isArray(ql)&&(du.providerData=ql.map(g_=>Object.assign({},g_))),Gl&&(du._redirectEventId=Gl),du}static _fromIdTokenResponse(p,m,I=!1){return(0,_.Z)(function*(){const x=new pt;x.updateFromServerResponse(m);const F=new Nt({uid:m.localId,auth:p,stsTokenManager:x,isAnonymous:I});return yield Vn(F),F})()}}const $=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(m,I){var x=this;return(0,_.Z)(function*(){x.storage[m]=I})()}_get(m){var I=this;return(0,_.Z)(function*(){const x=I.storage[m];return void 0===x?null:x})()}_remove(m){var I=this;return(0,_.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return w.type="NONE",w})();function Y(w,p,m){return`firebase:${w}:${p}:${m}`}class he{constructor(p,m,I){this.persistence=p,this.auth=m,this.userKey=I;const{config:x,name:F}=this.auth;this.fullUserKey=Y(this.userKey,x.apiKey,F),this.fullPersistenceKey=Y("persistence",x.apiKey,F),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,_.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Nt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,_.Z)(function*(){if(m.persistence===p)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,I="authUser"){return(0,_.Z)(function*(){if(!m.length)return new he(le($),p,I);const x=(yield Promise.all(m.map(function(){var vt=(0,_.Z)(function*(kt){if(yield kt._isAvailable())return kt});return function(kt){return vt.apply(this,arguments)}}()))).filter(vt=>vt);let F=x[0]||le($);const ee=Y(I,p.config.apiKey,p.name);let xe=null;for(const vt of m)try{const kt=yield vt._get(ee);if(kt){const un=Nt._fromJSON(p,kt);vt!==F&&(xe=un),F=vt;break}}catch(kt){}const ot=x.filter(vt=>vt._shouldAllowMigration);return F._shouldAllowMigration&&ot.length?(F=ot[0],xe&&(yield F._set(ee,xe.toJSON())),yield Promise.all(m.map(function(){var vt=(0,_.Z)(function*(kt){if(kt!==F)try{yield kt._remove(ee)}catch(un){}});return function(kt){return vt.apply(this,arguments)}}())),new he(F,p,I)):new he(F,p,I)})()}}function O(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ve(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(V(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(wt(p))return"Blackberry";if(tt(p))return"Webos";if(H(p))return"Safari";if((p.includes("chrome/")||ae(p))&&!p.includes("edge/"))return"Chrome";if(qe(p))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function V(w=(0,G.z$)()){return/firefox\//i.test(w)}function H(w=(0,G.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ae(w=(0,G.z$)()){return/crios\//i.test(w)}function Ve(w=(0,G.z$)()){return/iemobile/i.test(w)}function qe(w=(0,G.z$)()){return/android/i.test(w)}function wt(w=(0,G.z$)()){return/blackberry/i.test(w)}function tt(w=(0,G.z$)()){return/webos/i.test(w)}function Tt(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)}function Tn(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function xr(w=(0,G.z$)()){return Tt(w)||qe(w)||tt(w)||wt(w)||/windows phone/i.test(w)||Ve(w)}function Zn(w,p=[]){let m;switch(w){case"Browser":m=O((0,G.z$)());break;case"Worker":m=`${O((0,G.z$)())}-${w}`;break;default:m=w}const I=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${P.SDK_VERSION}/${I}`}class xu{constructor(p,m,I){this.app=p,this.heartbeatServiceProvider=m,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ze(this),this.idTokenSubscription=new Ze(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(p,m){var I=this;return m&&(this._popupRedirectResolver=le(m)),this._initializationPromise=this.queue((0,_.Z)(function*(){var x,F;if(!I._deleted&&(I.persistenceManager=yield he.create(I,p),!I._deleted)){if(null===(x=I._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(ee){}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(F=I.currentUser)||void 0===F?void 0:F.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,_.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m)}})()}initializeCurrentUser(p){var m=this;return(0,_.Z)(function*(){var I;let x=yield m.assertedPersistence.getCurrentUser();if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const F=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,ee=null==x?void 0:x._redirectEventId,xe=yield m.tryRedirectSignIn(p);(!F||F===ee)&&(null==xe?void 0:xe.user)&&(x=xe.user)}return x?x._redirectEventId?(te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===x._redirectEventId?m.directlySetCurrentUser(x):m.reloadAndSetCurrentUserOrClear(x)):m.reloadAndSetCurrentUserOrClear(x):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var m=this;return(0,_.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(x){yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,_.Z)(function*(){try{yield Vn(p)}catch(I){if("auth/network-request-failed"!==I.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function ut(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,_.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,_.Z)(function*(){const I=p?(0,G.m9)(p):null;return I&&te(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(p){var m=this;return(0,_.Z)(function*(){if(!m._deleted)return p&&te(m.tenantId===p.tenantId,m,"tenant-id-mismatch"),m.queue((0,_.Z)(function*(){yield m.directlySetCurrentUser(p),m.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,_.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var m=this;return this.queue((0,_.Z)(function*(){yield m.assertedPersistence.setPersistence(le(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new G.LL("auth","Firebase",p())}onAuthStateChanged(p,m,I){return this.registerStateListener(this.authStateSubscription,p,m,I)}onIdTokenChanged(p,m,I){return this.registerStateListener(this.idTokenSubscription,p,m,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var I=this;return(0,_.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(m);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,_.Z)(function*(){if(!m.redirectPersistenceManager){const I=p&&le(p)||m._popupRedirectResolver;te(I,m,"argument-error"),m.redirectPersistenceManager=yield he.create(m,[le(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,_.Z)(function*(){var I,x;return m._isInitialized&&(yield m.queue((0,_.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===p?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,_.Z)(function*(){if(p===m.currentUser)return m.queue((0,_.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,I,x){if(this._deleted)return()=>{};const F="function"==typeof m?m:m.next.bind(m),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return te(ee,this,"internal-error"),ee.then(()=>F(this.currentUser)),"function"==typeof m?p.addObserver(m,I,x):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,_.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Zn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,_.Z)(function*(){var m;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function gn(w){return(0,G.m9)(w)}class Ze{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,G.ne)(m=>this.observer=m)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ht(w,p,m){const I=gn(w);te(I._canInitEmulator,I,"emulator-config-failed"),te(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const x=!!(null==m?void 0:m.disableWarnings),F=mn(p),{host:ee,port:xe}=function Rr(w){const p=mn(w),m=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const F=x[1];return{host:F,port:vs(I.substr(F.length+1))}}{const[F,ee]=I.split(":");return{host:F,port:vs(ee)}}}(p);I.config.emulator={url:`${F}//${ee}${null===xe?"":`:${xe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ee,port:xe,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function or(){function w(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function mn(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function vs(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class Mr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Ye("not implemented")}_getIdTokenResponse(p){return Ye("not implemented")}_linkToIdToken(p,m){return Ye("not implemented")}_getReauthenticationResolver(p){return Ye("not implemented")}}function Dn(w,p){return jn.apply(this,arguments)}function jn(){return(jn=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:resetPassword",Jt(w,p))})).apply(this,arguments)}function yo(w,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ru(w,p){return ws.apply(this,arguments)}function ws(){return(ws=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:update",Jt(w,p))})).apply(this,arguments)}function ns(){return(ns=(0,_.Z)(function*(w,p){return vr(w,"POST","/v1/accounts:signInWithPassword",Jt(w,p))})).apply(this,arguments)}function Er(w,p){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:sendOobCode",Jt(w,p))})).apply(this,arguments)}function vo(w,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,_.Z)(function*(w,p){return Er(w,p)})).apply(this,arguments)}function vn(w,p){return sa.apply(this,arguments)}function sa(){return(sa=(0,_.Z)(function*(w,p){return Er(w,p)})).apply(this,arguments)}function Ac(w,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,_.Z)(function*(w,p){return Er(w,p)})).apply(this,arguments)}function rs(w,p){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,_.Z)(function*(w,p){return Er(w,p)})).apply(this,arguments)}function aa(){return(aa=(0,_.Z)(function*(w,p){return vr(w,"POST","/v1/accounts:signInWithEmailLink",Jt(w,p))})).apply(this,arguments)}function _l(){return(_l=(0,_.Z)(function*(w,p){return vr(w,"POST","/v1/accounts:signInWithEmailLink",Jt(w,p))})).apply(this,arguments)}class Nu extends Mr{constructor(p,m,I,x=null){super("password",I),this._email=p,this._password=m,this._tenantId=x}static _fromEmailAndPassword(p,m){return new Nu(p,m,"password")}static _fromEmailAndCode(p,m,I=null){return new Nu(p,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,_.Z)(function*(){switch(m.signInMethod){case"password":return function ml(w,p){return ns.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function oa(w,p){return aa.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:$e(p,"internal-error")}})()}_linkToIdToken(p,m){var I=this;return(0,_.Z)(function*(){switch(I.signInMethod){case"password":return yo(p,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Ni(w,p){return _l.apply(this,arguments)}(p,{idToken:m,email:I._email,oobCode:I._password});default:$e(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Gs(w,p){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,_.Z)(function*(w,p){return vr(w,"POST","/v1/accounts:signInWithIdp",Jt(w,p))})).apply(this,arguments)}class Es extends Mr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Es(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):$e("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x}=m,F=(0,se._T)(m,["providerId","signInMethod"]);if(!I||!x)return null;const ee=new Es(I,x);return ee.idToken=F.idToken||void 0,ee.accessToken=F.accessToken||void 0,ee.secret=F.secret,ee.nonce=F.nonce,ee.pendingToken=F.pendingToken||null,ee}_getIdTokenResponse(p){return Gs(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Gs(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Gs(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,G.xO)(m)}return p}}function yp(w,p){return xc.apply(this,arguments)}function xc(){return(xc=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:sendVerificationCode",Jt(w,p))})).apply(this,arguments)}function Ga(){return(Ga=(0,_.Z)(function*(w,p){return vr(w,"POST","/v1/accounts:signInWithPhoneNumber",Jt(w,p))})).apply(this,arguments)}function Rc(){return(Rc=(0,_.Z)(function*(w,p){const m=yield vr(w,"POST","/v1/accounts:signInWithPhoneNumber",Jt(w,p));if(m.temporaryProof)throw wr(w,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const wp={USER_NOT_FOUND:"user-not-found"};function Mc(){return(Mc=(0,_.Z)(function*(w,p){return vr(w,"POST","/v1/accounts:signInWithPhoneNumber",Jt(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),wp)})).apply(this,arguments)}class la extends Mr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new la({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new la({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function vp(w,p){return Ga.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function ua(w,p){return Rc.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ep(w,p){return Mc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:I,verificationCode:x}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:I,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:I,phoneNumber:x,temporaryProof:F}=p;return I||m||x||F?new la({verificationId:m,verificationCode:I,phoneNumber:x,temporaryProof:F}):null}}class Ws{constructor(p){var m,I,x,F,ee,xe;const ot=(0,G.zd)((0,G.pd)(p)),vt=null!==(m=ot.apiKey)&&void 0!==m?m:null,kt=null!==(I=ot.oobCode)&&void 0!==I?I:null,un=function Ip(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=ot.mode)&&void 0!==x?x:null);te(vt&&kt&&un,"argument-error"),this.apiKey=vt,this.operation=un,this.code=kt,this.continueUrl=null!==(F=ot.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(ee=ot.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(xe=ot.tenantId)&&void 0!==xe?xe:null}static parseLink(p){const m=function r_(w){const p=(0,G.zd)((0,G.pd)(w)).link,m=p?(0,G.zd)((0,G.pd)(p)).deep_link_id:null,I=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(I?(0,G.zd)((0,G.pd)(I)).link:null)||I||m||p||w}(p);try{return new Ws(m)}catch(I){return null}}}let Pu=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(m,I){return Nu._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const x=Ws.parseLink(I);return te(x,"argument-error"),Nu._fromEmailAndCode(m,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Is{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Wa extends Is{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class pi extends Wa{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return te("providerId"in m&&"signInMethod"in m,"argument-error"),Es._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return te(p.idToken||p.accessToken,"argument-error"),Es._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return pi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return pi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:F,nonce:ee,providerId:xe}=p;if(!I&&!x&&!m&&!F||!xe)return null;try{return new pi(xe)._credential({idToken:m,accessToken:I,nonce:ee,pendingToken:F})}catch(ot){return null}}}let sh=(()=>{class w extends Wa{constructor(){super("facebook.com")}static credential(m){return Es._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch(I){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ca=(()=>{class w extends Wa{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return Es._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:x}=m;if(!I&&!x)return null;try{return w.credential(I,x)}catch(F){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ku=(()=>{class w extends Wa{constructor(){super("github.com")}static credential(m){return Es._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch(I){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class qa extends Mr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Gs(p,this.buildRequest())}_linkToIdToken(p,m){const I=this.buildRequest();return I.idToken=m,Gs(p,I)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Gs(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x,pendingToken:F}=m;return I&&x&&F&&I===x?new qa(I,F):null}static _create(p,m){return new qa(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pi extends Is{constructor(p){te(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Pi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Pi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=qa.fromJSON(p);return te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:I}=p;if(!m||!I)return null;try{return qa._create(I,m)}catch(x){return null}}}let bs=(()=>{class w extends Wa{constructor(){super("twitter.com")}static credential(m,I){return Es._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=m;if(!I||!x)return null;try{return w.credential(I,x)}catch(F){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Ou(w,p){return za.apply(this,arguments)}function za(){return(za=(0,_.Z)(function*(w,p){return vr(w,"POST","/v1/accounts:signUp",Jt(w,p))})).apply(this,arguments)}class kn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,I,x=!1){return(0,_.Z)(function*(){const F=yield Nt._fromIdTokenResponse(p,I,x),ee=da(I);return new kn({user:F,providerId:ee,_tokenResponse:I,operationType:m})})()}static _forOperation(p,m,I){return(0,_.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const x=da(I);return new kn({user:p,providerId:x,_tokenResponse:I,operationType:m})})()}}function da(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function bp(w){return ha.apply(this,arguments)}function ha(){return(ha=(0,_.Z)(function*(w){var p;const m=gn(w);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new kn({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield Ou(m,{returnSecureToken:!0}),x=yield kn._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class yl extends G.ZR{constructor(p,m,I,x){var F;super(m.code,m.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,yl.prototype),this.customData={appName:p.name,tenantId:null!==(F=p.tenantId)&&void 0!==F?F:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,m,I,x){return new yl(p,m,I,x)}}function kc(w,p,m,I){return("reauthenticate"===p?m._getReauthenticationResolver(w):m._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?yl._fromErrorAndOperation(w,F,p,I):F})}function Lu(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function qs(w,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,_.Z)(function*(w,p){const m=(0,G.m9)(w);yield Eo(!0,m,p);const{providerUserInfo:I}=yield Sr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),x=Lu(I||[]);return m.providerData=m.providerData.filter(F=>x.has(F.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function vl(w,p){return En.apply(this,arguments)}function En(){return(En=(0,_.Z)(function*(w,p,m=!1){const I=yield rt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),m);return kn._forOperation(w,"link",I)})).apply(this,arguments)}function Eo(w,p,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,_.Z)(function*(w,p,m){yield Vn(p);const x=!1===w?"provider-already-linked":"no-such-provider";te(Lu(p.providerData).has(m)===w,p.auth,x)})).apply(this,arguments)}function _n(w,p){return wl.apply(this,arguments)}function wl(){return(wl=(0,_.Z)(function*(w,p,m=!1){const{auth:I}=w,x="reauthenticate";try{const F=yield rt(w,kc(I,x,p,w),m);te(F.idToken,I,"internal-error");const ee=Bt(F.idToken);te(ee,I,"internal-error");const{sub:xe}=ee;return te(w.uid===xe,I,"user-mismatch"),kn._forOperation(w,x,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&$e(I,"user-mismatch"),F}})).apply(this,arguments)}function fa(w,p){return zs.apply(this,arguments)}function zs(){return(zs=(0,_.Z)(function*(w,p,m=!1){const I="signIn",x=yield kc(w,I,p),F=yield kn._fromIdTokenResponse(w,I,x);return m||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Ir(w,p){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,_.Z)(function*(w,p){return fa(gn(w),p)})).apply(this,arguments)}function Fu(w,p){return gi.apply(this,arguments)}function gi(){return(gi=(0,_.Z)(function*(w,p){const m=(0,G.m9)(w);return yield Eo(!1,m,p.providerId),vl(m,p)})).apply(this,arguments)}function Ur(w,p){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,_.Z)(function*(w,p){return _n((0,G.m9)(w),p)})).apply(this,arguments)}function bo(w,p){return pa.apply(this,arguments)}function pa(){return(pa=(0,_.Z)(function*(w,p){return vr(w,"POST","/v1/accounts:signInWithCustomToken",Jt(w,p))})).apply(this,arguments)}function ki(w,p){return is.apply(this,arguments)}function is(){return(is=(0,_.Z)(function*(w,p){const m=gn(w),I=yield bo(m,{token:p,returnSecureToken:!0}),x=yield kn._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ts{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?yt._fromServerResponse(p,m):$e(p,"internal-error")}}class yt extends Ts{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new yt(m)}}function Ka(w,p,m){var I;te((null===(I=m.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),te(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(te(m.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(te(m.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Oc(w,p,m){return ga.apply(this,arguments)}function ga(){return(ga=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),x={requestType:"PASSWORD_RESET",email:p};m&&Ka(I,x,m),yield vn(I,x)})).apply(this,arguments)}function Lc(w,p,m){return ma.apply(this,arguments)}function ma(){return(ma=(0,_.Z)(function*(w,p,m){yield Dn((0,G.m9)(w),{oobCode:p,newPassword:m})})).apply(this,arguments)}function ah(w,p){return Za.apply(this,arguments)}function Za(){return(Za=(0,_.Z)(function*(w,p){yield Ru((0,G.m9)(w),{oobCode:p})})).apply(this,arguments)}function De(w,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,_.Z)(function*(w,p){const m=(0,G.m9)(w),I=yield Dn(m,{oobCode:p}),x=I.requestType;switch(te(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(I.mfaInfo,m,"internal-error");default:te(I.email,m,"internal-error")}let F=null;return I.mfaInfo&&(F=Ts._fromServerResponse(gn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:F},operation:x}})).apply(this,arguments)}function uh(w,p){return In.apply(this,arguments)}function In(){return(In=(0,_.Z)(function*(w,p){const{data:m}=yield De((0,G.m9)(w),p);return m.email})).apply(this,arguments)}function Uu(w,p,m){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,_.Z)(function*(w,p,m){const I=gn(w),x=yield Ou(I,{returnSecureToken:!0,email:p,password:m}),F=yield kn._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(F.user),F})).apply(this,arguments)}function Oi(w,p,m){return Ir((0,G.m9)(w),Pu.credential(p,m))}function El(w,p,m){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),x={requestType:"EMAIL_SIGNIN",email:p};te(m.handleCodeInApp,I,"argument-error"),m&&Ka(I,x,m),yield Ac(I,x)})).apply(this,arguments)}function Cp(w,p){const m=Ws.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function Il(w,p,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),x=Pu.credentialWithLink(p,m||oe());return te(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Ir(I,x)})).apply(this,arguments)}function ya(w,p){return ar.apply(this,arguments)}function ar(){return(ar=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:createAuthUri",Jt(w,p))})).apply(this,arguments)}function ss(w,p){return va.apply(this,arguments)}function va(){return(va=(0,_.Z)(function*(w,p){const I={identifier:p,continueUri:It()?oe():"http://localhost"},{signinMethods:x}=yield ya((0,G.m9)(w),I);return x||[]})).apply(this,arguments)}function wa(w,p){return ei.apply(this,arguments)}function ei(){return(ei=(0,_.Z)(function*(w,p){const m=(0,G.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&Ka(m.auth,x,p);const{email:F}=yield vo(m.auth,x);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function lh(w,p,m){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};m&&Ka(I.auth,F,m);const{email:ee}=yield rs(I.auth,F);ee!==w.email&&(yield w.reload())})).apply(this,arguments)}function Fc(w,p){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,_.Z)(function*(w,p){return nn(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function bl(w,p){return Co.apply(this,arguments)}function Co(){return(Co=(0,_.Z)(function*(w,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const I=(0,G.m9)(w),F={idToken:yield I.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},ee=yield rt(I,Fc(I.auth,F));I.displayName=ee.displayName||null,I.photoURL=ee.photoUrl||null;const xe=I.providerData.find(({providerId:ot})=>"password"===ot);xe&&(xe.displayName=I.displayName,xe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ee)})).apply(this,arguments)}function ch(w,p){return Tl((0,G.m9)(w),p,null)}function Cl(w,p){return Tl((0,G.m9)(w),null,p)}function Tl(w,p,m){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,_.Z)(function*(w,p,m){const{auth:I}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(F.email=p),m&&(F.password=m);const ee=yield rt(w,yo(I,F));yield w._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class To{constructor(p,m,I={}){this.isNewUser=p,this.providerId=m,this.profile=I}}class Dl extends To{constructor(p,m,I,x){super(p,m,I),this.username=x}}class dh extends To{constructor(p,m){super(p,"facebook.com",m)}}class Uc extends Dl{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Do extends To{constructor(p,m){super(p,"google.com",m)}}class Zs extends Dl{constructor(p,m,I){super(p,"twitter.com",m,I)}}function Sl(w){const{user:p,_tokenResponse:m}=w;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ja(w){var p,m;if(!w)return null;const{providerId:I}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&(null==w?void 0:w.idToken)){const ee=null===(m=null===(p=Bt(w.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(ee)return new To(F,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!I)return null;switch(I){case"facebook.com":return new dh(F,x);case"github.com":return new Uc(F,x);case"google.com":return new Do(F,x);case"twitter.com":return new Zs(F,x,w.screenName||null);case"custom":case"anonymous":return new To(F,null);default:return new To(F,I,x)}}(m)}class So{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new So("enroll",p)}static _fromMfaPendingCredential(p){return new So("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,I;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return So._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(I=p.multiFactorSession)||void 0===I?void 0:I.idToken)return So._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Xa{constructor(p,m,I){this.session=p,this.hints=m,this.signInResolver=I}static _fromError(p,m){const I=gn(p),x=m.customData._serverResponse,F=(x.mfaInfo||[]).map(xe=>Ts._fromServerResponse(I,xe));te(x.mfaPendingCredential,I,"internal-error");const ee=So._fromMfaPendingCredential(x.mfaPendingCredential);return new Xa(ee,F,function(){var xe=(0,_.Z)(function*(ot){const vt=yield ot._process(I,ee);delete x.mfaInfo,delete x.mfaPendingCredential;const kt=Object.assign(Object.assign({},x),{idToken:vt.idToken,refreshToken:vt.refreshToken});switch(m.operationType){case"signIn":const un=yield kn._fromIdTokenResponse(I,m.operationType,kt);return yield I._updateCurrentUser(un.user),un;case"reauthenticate":return te(m.user,I,"internal-error"),kn._forOperation(m.user,m.operationType,kt);default:$e(I,"internal-error")}});return function(ot){return xe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,_.Z)(function*(){return m.signInResolver(p)})()}}function xl(w,p){var m;const I=(0,G.m9)(w),x=p;return te(p.customData.operationType,I,"argument-error"),te(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),Xa._fromError(I,x)}function Bu(w,p){return nn(w,"POST","/v2/accounts/mfaEnrollment:start",Jt(w,p))}class jc{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>Ts._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new jc(p)}getSession(){var p=this;return(0,_.Z)(function*(){return So._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var I=this;return(0,_.Z)(function*(){const x=p,F=yield I.getSession(),ee=yield rt(I.user,x._process(I.user.auth,F,m));return yield I.user._updateTokensIfNecessary(ee),I.user.reload()})()}unenroll(p){var m=this;return(0,_.Z)(function*(){const I="string"==typeof p?p:p.uid,x=yield m.user.getIdToken(),F=yield rt(m.user,function Bc(w,p){return nn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(w,p))}(m.user.auth,{idToken:x,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ee})=>ee!==I),yield m.user._updateTokensIfNecessary(F);try{yield m.user.reload()}catch(ee){if("auth/user-token-expired"!==ee.code)throw ee}})()}}const Ds=new WeakMap;function ju(w){const p=(0,G.m9)(w);return Ds.has(p)||Ds.set(p,jc._fromUser(p)),Ds.get(p)}const eu="__sak";class fh{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(eu,"1"),this.storage.removeItem(eu),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const bn=(()=>{class w extends fh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ia(){const w=(0,G.z$)();return H(w)||Tt(w)}()&&function Mi(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=xr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),F=this.localCache[I];x!==F&&m(I,F,x)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((xe,ot,vt)=>{this.notifyListeners(xe,vt)});const x=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(x);if(m.newValue!==xe)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!I)return}const F=()=>{const xe=this.storage.getItem(x);!I&&this.localCache[x]===xe||this.notifyListeners(x,xe)},ee=this.storage.getItem(x);!function zt(){return(0,G.w1)()&&10===document.documentMode}()||ee===m.newValue||m.newValue===m.oldValue?F():setTimeout(F,10)}notifyListeners(m,I){this.localCache[m]=I;const x=this.listeners[m];if(x)for(const F of Array.from(x))F(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var x=()=>super._set,F=this;return(0,_.Z)(function*(){yield x().call(F,m,I),F.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,x=this;return(0,_.Z)(function*(){const F=yield I().call(x,m);return x.localCache[m]=JSON.stringify(F),F})()}_remove(m){var I=()=>super._remove,x=this;return(0,_.Z)(function*(){yield I().call(x,m),delete x.localCache[m]})()}}return w.type="LOCAL",w})(),gt=(()=>{class w extends fh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return w.type="SESSION",w})();let ti=(()=>{class w{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(F=>F.isListeningto(m));if(I)return I;const x=new w(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,_.Z)(function*(){const x=m,{eventId:F,eventType:ee,data:xe}=x.data,ot=I.handlersMap[ee];if(!(null==ot?void 0:ot.size))return;x.ports[0].postMessage({status:"ack",eventId:F,eventType:ee});const vt=Array.from(ot).map(function(){var un=(0,_.Z)(function*(Bo){return Bo(x.origin,xe)});return function(Bo){return un.apply(this,arguments)}}()),kt=yield function Ss(w){return Promise.all(w.map(function(){var p=(0,_.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return p.apply(this,arguments)}}()))}(vt);x.ports[0].postMessage({status:"done",eventId:F,eventType:ee,response:kt})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ur(w="",p=10){let m="";for(let I=0;I<p;I++)m+=Math.floor(10*Math.random());return w+m}class Hc{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,I=50){var x=this;return(0,_.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let ee,xe;return new Promise((ot,vt)=>{const kt=ur("",20);F.port1.start();const un=setTimeout(()=>{vt(new Error("unsupported_event"))},I);xe={messageChannel:F,onMessage(Bo){const Vi=Bo;if(Vi.data.eventId===kt)switch(Vi.data.status){case"ack":clearTimeout(un),ee=setTimeout(()=>{vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),ot(Vi.data.response);break;default:clearTimeout(un),clearTimeout(ee),vt(new Error("invalid_response"))}}},x.handlers.add(xe),F.port1.addEventListener("message",xe.onMessage),x.target.postMessage({eventType:p,eventId:kt,data:m},[F.port2])}).finally(()=>{xe&&x.removeMessageHandler(xe)})})()}}function Wn(){return window}function Rl(){return void 0!==Wn().WorkerGlobalScope&&"function"==typeof Wn().importScripts}function ba(){return(ba=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Ml="firebaseLocalStorageDb",$u="firebaseLocalStorage",Hu="fbase_key";class Cn{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Xs(w,p){return w.transaction([$u],p?"readwrite":"readonly").objectStore($u)}function Br(){const w=indexedDB.open(Ml,1);return new Promise((p,m)=>{w.addEventListener("error",()=>{m(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore($u,{keyPath:Hu})}catch(x){m(x)}}),w.addEventListener("success",(0,_.Z)(function*(){const I=w.result;I.objectStoreNames.contains($u)?p(I):(I.close(),yield function Nl(){const w=indexedDB.deleteDatabase(Ml);return new Cn(w).toPromise()}(),p(yield Br()))}))})}function Ao(w,p,m){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,_.Z)(function*(w,p,m){const I=Xs(w,!0).put({[Hu]:p,value:m});return new Cn(I).toPromise()})).apply(this,arguments)}function tu(){return(tu=(0,_.Z)(function*(w,p){const m=Xs(w,!1).get(p),I=yield new Cn(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function xo(w,p){const m=Xs(w,!0).delete(p);return new Cn(m).toPromise()}const to=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,_.Z)(function*(){return m.db||(m.db=yield Br()),m.db})()}_withRetries(m){var I=this;return(0,_.Z)(function*(){let x=0;for(;;)try{const F=yield I._openDb();return yield m(F)}catch(F){if(x++>3)throw F;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,_.Z)(function*(){return Rl()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,_.Z)(function*(){m.receiver=ti._getInstance(function xt(){return Rl()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,_.Z)(function*(x,F){return{keyProcessed:(yield m._poll()).includes(F.key)}});return function(x,F){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,_.Z)(function*(x,F){return["keyChanged"]});return function(x,F){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,_.Z)(function*(){var I,x;if(m.activeServiceWorker=yield function Js(){return ba.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Hc(m.activeServiceWorker);const F=yield m.sender._send("ping",{},800);!F||(null===(I=F[0])||void 0===I?void 0:I.fulfilled)&&(null===(x=F[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,_.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Li(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Br();return yield Ao(m,eu,"1"),yield xo(m,eu),!0}catch(m){}return!1})()}_withPendingWrite(m){var I=this;return(0,_.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var x=this;return(0,_.Z)(function*(){return x._withPendingWrite((0,_.Z)(function*(){return yield x._withRetries(F=>Ao(F,m,I)),x.localCache[m]=I,x.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,_.Z)(function*(){const x=yield I._withRetries(F=>function eo(w,p){return tu.apply(this,arguments)}(F,m));return I.localCache[m]=x,x})()}_remove(m){var I=this;return(0,_.Z)(function*(){return I._withPendingWrite((0,_.Z)(function*(){return yield I._withRetries(x=>xo(x,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,_.Z)(function*(){const I=yield m._withRetries(ee=>{const xe=Xs(ee,!1).getAll();return new Cn(xe).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const x=[],F=new Set;for(const{fbase_key:ee,value:xe}of I)F.add(ee),JSON.stringify(m.localCache[ee])!==JSON.stringify(xe)&&(m.notifyListeners(ee,xe),x.push(ee));for(const ee of Object.keys(m.localCache))m.localCache[ee]&&!F.has(ee)&&(m.notifyListeners(ee,null),x.push(ee));return x})()}notifyListeners(m,I){this.localCache[m]=I;const x=this.listeners[m];if(x)for(const F of Array.from(x))F(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Ta(w,p){return nn(w,"POST","/v2/accounts/mfaSignIn:start",Jt(w,p))}function Jn(){return(Jn=(0,_.Z)(function*(w){return(yield nn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Wc(w){return new Promise((p,m)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=p,I.onerror=x=>{const F=Re("internal-error");F.customData=x,m(F)},I.type="text/javascript",I.charset="UTF-8",function xs(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(I)})}function Rn(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Rs=1e12;class jr{constructor(p){this.auth=p,this.counter=Rs,this._widgets=new Map}render(p,m){const I=this.counter;return this._widgets.set(I,new Ms(p,this.auth.name,m||{})),this.counter++,I}reset(p){var m;const I=p||Rs;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Rs))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,_.Z)(function*(){var I;return null===(I=m._widgets.get(p||Rs))||void 0===I||I.execute(),""})()}}class Ms{constructor(p,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;te(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function os(w){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mn=Rn("rcb"),Sa=new ht(3e4,6e4);class Hn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wn().grecaptcha}load(p,m=""){return te(function Tp(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Wn().grecaptcha):new Promise((I,x)=>{const F=Wn().setTimeout(()=>{x(Re(p,"network-request-failed"))},Sa.get());Wn()[Mn]=()=>{Wn().clearTimeout(F),delete Wn()[Mn];const xe=Wn().grecaptcha;if(!xe)return void x(Re(p,"internal-error"));const ot=xe.render;xe.render=(vt,kt)=>{const un=ot(vt,kt);return this.counter++,un},this.hostLanguage=m,I(xe)},Wc(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Mn,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(F),x(Re(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Wn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Dp{load(p){return(0,_.Z)(function*(){return new jr(p)})()}clearedOneInstance(){}}const mh="recaptcha",Ro={theme:"light",type:"image"};class ni{constructor(p,m=Object.assign({},Ro),I){this.parameters=m,this.type=mh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gn(I),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;te(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dp:new Hn,this.validateStartingState()}verify(){var p=this;return(0,_.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(m)||new Promise(F=>{const ee=xe=>{!xe||(p.tokenChangeListeners.delete(ee),F(xe))};p.tokenChangeListeners.add(ee),p.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof p)p(m);else if("string"==typeof p){const I=Wn()[p];"function"==typeof I&&I(m)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,_.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,_.Z)(function*(){te(It()&&!Rl(),p.auth,"internal-error"),yield function Sp(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function nu(w){return Jn.apply(this,arguments)}(p.auth);te(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class as{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=la._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Mo(w,p,m){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,_.Z)(function*(w,p,m){const I=gn(w),x=yield Wu(I,p,(0,G.m9)(m));return new as(x,F=>Ir(I,F))})).apply(this,arguments)}function qn(w,p,m){return iu.apply(this,arguments)}function iu(){return(iu=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);yield Eo(!1,I,"phone");const x=yield Wu(I.auth,p,(0,G.m9)(m));return new as(x,F=>Fu(I,F))})).apply(this,arguments)}function Gu(w,p,m){return zc.apply(this,arguments)}function zc(){return(zc=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w),x=yield Wu(I.auth,p,(0,G.m9)(m));return new as(x,F=>Ur(I,F))})).apply(this,arguments)}function Wu(w,p,m){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,_.Z)(function*(w,p,m){var I;const x=yield m.verify();try{let F;if(te("string"==typeof x,w,"argument-error"),te(m.type===mh,w,"argument-error"),F="string"==typeof p?{phoneNumber:p}:p,"session"in F){const ee=F.session;if("phoneNumber"in F)return te("enroll"===ee.type,w,"internal-error"),(yield Bu(w,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{te("signin"===ee.type,w,"internal-error");const xe=(null===(I=F.multiFactorHint)||void 0===I?void 0:I.uid)||F.multiFactorUid;return te(xe,w,"missing-multi-factor-info"),(yield Ta(w,{mfaPendingCredential:ee.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield yp(w,{phoneNumber:F.phoneNumber,recaptchaToken:x});return ee}}finally{m._reset()}})).apply(this,arguments)}function us(w,p){return su.apply(this,arguments)}function su(){return(su=(0,_.Z)(function*(w,p){yield vl((0,G.m9)(w),p)})).apply(this,arguments)}let No=(()=>{class w{constructor(m){this.providerId=w.PROVIDER_ID,this.auth=gn(m)}verifyPhoneNumber(m,I){return Wu(this.auth,m,(0,G.m9)(I))}static credential(m,I){return la._fromVerification(m,I)}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:x}=m;return I&&x?la._fromTokenResponse(I,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ri(w,p){return p?le(p):(te(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class xa extends Mr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Gs(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Gs(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Gs(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function kl(w){return fa(w.auth,new xa(w),w.bypassAuthState)}function Ol(w){const{auth:p,user:m}=w;return te(m,p,"internal-error"),_n(m,new xa(w),w.bypassAuthState)}function Ll(w){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,_.Z)(function*(w){const{auth:p,user:m}=w;return te(m,p,"internal-error"),vl(m,new xa(w),w.bypassAuthState)})).apply(this,arguments)}class Kc{constructor(p,m,I,x,F=!1){this.auth=p,this.resolver=I,this.user=x,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,_.Z)(function*(I,x){p.pendingPromise={resolve:I,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(F){p.reject(F)}});return function(I,x){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,_.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:F,tenantId:ee,error:xe,type:ot}=p;if(xe)return void m.reject(xe);const vt={auth:m.auth,requestUri:I,sessionId:x,tenantId:ee||void 0,postBody:F||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ot)(vt))}catch(kt){m.reject(kt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return kl;case"linkViaPopup":case"linkViaRedirect":return Ll;case"reauthViaPopup":case"reauthViaRedirect":return Ol;default:$e(this.auth,"internal-error")}}resolve(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gr=new ht(2e3,1e4);function Fl(w,p,m){return ls.apply(this,arguments)}function ls(){return(ls=(0,_.Z)(function*(w,p,m){const I=gn(w);Ie(w,p,Is);const x=ri(I,m);return new qu(I,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function Ap(w,p,m){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);Ie(I.auth,p,Is);const x=ri(I.auth,m);return new qu(I.auth,"reauthViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}function Zc(w,p,m){return mi.apply(this,arguments)}function mi(){return(mi=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);Ie(I.auth,p,Is);const x=ri(I.auth,m);return new qu(I.auth,"linkViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}let qu=(()=>{class w extends Kc{constructor(m,I,x,F,ee){super(m,I,F,ee),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var m=this;return(0,_.Z)(function*(){const I=yield m.execute();return te(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,_.Z)(function*(){Q(1===m.filter.length,"Popup operations only handle one event");const I=ur();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Re(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,x;this.pollId=(null===(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,gr.get())};m()}}return w.currentPopupAction=null,w})();const ou=new Map;class Po extends Kc{constructor(p,m,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,_.Z)(function*(){let I=ou.get(m.auth._key());if(!I){try{const F=(yield function Xn(w,p){return $r.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;I=()=>Promise.resolve(F)}catch(x){I=()=>Promise.reject(x)}ou.set(m.auth._key(),I)}return m.bypassAuthState||ou.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,I=this;return(0,_.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(I,p);if("unknown"!==p.type){if(p.eventId){const x=yield I.auth._redirectUserForId(p.eventId);if(x)return I.user=x,m().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function $r(){return($r=(0,_.Z)(function*(w,p){const m=C(p),I=au(w);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(m));return yield I._remove(m),x})).apply(this,arguments)}function Ul(w,p){return ko.apply(this,arguments)}function ko(){return(ko=(0,_.Z)(function*(w,p){return au(w)._set(C(p),"true")})).apply(this,arguments)}function zu(){ou.clear()}function au(w){return le(w._redirectPersistence)}function C(w){return Y("pendingRedirect",w.config.apiKey,w.name)}function T(w,p,m){return function M(w,p,m){return B.apply(this,arguments)}(w,p,m)}function B(){return(B=(0,_.Z)(function*(w,p,m){const I=gn(w);Ie(w,p,Is);const x=ri(I,m);return yield Ul(x,I),x._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function J(w,p,m){return function ie(w,p,m){return Ne.apply(this,arguments)}(w,p,m)}function Ne(){return(Ne=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);Ie(I.auth,p,Is);const x=ri(I.auth,m);yield Ul(x,I.auth);const F=yield uu(I);return x._openRedirect(I.auth,p,"reauthViaRedirect",F)})).apply(this,arguments)}function Pe(w,p,m){return function nt(w,p,m){return bt.apply(this,arguments)}(w,p,m)}function bt(){return(bt=(0,_.Z)(function*(w,p,m){const I=(0,G.m9)(w);Ie(I.auth,p,Is);const x=ri(I.auth,m);yield Eo(!1,I,p.providerId),yield Ul(x,I.auth);const F=yield uu(I);return x._openRedirect(I.auth,p,"linkViaRedirect",F)})).apply(this,arguments)}function Gt(w,p){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,_.Z)(function*(w,p){return yield gn(w)._initializationPromise,er(w,p,!1)})).apply(this,arguments)}function er(w,p){return zn.apply(this,arguments)}function zn(){return(zn=(0,_.Z)(function*(w,p,m=!1){const I=gn(w),x=ri(I,p),ee=yield new Po(I,x,m).execute();return ee&&!m&&(delete ee.user._redirectEventId,yield I._persistUserIfCurrent(ee.user),yield I._setRedirectUser(null,p)),ee})).apply(this,arguments)}function uu(w){return ro.apply(this,arguments)}function ro(){return(ro=(0,_.Z)(function*(w){const p=ur(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class ii{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(m=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function _h(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oo(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var I;if(p.error&&!Oo(p)){const x=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(Re(this.auth,x))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const I=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ui(p))}saveEventToCache(p){this.cachedEventUids.add(Ui(p)),this.lastProcessedEventTime=Date.now()}}function Ui(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function Oo({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Ku(w){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,_.Z)(function*(w,p={}){return nn(w,"GET","/v1/projects",p)})).apply(this,arguments)}const Vl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xp=/^https?/;function yh(){return(yh=(0,_.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Ku(w);for(const m of p)try{if(Lo(m))return}catch(I){}$e(w,"unauthorized-domain")})).apply(this,arguments)}function Lo(w){const p=oe(),{protocol:m,hostname:I}=new URL(p);if(w.startsWith("chrome-extension://")){const ee=new URL(w);return""===ee.hostname&&""===I?"chrome-extension:"===m&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&ee.hostname===I}if(!xp.test(m))return!1;if(Vl.test(w))return I===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const Bl=new ht(3e4,6e4);function Rp(){const w=Wn().___jsl;if(null==w?void 0:w.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let m=0;m<w.CP.length;m++)w.CP[m]=null}let jl=null;function o_(w){return jl=jl||function fw(w){return new Promise((p,m)=>{var I,x,F;function ee(){Rp(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Rp(),m(Re(w,"network-request-failed"))},timeout:Bl.get()})}if(null===(x=null===(I=Wn().gapi)||void 0===I?void 0:I.iframes)||void 0===x?void 0:x.Iframe)p(gapi.iframes.getContext());else{if(!(null===(F=Wn().gapi)||void 0===F?void 0:F.load)){const xe=Rn("iframefcb");return Wn()[xe]=()=>{gapi.load?ee():m(Re(w,"network-request-failed"))},Wc(`https://apis.google.com/js/api.js?onload=${xe}`).catch(ot=>m(ot))}ee()}}).catch(p=>{throw jl=null,p})}(w),jl}const a_=new ht(5e3,15e3),Fo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yc(w){const p=w.config;te(p.authDomain,w,"auth-domain-config-required");const m=p.emulator?pn(p,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:w.name,v:P.SDK_VERSION},x=Uo.get(w.config.apiHost);x&&(I.eid=x);const F=w._getFrameworks();return F.length&&(I.fw=F.join(",")),`${m}?${(0,G.xO)(I).slice(1)}`}function Eh(){return Eh=(0,_.Z)(function*(w){const p=yield o_(w),m=Wn().gapi;return te(m,w,"internal-error"),p.open({where:document.body,url:Yc(w),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fo,dontclear:!0},I=>new Promise(function(){var x=(0,_.Z)(function*(F,ee){yield I.restyle({setHideOnLeave:!1});const xe=Re(w,"network-request-failed"),ot=Wn().setTimeout(()=>{ee(xe)},a_.get());function vt(){Wn().clearTimeout(ot),F(I)}I.ping(vt).then(vt,()=>{ee(xe)})});return function(F,ee){return x.apply(this,arguments)}}()))}),Eh.apply(this,arguments)}const Yu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $l{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function cu(w,p,m,I,x,F){te(w.config.authDomain,w,"auth-domain-config-required"),te(w.config.apiKey,w,"invalid-api-key");const ee={apiKey:w.config.apiKey,appName:w.name,authType:m,redirectUrl:I,v:P.SDK_VERSION,eventId:x};if(p instanceof Is){p.setDefaultLanguage(w.languageCode),ee.providerId=p.providerId||"",(0,G.xb)(p.getCustomParameters())||(ee.customParameters=JSON.stringify(p.getCustomParameters()));for(const[ot,vt]of Object.entries(F||{}))ee[ot]=vt}if(p instanceof Wa){const ot=p.getScopes().filter(vt=>""!==vt);ot.length>0&&(ee.scopes=ot.join(","))}w.tenantId&&(ee.tid=w.tenantId);const xe=ee;for(const ot of Object.keys(xe))void 0===xe[ot]&&delete xe[ot];return`${function c_({config:w}){return w.emulator?pn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,G.xO)(xe).slice(1)}`}const Th="webStorageSupport",Vo=class Ra{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gt,this._completeRedirectFn=er}_openPopup(p,m,I,x){var F=this;return(0,_.Z)(function*(){var ee;Q(null===(ee=F.eventManagers[p._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const xe=cu(p,m,I,oe(),x);return function bh(w,p,m,I=500,x=600){const F=Math.max((window.screen.availHeight-x)/2,0).toString(),ee=Math.max((window.screen.availWidth-I)/2,0).toString();let xe="";const ot=Object.assign(Object.assign({},Yu),{width:I.toString(),height:x.toString(),top:F,left:ee}),vt=(0,G.z$)().toLowerCase();m&&(xe=ae(vt)?"_blank":m),V(vt)&&(p=p||"http://localhost",ot.scrollbars="yes");const kt=Object.entries(ot).reduce((Bo,[Vi,Ju])=>`${Bo}${Vi}=${Ju},`,"");if(function sr(w=(0,G.z$)()){var p;return Tt(w)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(vt)&&"_self"!==xe)return function Jc(w,p){const m=document.createElement("a");m.href=w,m.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(p||"",xe),new $l(null);const un=window.open(p||"",xe,kt);te(un,w,"popup-blocked");try{un.focus()}catch(Bo){}return new $l(un)}(p,xe,ur())})()}_openRedirect(p,m,I,x){var F=this;return(0,_.Z)(function*(){return yield F._originValidation(p),function Qs(w){Wn().location.href=w}(cu(p,m,I,oe(),x)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:x,promise:F}=this.eventManagers[m];return x?Promise.resolve(x):(Q(F,"If manager is not set, promise should be"),F)}const I=this.initAndGetManager(p);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(p){var m=this;return(0,_.Z)(function*(){const I=yield function lu(w){return Eh.apply(this,arguments)}(p),x=new ii(p);return I.register("authEvent",F=>(te(null==F?void 0:F.authEvent,p,"invalid-auth-event"),{status:x.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:x},m.iframes[p._key()]=I,x})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Th,{type:Th},x=>{var F;const ee=null===(F=null==x?void 0:x[0])||void 0===F?void 0:F[Th];void 0!==ee&&m(!!ee),$e(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function s_(w){return yh.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return xr()||H()||Tt()}};class Xc extends class Hl{constructor(p){this.factorId=p}_process(p,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,I);case"signin":return this._finalizeSignIn(p,m.credential);default:return Ye("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Xc(p)}_finalizeEnroll(p,m,I){return function Qn(w,p){return nn(w,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(w,p))}(p,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Da(w,p){return nn(w,"POST","/v2/accounts/mfaSignIn:finalize",Jt(w,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let d_=(()=>{class w{constructor(){}static assertion(m){return Xc._fromCredential(m)}}return w.FACTOR_ID="phone",w})();var Mp="@firebase/auth",h_="0.19.11";class Np{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,_.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(I=>{var x;p((null===(x=I)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function f_(w){(0,P._registerComponent)(new _e.wA("auth",(p,{options:m})=>{const I=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:F,authDomain:ee}=I.options;return((xe,ot)=>{te(F&&!F.includes(":"),"invalid-api-key",{appName:xe.name}),te(!(null==ee?void 0:ee.includes(":")),"argument-error",{appName:xe.name});const vt={apiKey:F,authDomain:ee,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zn(w)},kt=new xu(xe,ot,vt);return function Le(w,p){const m=(null==p?void 0:p.persistence)||[],I=(Array.isArray(m)?m:[m]).map(le);(null==p?void 0:p.errorMap)&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(I,null==p?void 0:p.popupRedirectResolver)}(kt,m),kt})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,I)=>{p.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new _e.wA("auth-internal",p=>{const m=gn(p.getProvider("auth").getImmediate());return new Np(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Mp,h_,function Pp(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,P.registerVersion)(Mp,h_,"esm2017")}("Browser")},2090:(dt,Te,L)=>{L.d(Te,{$s:()=>ts,BH:()=>Me,DV:()=>xn,Dv:()=>Yr,G6:()=>Ye,GJ:()=>Jt,L:()=>ge,LL:()=>It,Lj:()=>Mt,Mn:()=>Ke,Pz:()=>ht,Sg:()=>Fe,UG:()=>be,UI:()=>yr,US:()=>ce,Wj:()=>Ar,X3:()=>pt,Yr:()=>te,ZB:()=>ne,ZR:()=>oe,b$:()=>Re,cI:()=>ut,d:()=>Ae,dS:()=>Bt,eu:()=>de,g5:()=>se,gK:()=>Nn,gQ:()=>Xi,h$:()=>ue,hl:()=>Q,hu:()=>P,jU:()=>Je,lb:()=>$s,m9:()=>mt,ne:()=>ft,p$:()=>q,pd:()=>wr,r3:()=>nn,ru:()=>$e,tV:()=>z,uI:()=>me,ug:()=>lt,vZ:()=>vr,w1:()=>Ie,w9:()=>tn,xO:()=>fi,xb:()=>fr,z$:()=>Ue,zI:()=>le,zd:()=>pr});var _=L(5861);const P=function(K,$){if(!K)throw se($)},se=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},re=function(K){const $=[];let Y=0;for(let he=0;he<K.length;he++){let O=K.charCodeAt(he);O<128?$[Y++]=O:O<2048?($[Y++]=O>>6|192,$[Y++]=63&O|128):55296==(64512&O)&&he+1<K.length&&56320==(64512&K.charCodeAt(he+1))?(O=65536+((1023&O)<<10)+(1023&K.charCodeAt(++he)),$[Y++]=O>>18|240,$[Y++]=O>>12&63|128,$[Y++]=O>>6&63|128,$[Y++]=63&O|128):($[Y++]=O>>12|224,$[Y++]=O>>6&63|128,$[Y++]=63&O|128)}return $},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,$){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let O=0;O<K.length;O+=3){const V=K[O],H=O+1<K.length,ae=H?K[O+1]:0,Ve=O+2<K.length,qe=Ve?K[O+2]:0;let Tt=(15&ae)<<2|qe>>6,Tn=63&qe;Ve||(Tn=64,H||(Tt=64)),he.push(Y[V>>2],Y[(3&V)<<4|ae>>4],Y[Tt],Y[Tn])}return he.join("")},encodeString(K,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(K):this.encodeByteArray(re(K),$)},decodeString(K,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(K):function(K){const $=[];let Y=0,he=0;for(;Y<K.length;){const O=K[Y++];if(O<128)$[he++]=String.fromCharCode(O);else if(O>191&&O<224){const V=K[Y++];$[he++]=String.fromCharCode((31&O)<<6|63&V)}else if(O>239&&O<365){const Ve=((7&O)<<18|(63&K[Y++])<<12|(63&K[Y++])<<6|63&K[Y++])-65536;$[he++]=String.fromCharCode(55296+(Ve>>10)),$[he++]=String.fromCharCode(56320+(1023&Ve))}else{const V=K[Y++],H=K[Y++];$[he++]=String.fromCharCode((15&O)<<12|(63&V)<<6|63&H)}}return $.join("")}(this.decodeStringToByteArray(K,$))},decodeStringToByteArray(K,$){this.init_();const Y=$?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let O=0;O<K.length;){const V=Y[K.charAt(O++)],ae=O<K.length?Y[K.charAt(O)]:0;++O;const qe=O<K.length?Y[K.charAt(O)]:64;++O;const tt=O<K.length?Y[K.charAt(O)]:64;if(++O,null==V||null==ae||null==qe||null==tt)throw Error();he.push(V<<2|ae>>4),64!==qe&&(he.push(ae<<4&240|qe>>2),64!==tt&&he.push(qe<<6&192|tt))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},ue=function(K){const $=re(K);return ce.encodeByteArray($,!0)},ge=function(K){return ue(K).replace(/\./g,"")},z=function(K){try{return ce.decodeString(K,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function q(K){return ne(void 0,K)}function ne(K,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return $}for(const Y in $)!$.hasOwnProperty(Y)||!Ge(Y)||(K[Y]=ne(K[Y],$[Y]));return K}function Ge(K){return"__proto__"!==K}class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,Y)=>{this.resolve=$,this.reject=Y})}wrapCallback($){return(Y,he)=>{Y?this.reject(Y):this.resolve(he),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(Y):$(Y,he))}}}function Fe(K,$){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=$||"demo-project",O=K.iat||0,V=K.sub||K.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const H=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:O,exp:O+3600,auth_time:O,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},K);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(H)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function me(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function Je(){return"object"==typeof self&&self.self===self}function $e(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function Re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Ue().indexOf("Electron/")>=0}function Ie(){const K=Ue();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Ke(){return Ue().indexOf("MSAppHost/")>=0}function te(){return!1}function Ye(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q(){return"object"==typeof indexedDB}function de(){return new Promise((K,$)=>{try{let Y=!0;const he="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(he);O.onsuccess=()=>{O.result.close(),Y||self.indexedDB.deleteDatabase(he),K(!0)},O.onupgradeneeded=()=>{Y=!1},O.onerror=()=>{var V;$((null===(V=O.error)||void 0===V?void 0:V.message)||"")}}catch(Y){$(Y)}})}function le(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class oe extends Error{constructor($,Y,he){super(Y),this.code=$,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor($,Y,he){this.service=$,this.serviceName=Y,this.errors=he}create($,...Y){const he=Y[0]||{},O=`${this.service}/${$}`,V=this.errors[$],H=V?function en(K,$){return K.replace(Fn,(Y,he)=>{const O=$[he];return null!=O?String(O):`<${he}?>`})}(V,he):"Error";return new oe(O,`${this.serviceName}: ${H} (${O}).`,he)}}const Fn=/\{\$([^}]+)}/g;function ut(K){return JSON.parse(K)}function ht(K){return JSON.stringify(K)}const pn=function(K){let $={},Y={},he={},O="";try{const V=K.split(".");$=ut(z(V[0])||""),Y=ut(z(V[1])||""),O=V[2],he=Y.d||{},delete Y.d}catch(V){}return{header:$,claims:Y,data:he,signature:O}},tn=function(K){const Y=pn(K).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},Jt=function(K){const $=pn(K).claims;return"object"==typeof $&&!0===$.admin};function nn(K,$){return Object.prototype.hasOwnProperty.call(K,$)}function xn(K,$){if(Object.prototype.hasOwnProperty.call(K,$))return K[$]}function fr(K){for(const $ in K)if(Object.prototype.hasOwnProperty.call(K,$))return!1;return!0}function yr(K,$,Y){const he={};for(const O in K)Object.prototype.hasOwnProperty.call(K,O)&&(he[O]=$.call(Y,K[O],O,K));return he}function vr(K,$){if(K===$)return!0;const Y=Object.keys(K),he=Object.keys($);for(const O of Y){if(!he.includes(O))return!1;const V=K[O],H=$[O];if(Ji(V)&&Ji(H)){if(!vr(V,H))return!1}else if(V!==H)return!1}for(const O of he)if(!Y.includes(O))return!1;return!0}function Ji(K){return null!==K&&"object"==typeof K}function fi(K){const $=[];for(const[Y,he]of Object.entries(K))Array.isArray(he)?he.forEach(O=>{$.push(encodeURIComponent(Y)+"="+encodeURIComponent(O))}):$.push(encodeURIComponent(Y)+"="+encodeURIComponent(he));return $.length?"&"+$.join("&"):""}function pr(K){const $={};return K.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[O,V]=he.split("=");$[decodeURIComponent(O)]=decodeURIComponent(V)}}),$}function wr(K){const $=K.indexOf("?");if(!$)return"";const Y=K.indexOf("#",$);return K.substring($,Y>0?Y:void 0)}class Xi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,Y){Y||(Y=0);const he=this.W_;if("string"==typeof $)for(let tt=0;tt<16;tt++)he[tt]=$.charCodeAt(Y)<<24|$.charCodeAt(Y+1)<<16|$.charCodeAt(Y+2)<<8|$.charCodeAt(Y+3),Y+=4;else for(let tt=0;tt<16;tt++)he[tt]=$[Y]<<24|$[Y+1]<<16|$[Y+2]<<8|$[Y+3],Y+=4;for(let tt=16;tt<80;tt++){const Tt=he[tt-3]^he[tt-8]^he[tt-14]^he[tt-16];he[tt]=4294967295&(Tt<<1|Tt>>>31)}let qe,wt,O=this.chain_[0],V=this.chain_[1],H=this.chain_[2],ae=this.chain_[3],Ve=this.chain_[4];for(let tt=0;tt<80;tt++){tt<40?tt<20?(qe=ae^V&(H^ae),wt=1518500249):(qe=V^H^ae,wt=1859775393):tt<60?(qe=V&H|ae&(V|H),wt=2400959708):(qe=V^H^ae,wt=3395469782);const Tt=(O<<5|O>>>27)+qe+Ve+wt+he[tt]&4294967295;Ve=ae,ae=H,H=4294967295&(V<<30|V>>>2),V=O,O=Tt}this.chain_[0]=this.chain_[0]+O&4294967295,this.chain_[1]=this.chain_[1]+V&4294967295,this.chain_[2]=this.chain_[2]+H&4294967295,this.chain_[3]=this.chain_[3]+ae&4294967295,this.chain_[4]=this.chain_[4]+Ve&4294967295}update($,Y){if(null==$)return;void 0===Y&&(Y=$.length);const he=Y-this.blockSize;let O=0;const V=this.buf_;let H=this.inbuf_;for(;O<Y;){if(0===H)for(;O<=he;)this.compress_($,O),O+=this.blockSize;if("string"==typeof $){for(;O<Y;)if(V[H]=$.charCodeAt(O),++H,++O,H===this.blockSize){this.compress_(V),H=0;break}}else for(;O<Y;)if(V[H]=$[O],++H,++O,H===this.blockSize){this.compress_(V),H=0;break}}this.inbuf_=H,this.total_+=Y}digest(){const $=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&Y,Y/=256;this.compress_(this.buf_);let he=0;for(let O=0;O<5;O++)for(let V=24;V>=0;V-=8)$[he]=this.chain_[O]>>V&255,++he;return $}}function ft(K,$){const Y=new Sr(K,$);return Y.subscribe.bind(Y)}class Sr{constructor($,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{$(this)}).catch(he=>{this.error(he)})}next($){this.forEachObserver(Y=>{Y.next($)})}error($){this.forEachObserver(Y=>{Y.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,Y,he){let O;if(void 0===$&&void 0===Y&&void 0===he)throw new Error("Missing Observer.");O=function rn(K,$){if("object"!=typeof K||null===K)return!1;for(const Y of $)if(Y in K&&"function"==typeof K[Y])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:Y,complete:he},void 0===O.next&&(O.next=Gn),void 0===O.error&&(O.error=Gn),void 0===O.complete&&(O.complete=Gn);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch(H){}}),this.observers.push(O),V}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,$)}sendOne($,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{Y(this.observers[$])}catch(he){"undefined"!=typeof console&&console.error&&console.error(he)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gn(){}const Yr=function(K,$,Y,he){let O;if(he<$?O="at least "+$:he>Y&&(O=0===Y?"none":"no more than "+Y),O)throw new Error(K+" failed: Was called with "+he+(1===he?" argument.":" arguments.")+" Expects "+O+".")};function Nn(K,$){return`${K} failed: ${$} argument `}function Ar(K,$,Y,he){if((!he||Y)&&"function"!=typeof Y)throw new Error(Nn(K,$)+"must be a valid function.")}function $s(K,$,Y,he){if((!he||Y)&&("object"!=typeof Y||null===Y))throw new Error(Nn(K,$)+"must be a valid context object.")}const Bt=function(K){const $=[];let Y=0;for(let he=0;he<K.length;he++){let O=K.charCodeAt(he);if(O>=55296&&O<=56319){const V=O-55296;he++,P(he<K.length,"Surrogate pair missing trail surrogate."),O=65536+(V<<10)+(K.charCodeAt(he)-56320)}O<128?$[Y++]=O:O<2048?($[Y++]=O>>6|192,$[Y++]=63&O|128):O<65536?($[Y++]=O>>12|224,$[Y++]=O>>6&63|128,$[Y++]=63&O|128):($[Y++]=O>>18|240,$[Y++]=O>>12&63|128,$[Y++]=O>>6&63|128,$[Y++]=63&O|128)}return $},lt=function(K){let $=0;for(let Y=0;Y<K.length;Y++){const he=K.charCodeAt(Y);he<128?$++:he<2048?$+=2:he>=55296&&he<=56319?($+=4,Y++):$+=3}return $};function ts(K,$=1e3,Y=2){const he=$*Math.pow(Y,K),O=Math.round(.5*he*(Math.random()-.5)*2);return Math.min(144e5,he+O)}function mt(K){return K&&K._delegate?K._delegate:K}function Bn(K,$){return new Promise((Y,he)=>{K.onsuccess=O=>{Y(O.target.result)},K.onerror=O=>{var V;he(`${$}: ${null===(V=O.target.error)||void 0===V?void 0:V.message}`)}})}class qt{constructor($){this._db=$,this.objectStoreNames=this._db.objectStoreNames}transaction($,Y){return new He(this._db.transaction.call(this._db,$,Y))}createObjectStore($,Y){return new Ce(this._db.createObjectStore($,Y))}close(){this._db.close()}}class He{constructor($){this._transaction=$,this.complete=new Promise((Y,he)=>{this._transaction.oncomplete=function(){Y()},this._transaction.onerror=()=>{he(this._transaction.error)},this._transaction.onabort=()=>{he(this._transaction.error)}})}objectStore($){return new Ce(this._transaction.objectStore($))}}class Ce{constructor($){this._store=$}index($){return new Xe(this._store.index($))}createIndex($,Y,he){return new Xe(this._store.createIndex($,Y,he))}get($){return Bn(this._store.get($),"Error reading from IndexedDB")}put($,Y){return Bn(this._store.put($,Y),"Error writing to IndexedDB")}delete($){return Bn(this._store.delete($),"Error deleting from IndexedDB")}clear(){return Bn(this._store.clear(),"Error clearing IndexedDB object store")}}class Xe{constructor($){this._index=$}get($){return Bn(this._index.get($),"Error reading from IndexedDB")}}function pt(K,$,Y){return new Promise((he,O)=>{try{const V=indexedDB.open(K,$);V.onsuccess=H=>{he(new qt(H.target.result))},V.onerror=H=>{var ae;O(`Error opening indexedDB: ${null===(ae=H.target.error)||void 0===ae?void 0:ae.message}`)},V.onupgradeneeded=H=>{Y(new qt(V.result),H.oldVersion,H.newVersion,new He(V.transaction))}}catch(V){O(`Error opening indexedDB: ${V.message}`)}})}function Mt(K){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,_.Z)(function*(K){return new Promise(($,Y)=>{try{const he=indexedDB.deleteDatabase(K);he.onsuccess=()=>{$()},he.onerror=O=>{var V;Y(`Error deleting indexedDB database "${K}": ${null===(V=O.target.error)||void 0===V?void 0:V.message}`)}}catch(he){Y(`Error deleting indexedDB database "${K}": ${he.message}`)}})})).apply(this,arguments)}},4083:(dt,Te,L)=>{var _=L(5e3);let G=null;function P(){return G}const ce=new _.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function ge(){return(0,_.LFG)(q)}()},providedIn:"platform"}),n})();const z=new _.OlP("Location Initialized");let q=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Ge(){return new q((0,_.LFG)(ce))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function be(n){const e=(0,_.LFG)(ce).location;return new $e((0,_.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const Je=new _.OlP("appBaseHref");let $e=(()=>{class n extends me{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(Je,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ue(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ue(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(Je,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t,r){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(te(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function Ke(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Me,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(_.LFG(me),_.LFG(ue))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Ie(){return new Ae((0,_.LFG)(me),(0,_.LFG)(ue))}()},providedIn:"root"}),n})();function te(n){return n.replace(/\/index.html$/,"")}let Nr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b),_.Y36(_.Rgc))},n.\u0275dir=_.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class vn{constructor(){this.$implicit=null,this.ngIf=null}}function sa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,_.AaK)(e)}'.`)}let Pc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function da(n){return"server"===n}let kc=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new Lu((0,_.LFG)(ce),window)}),n})();class Lu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function wo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qs(this.window.history)||qs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function qs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Io extends class Eo extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){G||(G=n)}(new Io)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wl(){return _n=_n||document.querySelector("base"),_n?_n.getAttribute("href"):null}();return null==t?null:function zs(n){fa=fa||document.createElement("a"),fa.setAttribute("href",n);const e=fa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_n=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ru(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let fa,_n=null;const Ir=new _.OlP("TRANSITION_ID"),Fu=[{provide:_.ip1,useFactory:function Yn(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Ir,ce,_.zs3],multi:!0}];class gi{static init(){(0,_.VLi)(new gi)}addToWindow(e){_.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const i=_.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ur=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Cs=new _.OlP("EventManagerPlugins");let bo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Cs),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class pa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ki=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),is=(()=>{class n extends ki{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ts),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ts))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Ts(n){P().remove(n)}const yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ka=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?De(n,i,t):(i=i.replace(Ka,n),t.push(i))}return t}function jt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let In=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Uu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case _.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new El(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case _.ifc.ShadowDom:return new Ya(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(bo),_.LFG(is),_.LFG(_.AFp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Uu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(yt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=yt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=yt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,i&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,jt(r)):this.eventManager.addEventListener(e,t,jt(r))}}class El extends Uu{constructor(e,t,r,i){super(e),this.component=r;const a=De(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function ah(n){return"_ngcontent-%COMP%".replace(Ka,n)}(i+"-"+r.id),this.hostAttr=function Za(n){return"_nghost-%COMP%".replace(Ka,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ya extends Uu{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=De(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Cp=(()=>{class n extends pa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Il=["alt","control","meta","shift"],ya={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ar={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ss={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let va=(()=>{class n extends pa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(Il.forEach(g=>{const v=r.indexOf(g);v>-1&&(r.splice(v,1),l+=g+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function wa(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ar.hasOwnProperty(e)&&(e=ar[e]))}return ya[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Il.forEach(a=>{a!=i&&ss[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ce))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Qa=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function ei(){Io.makeCurrent(),gi.init()},multi:!0},{provide:ce,useFactory:function Ea(){return(0,_.RDi)(document),document},deps:[]}]),bl=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function lh(){return new _.qLn},deps:[]},{provide:Cs,useClass:Cp,multi:!0,deps:[ce,_.R0b,_.Lbi]},{provide:Cs,useClass:va,multi:!0,deps:[ce]},{provide:In,useClass:In,deps:[bo,is,_.AFp]},{provide:_.FYo,useExisting:In},{provide:ki,useExisting:is},{provide:is,useClass:is,deps:[ce]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:bo,useClass:bo,deps:[Cs,_.R0b]},{provide:class En{},useClass:Ur,deps:[]}];let Co=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:Ir,useExisting:_.AFp},Fu]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:bl,imports:[Pc,_.hGG]}),n})();"undefined"!=typeof window&&window;var bn=L(8996),br=L(7669);function gt(...n){const e=(0,br.yG)(n);return(0,bn.D)(n,e)}var Ss=L(7579);class ti extends Ss.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var ur=L(8306);const{isArray:Hc}=Array,{getPrototypeOf:Wn,prototype:Qs,keys:Rl}=Object;var Li=L(4671),xt=L(4004);const{isArray:Ml}=Array;var Cn=L(5403),Xs=L(9672);function Nl(...n){const e=(0,br.yG)(n),t=(0,br.jO)(n),{args:r,keys:i}=function Js(n){if(1===n.length){const e=n[0];if(Hc(e))return{args:e,keys:null};if(function ba(n){return n&&"object"==typeof n&&Wn(n)===Qs}(e)){const t=Rl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,bn.D)([],e);const a=new ur.y(function Br(n,e,t=Li.y){return r=>{Ao(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let g=0;g<i;g++)Ao(e,()=>{const v=(0,bn.D)(n[g],e);let D=!1;v.subscribe((0,Cn.x)(r,S=>{a[g]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function Hu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):Li.y));return t?a.pipe(function $u(n){return(0,xt.U)(e=>function Gc(n,e){return Ml(e)?n(...e):n(e)}(n,e))}(t)):a}function Ao(n,e,t){n?(0,Xs.f)(t,n,e):e()}var Ca=L(576);function eo(n,e){const t=(0,Ca.m)(n)?n:()=>n,r=i=>i.error(t());return new ur.y(e?i=>e.schedule(r,0,i):r)}const xo=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var As=L(8189);function gh(...n){return function Pl(){return(0,As.J)(1)}()((0,bn.D)(n,(0,br.yG)(n)))}var to=L(8421);function Ta(n){return new ur.y(e=>{(0,to.Xf)(n()).subscribe(e)})}var Da=L(515),nu=L(727),Jn=L(4482);function xs(){return(0,Jn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Cn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Wc extends ur.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Jn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Cn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nu.w0.EMPTY)}return e}refCount(){return xs()(this)}}function Rn(n,e){return(0,Jn.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,Cn.x)(r,g=>{null==i||i.unsubscribe();let v=0;const D=a++;(0,to.Xf)(n(g,D)).subscribe(i=(0,Cn.x)(r,S=>r.next(e?e(g,S,D,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var ru=L(5698);function Fi(...n){const e=(0,br.yG)(n);return(0,Jn.e)((t,r)=>{(e?gh(n,t,e):gh(n,t)).subscribe(r)})}function Rs(n,e,t,r,i){return(a,l)=>{let h=t,g=e,v=0;a.subscribe((0,Cn.x)(l,D=>{const S=v++;g=h?n(g,D,S):(h=!0,D),r&&l.next(g)},i&&(()=>{h&&l.next(g),l.complete()})))}}function jr(n,e){return(0,Jn.e)(Rs(n,e,arguments.length>=2,!0))}function Ms(n,e){return(0,Jn.e)((t,r)=>{let i=0;t.subscribe((0,Cn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function os(n){return(0,Jn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Cn.x)(t,void 0,void 0,l=>{a=(0,to.Xf)(n(l,os(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Mn=L(5577);function Sa(n,e){return(0,Ca.m)(e)?(0,Mn.z)(n,e,1):(0,Mn.z)(n,1)}function qc(n){return n<=0?()=>Da.E:(0,Jn.e)((e,t)=>{let r=[];e.subscribe((0,Cn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Hn(n=Tp){return(0,Jn.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Tp(){return new xo}function Dp(n){return(0,Jn.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ro(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((i,a)=>n(i,a,r)):Li.y,(0,ru.q)(1),t?Dp(e):Hn(()=>new xo))}var ni=L(8505);class as{constructor(e,t){this.id=e,this.url=t}}class Mo extends as{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Aa extends as{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qn extends as{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class iu extends as{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gu extends as{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zc extends as{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wu extends as{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pr extends as{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class us extends as{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class su{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class No{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ri{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kl{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ol{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ll{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class Kc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gr(n){return new Kc(n)}const Fl="ngNavigationCancelingError";function ls(n){const e=Error("NavigationCancelingError: "+n);return e[Fl]=!0,e}function Ns(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function mi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!qu(n[i],e[i]))return!1;return!0}function qu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function no(n){return Array.prototype.concat.apply([],n)}function ou(n){return n.length>0?n[n.length-1]:null}function Xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function $r(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,bn.D)(Promise.resolve(n)):gt(n)}const ko={exact:function T(n,e,t){if(!Gt(n.segments,e.segments)||!ie(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!T(n.children[r],e.children[r],t))return!1;return!0},subset:B},zu={exact:function C(n,e){return mi(n,e)},subset:function M(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qu(n[t],e[t]))},ignored:()=>!0};function au(n,e,t){return ko[t.paths](n.root,e.root,t.matrixParams)&&zu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function B(n,e,t){return J(n,e,e.segments,t)}function J(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Gt(i,t)||e.hasChildren()||!ie(i,t,r))}if(n.segments.length===t.length){if(!Gt(n.segments,t)||!ie(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!B(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Gt(n.segments,i)&&ie(n.segments,i,r)&&n.children[Pt])&&J(n.children[Pt],e,a,r)}}function ie(n,e,t){return e.every((r,i)=>zu[t](n[i].parameters,r.parameters))}class Ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gr(this.queryParams)),this._queryParamMap}toString(){return uu.serialize(this)}}class Pe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ro(this)}}class nt{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=gr(this.parameters)),this._parameterMap}toString(){return Vl(this)}}function Gt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class er{}class zn{parse(e){const t=new o_(e);return new Ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${_i(e.root,!0)}`,r=function s_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ui(t)}=${Ui(i)}`).join("&"):`${Ui(t)}=${Ui(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Oo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const uu=new zn;function ro(n){return n.segments.map(e=>Vl(e)).join("/")}function _i(n,e){if(!n.hasChildren())return ro(n);if(e){const t=n.children[Pt]?_i(n.children[Pt],!1):"",r=[];return Xn(n.children,(i,a)=>{a!==Pt&&r.push(`${a}:${_i(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dt(n,e){let t=[];return Xn(n.children,(r,i)=>{i===Pt&&(t=t.concat(e(r,i)))}),Xn(n.children,(r,i)=>{i!==Pt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Pt?[_i(n.children[Pt],!1)]:[`${i}:${_i(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${ro(n)}/${t[0]}`:`${ro(n)}/(${t.join("//")})`}}function ii(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ui(n){return ii(n).replace(/%3B/gi,";")}function _h(n){return ii(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ku(n){return decodeURIComponent(n)}function Zu(n){return Ku(n.replace(/\+/g,"%20"))}function Vl(n){return`${_h(n.path)}${function xp(n){return Object.keys(n).map(e=>`;${_h(e)}=${_h(n[e])}`).join("")}(n.parameters)}`}const yh=/^[^\/()?;=#]+/;function Lo(n){const e=n.match(yh);return e?e[0]:""}const Bl=/^[^=?&#]+/,fw=/^[^&#]+/;class o_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new Pe(e,t)),r}parseSegment(){const e=Lo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new nt(Ku(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Lo(this.remaining);i&&(r=i,this.capture(r))}e[Ku(t)]=Ku(r)}parseQueryParam(e){const t=function Rp(n){const e=n.match(Bl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function jl(n){const e=n.match(fw);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Zu(t),a=Zu(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Pt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Pt]:new Pe([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class a_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=vh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wh(e,this._root).map(t=>t.value)}}function vh(n,e){if(n===e.value)return e;for(const t of e.children){const r=vh(n,t);if(r)return r}return null}function wh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=wh(n,t);if(r.length)return r.unshift(e),r}return[]}class Fo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Uo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Yc extends a_{constructor(e,t){super(e),this.snapshot=t,$l(this,e)}toString(){return this.snapshot.toString()}}function lu(n,e){const t=function Eh(n,e){const l=new Qu([],{},{},"",{},Pt,e,null,n.root,-1,{});return new Ih("",new Fo(l,[]))}(n,e),r=new ti([new nt("",{})]),i=new ti({}),a=new ti({}),l=new ti({}),h=new ti(""),g=new Yu(r,i,l,h,a,Pt,e,t.root);return g.snapshot=t.root,new Yc(new Fo(g,[]),t)}class Yu{constructor(e,t,r,i,a,l,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(e=>gr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(e=>gr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function u_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Qc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Qu{constructor(e,t,r,i,a,l,h,g,v,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ih extends a_{constructor(e,t){super(t),this.url=e,$l(this,t)}toString(){return bh(this._root)}}function $l(n,e){e.value._routerState=n,e.children.forEach(t=>$l(n,t))}function bh(n){const e=n.children.length>0?` { ${n.children.map(bh).join(", ")} } `:"";return`${n.value}${e}`}function Jc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),mi(e.params,t.params)||n.params.next(t.params),function Zc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),mi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ch(n,e){const t=mi(n.params,e.params)&&function bt(n,e){return Gt(n,e)&&n.every((t,r)=>mi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ch(n.parent,e.parent))}function cu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function c_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cu(n,r,i);return cu(n,r)})}(n,e,t);return new Fo(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>cu(n,h)),l}}const r=function Th(n){return new Yu(new ti(n.url),new ti(n.params),new ti(n.queryParams),new ti(n.fragment),new ti(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>cu(n,a));return new Fo(r,i)}}function Vo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hl(n){return"object"==typeof n&&null!=n&&n.outlets}function Xc(n,e,t,r,i){let a={};if(r&&Xn(r,(h,g)=>{a[g]=Array.isArray(h)?h.map(v=>`${v}`):`${h}`}),n===e)return new Ne(t,a,i);const l=d_(n,e,t);return new Ne(l,a,i)}function d_(n,e,t){const r={};return Xn(n.children,(i,a)=>{r[a]=i===e?t:d_(i,e,t)}),new Pe(n.segments,r)}class Mp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vo(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Hl);if(i&&i!==ou(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Np{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function w(n,e,t){if(n||(n=new Pe([],{})),0===n.segments.length&&n.hasChildren())return p(n,e,t);const r=function m(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Hl(h))break;const g=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!ee(g,v,l))return a;r+=2}else{if(!ee(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Pe(n.segments.slice(0,r.pathIndex),{});return a.children[Pt]=new Pe(n.segments.slice(r.pathIndex),n.children),p(a,0,i)}return r.match&&0===i.length?new Pe(n.segments,{}):r.match&&!n.hasChildren()?I(n,e,t):r.match?p(n,0,i):I(n,e,t)}function p(n,e,t){if(0===t.length)return new Pe(n.segments,{});{const r=function pw(n){return Hl(n[0])?n[0].outlets:{[Pt]:n}}(t),i={};return Xn(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=w(n.children[l],e,a))}),Xn(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Pe(n.segments,i)}}function I(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Hl(a)){const g=x(a.outlets);return new Pe(r,g)}if(0===i&&Vo(t[0])){r.push(new nt(n.segments[e].path,F(t[0]))),i++;continue}const l=Hl(a)?a.outlets[Pt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Vo(h)?(r.push(new nt(l,F(h))),i+=2):(r.push(new nt(l,{})),i++)}return new Pe(r,{})}function x(n){const e={};return Xn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=I(new Pe([],{}),0,t))}),e}function F(n){const e={};return Xn(n,(t,r)=>e[r]=`${t}`),e}function ee(n,e,t){return n==t.path&&mi(e,t.parameters)}class ot{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Jc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Uo(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Xn(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Uo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Uo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Uo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Ol(a.value.snapshot))}),e.children.length&&this.forwardEvent(new xa(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Jc(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Jc(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function vt(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=g,l.outlet&&l.outlet.activateWith(i,g),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class kt{constructor(e,t){this.routes=e,this.module=t}}function un(n){return"function"==typeof n}function Vi(n){return n instanceof Ne}const Wl=Symbol("INITIAL_VALUE");function Ma(){return Rn(n=>Nl(n.map(e=>e.pipe((0,ru.q)(1),Fi(Wl)))).pipe(jr((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==Wl?i:(a===Wl&&(r=!0),r||!1!==a&&l!==t.length-1&&!Vi(a)?i:a),e)},Wl),Ms(e=>e!==Wl),(0,xt.U)(e=>Vi(e)?e:!0===e),(0,ru.q)(1)))}class kp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xu,this.attachRef=null}}class Xu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new kp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ql=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=a||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,g=new Op(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Xu),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Op{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Yu?this.route:e===Xu?this.childContexts:this.parent.get(e,t)}}let Dh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[ql],encapsulation:2}),n})();function du(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];g_(r,m_(e,r))}}function g_(n,e){n.children&&du(n.children,e)}function m_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function __(n){const e=n.children&&n.children.map(__),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=Dh),t}function yn(n){return n.outlet||Pt}function gw(n,e){const t=n.filter(r=>yn(r)===e);return t.push(...n.filter(r=>yn(r)!==e)),t}const mw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function td(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},mw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Ns)(t,n,e);if(!a)return Object.assign({},mw);const l={};Xn(a.posParams,(g,v)=>{l[v]=g.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Sh(n,e,t,r,i="corrected"){if(t.length>0&&function fT(n,e,t){return t.some(r=>Lp(n,e,r)&&yn(r)!==Pt)}(n,t,r)){const l=new Pe(e,function hT(n,e,t,r){const i={};i[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&yn(a)!==Pt){const l=new Pe([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[yn(a)]=l}return i}(n,e,r,new Pe(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function pT(n,e,t){return t.some(r=>Lp(n,e,r))}(n,t,r)){const l=new Pe(n.segments,function dT(n,e,t,r,i,a){const l={};for(const h of r)if(Lp(n,t,h)&&!i[yn(h)]){const g=new Pe([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[yn(h)]=g}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Pe(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Lp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function gT(n,e,t,r){return!!(yn(n)===r||r!==Pt&&Lp(e,t,n))&&("**"===n.path||td(e,n,t).matched)}function mT(n,e,t){return 0===e.length&&!n.children[t]}class el{constructor(e){this.segmentGroup=e||null}}class yi{constructor(e){this.urlTree=e}}function zl(n){return eo(new el(n))}function y_(n){return eo(new yi(n))}class v_{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(_.h0i)}apply(){const e=Sh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Pe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,xt.U)(a=>this.createUrlTree(w_(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(os(a=>{if(a instanceof yi)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof el?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,xt.U)(i=>this.createUrlTree(w_(i),e.queryParams,e.fragment))).pipe(os(i=>{throw i instanceof el?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Pe([],{[Pt]:e}):e;return new Ne(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,xt.U)(a=>new Pe([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,bn.D)(i).pipe(Sa(a=>{const l=r.children[a],h=gw(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,xt.U)(g=>({segment:g,outlet:a})))}),jr((a,l)=>(a[l.outlet]=l.segment,a),{}),function mh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((i,a)=>n(i,a,r)):Li.y,qc(1),t?Dp(e):Hn(()=>new xo))}())}expandSegment(e,t,r,i,a,l){return(0,bn.D)(r).pipe(Sa(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(os(v=>{if(v instanceof el)return gt(null);throw v}))),Ro(h=>!!h),os((h,g)=>{if(h instanceof xo||"EmptyError"===h.name)return mT(t,i,a)?gt(new Pe([],{})):zl(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return gT(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):zl(t):zl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?y_(a):this.lineralizeSegments(r,a).pipe((0,Mn.z)(l=>{const h=new Pe(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:g,remainingSegments:v,positionalParamSegments:D}=td(t,i,a);if(!h)return zl(t);const S=this.applyRedirectCommands(g,i.redirectTo,D);return i.redirectTo.startsWith("/")?y_(S):this.lineralizeSegments(i,S).pipe((0,Mn.z)(N=>this.expandSegment(e,t,r,N.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,xt.U)(S=>(r._loadedConfig=S,new Pe(i,{})))):gt(new Pe(i,{}));const{matched:l,consumedSegments:h,remainingSegments:g}=td(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,Mn.z)(D=>{const S=D.module,N=D.routes,{segmentGroup:j,slicedSegments:Z}=Sh(t,h,g,N),Ee=new Pe(j.segments,j.children);if(0===Z.length&&Ee.hasChildren())return this.expandChildren(S,N,Ee).pipe((0,xt.U)(St=>new Pe(h,St)));if(0===N.length&&0===Z.length)return gt(new Pe(h,{}));const Oe=yn(r)===a;return this.expandSegment(S,Ee,N,Z,Oe?Pt:a,!0).pipe((0,xt.U)(Qe=>new Pe(h.concat(Qe.segments),Qe.children)))})):zl(t)}getChildConfig(e,t,r){return t.children?gt(new kt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Mn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,xt.U)(a=>(t._loadedConfig=a,a))):function vi(n){return eo(ls(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):gt(new kt([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?gt(i.map(l=>{const h=e.get(l);let g;if(function Ju(n){return n&&un(n.canLoad)}(h))g=h.canLoad(t,r);else{if(!un(h))throw new Error("Invalid CanLoad guard");g=h(t,r)}return $r(g)})).pipe(Ma(),(0,ni.b)(l=>{if(!Vi(l))return;const h=ls(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,xt.U)(l=>!0===l)):gt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return gt(r);if(i.numberOfChildren>1||!i.children[Pt])return eo(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ne(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Xn(t.children,(h,g)=>{l[g]=this.createSegmentGroup(e,h,r,i)}),new Pe(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function w_(n){const e={};for(const r of Object.keys(n.children)){const a=w_(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function _T(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new Pe(n.segments.concat(e.segments),e.children)}return n}(new Pe(n.segments,e))}class vw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xh{constructor(e,t){this.component=e,this.route=t}}function yT(n,e,t){const r=n._root;return Kl(r,e?e._root:null,t,[r.value])}function Fp(n,e,t){const r=function vT(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Kl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Uo(e);return n.children.forEach(l=>{(function wT(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function ET(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Gt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Gt(n.url,e.url)||!mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ch(n,e)||!mi(n.queryParams,e.queryParams);default:return!Ch(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new vw(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Kl(n,e,a.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new xh(h.outlet.component,l))}else l&&Zl(e,h,i),i.canActivateChecks.push(new vw(r)),Kl(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Xn(a,(l,h)=>Zl(l,t.getContext(h),i)),i}function Zl(n,e,t){const r=Uo(n),i=n.value;Xn(r,(a,l)=>{Zl(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new xh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ew{}function Iw(n){return new ur.y(e=>e.error(n))}class RT{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=Sh(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const r=new Qu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Fo(r,t),a=new Ih(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=u_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=gw(e,a),g=this.processSegmentGroup(h,l,a);if(null===g)return null;r.push(...g)}const i=bw(r);return function MT(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return mT(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!gT(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const j=r.length>0?ou(r).parameters:{};a=new Qu(r,j,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kT(e),yn(e),e.component,e,Yl(t),jo(t)+r.length,OT(e))}else{const j=td(t,e,r);if(!j.matched)return null;l=j.consumedSegments,h=j.remainingSegments,a=new Qu(l,j.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kT(e),yn(e),e.component,e,Yl(t),jo(t)+l.length,OT(e))}const g=function NT(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:D}=Sh(t,l,h,g.filter(j=>void 0===j.redirectTo),this.relativeLinkResolution);if(0===D.length&&v.hasChildren()){const j=this.processChildren(g,v);return null===j?null:[new Fo(a,j)]}if(0===g.length&&0===D.length)return[new Fo(a,[])];const S=yn(e)===i,N=this.processSegment(g,v,D,S?Pt:i);return null===N?null:[new Fo(a,N)]}}function PT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function bw(n){const e=[],t=new Set;for(const r of n){if(!PT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=bw(r.children);e.push(new Fo(r.value,i))}return e.filter(r=>!t.has(r))}function Yl(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jo(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function kT(n){return n.data||{}}function OT(n){return n.resolve||{}}function Vp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Bp(n){return Rn(e=>{const t=n(e);return t?(0,bn.D)(t).pipe((0,xt.U)(()=>e)):gt(e)})}class Dw extends class Tw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Mh=new _.OlP("ROUTES");class jp{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,xt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new kt(no(l.injector.get(Mh,void 0,_.XFs.Self|_.XFs.Optional)).map(__),l)}),os(a=>{throw t._loader$=void 0,a}));return t._loader$=new Wc(i,()=>new Ss.x).pipe(xs()),t._loader$}loadModuleFactory(e){return $r(e()).pipe((0,Mn.z)(t=>t instanceof _.YKP?gt(t):(0,bn.D)(this.compiler.compileModuleAsync(t))))}}class AM{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function nd(n){throw n}function I_(n,e,t){return e.parse("/")}function b_(n,e){return gt(null)}const FT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},C_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Bi=(()=>{class n{constructor(t,r,i,a,l,h,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ss.x,this.errorHandler=nd,this.malformedUriErrorHandler=I_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:b_,afterPreactivation:b_},this.urlHandlingStrategy=new AM,this.routeReuseStrategy=new Dw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(_.h0i),this.console=l.get(_.c2e);const S=l.get(_.R0b);this.isNgZoneEnabled=S instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Ul(){return new Ne(new Pe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jp(l,h,N=>this.triggerEvent(new su(N)),N=>this.triggerEvent(new No(N))),this.routerState=lu(this.currentUrlTree,this.rootComponentType),this.transitions=new ti({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ms(i=>0!==i.id),(0,xt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Rn(i=>{let a=!1,l=!1;return gt(i).pipe((0,ni.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rn(h=>{const g=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Aw(h.source)&&(this.browserUrlTree=h.extractedUrl),gt(h).pipe(Rn(S=>{const N=this.transitions.getValue();return r.next(new Mo(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Da.E:Promise.resolve(S)}),function yw(n,e,t,r){return Rn(i=>function Ah(n,e,t,r,i){return new v_(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,xt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ni.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function Cw(n,e,t,r,i){return(0,Mn.z)(a=>function xT(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new RT(n,e,t,r,i,a).recognize();return null===l?Iw(new Ew):gt(l)}catch(l){return Iw(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,xt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ni.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(j,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new Gu(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:j,source:Z,restoredState:Ee,extras:Oe}=h,Et=new Mo(N,this.serializeUrl(j),Z,Ee);r.next(Et);const Qe=lu(j,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},h),{targetSnapshot:Qe,urlAfterRedirects:j,extras:Object.assign(Object.assign({},Oe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Da.E}),Bp(h=>{const{targetSnapshot:g,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:j}}=h;return this.hooks.beforePreactivation(g,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!j})}),(0,ni.b)(h=>{const g=new zc(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,xt.U)(h=>Object.assign(Object.assign({},h),{guards:yT(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function IT(n,e){return(0,Mn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function bT(n,e,t,r){return(0,bn.D)(n).pipe((0,Mn.z)(i=>function AT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?gt(a.map(h=>{const g=Fp(h,e,i);let v;if(function p_(n){return n&&un(n.canDeactivate)}(g))v=$r(g.canDeactivate(n,e,t,r));else{if(!un(g))throw new Error("Invalid CanDeactivate guard");v=$r(g(n,e,t,r))}return v.pipe(Ro())})).pipe(Ma()):gt(!0)}(i.component,i.route,t,e,r)),Ro(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Mn.z)(h=>h&&function Bo(n){return"boolean"==typeof n}(h)?function Up(n,e,t,r){return(0,bn.D)(e).pipe(Sa(i=>gh(function TT(n,e){return null!==n&&e&&e(new ri(n)),gt(!0)}(i.route.parent,r),function CT(n,e){return null!==n&&e&&e(new kl(n)),gt(!0)}(i.route,r),function ST(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function ww(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Ta(()=>gt(l.guards.map(g=>{const v=Fp(g,l.node,t);let D;if(function Gl(n){return n&&un(n.canActivateChild)}(v))D=$r(v.canActivateChild(r,n));else{if(!un(v))throw new Error("Invalid CanActivateChild guard");D=$r(v(r,n))}return D.pipe(Ro())})).pipe(Ma())));return gt(a).pipe(Ma())}(n,i.path,t),function DT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const i=r.map(a=>Ta(()=>{const l=Fp(a,e,t);let h;if(function ed(n){return n&&un(n.canActivate)}(l))h=$r(l.canActivate(e,n));else{if(!un(l))throw new Error("Invalid CanActivate guard");h=$r(l(e,n))}return h.pipe(Ro())}));return gt(i).pipe(Ma())}(n,i.route,t))),Ro(i=>!0!==i,!0))}(r,a,n,e):gt(h)),(0,xt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,ni.b)(h=>{if(Vi(h.guardsResult)){const v=ls(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw v.url=h.guardsResult,v}const g=new Wu(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),Ms(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),Bp(h=>{if(h.guards.canActivateChecks.length)return gt(h).pipe((0,ni.b)(g=>{const v=new Pr(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),Rn(g=>{let v=!1;return gt(g).pipe(function SM(n,e){return(0,Mn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gt(t);let a=0;return(0,bn.D)(i).pipe(Sa(l=>function Na(n,e,t,r){return function E_(n,e,t,r){const i=Vp(n);if(0===i.length)return gt({});const a={};return(0,bn.D)(i).pipe((0,Mn.z)(l=>function LT(n,e,t,r){const i=Fp(n,e,r);return $r(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,ni.b)(h=>{a[l]=h}))),qc(1),(0,Mn.z)(()=>Vp(a).length===i.length?gt(a):Da.E))}(n._resolve,n,e,r).pipe((0,xt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),u_(n,t).resolve),null)))}(l.route,r,n,e)),(0,ni.b)(()=>a++),qc(1),(0,Mn.z)(l=>a===i.length?gt(t):Da.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ni.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,ni.b)(g=>{const v=new us(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),Bp(h=>{const{targetSnapshot:g,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:j}}=h;return this.hooks.afterPreactivation(g,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!j})}),(0,xt.U)(h=>{const g=function l_(n,e,t){const r=cu(n,e._root,t?t._root:void 0);return new Yc(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:g})}),(0,ni.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,xt.U)(r=>(new ot(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,ni.b)({next(){a=!0},complete(){a=!0}}),function Sp(n){return(0,Jn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),os(h=>{if(l=!0,function Ap(n){return n&&n[Fl]}(h)){const g=Vi(h.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const v=new qn(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(v),g?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Aw(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new iu(i.id,this.serializeUrl(i.extractedUrl),h);r.next(g);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return Da.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const g=Object.assign({},l);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){du(t),this.config=t.map(__),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:g}=r,v=i||this.routerState.root,D=g?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function Ra(n,e,t,r,i){if(0===t.length)return Xc(e.root,e.root,e.root,r,i);const a=function h_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Mp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Xn(a.outlets,(g,v)=>{h[v]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new Mp(t,e,r)}(t);if(a.toRoot())return Xc(e.root,e.root,new Pe([],{}),r,i);const l=function Pp(n,e,t){if(n.isAbsolute)return new Np(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Np(a,a===e.root,0)}const r=Vo(n.commands[0])?0:1;return function f_(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Np(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?p(l.segmentGroup,l.index,a.commands):w(l.segmentGroup,l.index,a.commands);return Xc(e.root,l.segmentGroup,h,r,i)}(v,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Vi(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function UT(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},FT):!1===r?Object.assign({},C_):r,Vi(t))return au(this.currentUrlTree,t,i);const a=this.parseUrl(t);return au(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Aa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,g;if(this.disposed)return Promise.resolve(!1);let v,D,S;l?(v=l.resolve,D=l.reject,S=l.promise):S=new Promise((Z,Ee)=>{v=Z,D=Ee});const N=++this.navigationId;let j;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),j=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):j=0,this.setTransition({id:N,targetPageId:j,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:v,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(Z=>Promise.reject(Z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new qn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Aw(n){return"imperative"!==n}let Ql=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new Ss.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:rd(this.skipLocationChange),replaceUrl:rd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:rd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Bi),_.Y36(Yu),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},n.\u0275dir=_.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&_.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),n})();function rd(n){return""===n||!!n}class S_{}class Rw{preload(e,t){return gt(null)}}let Mw=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new jp(i,r,g=>t.triggerEvent(new su(g)),g=>t.triggerEvent(new No(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ms(t=>t instanceof Aa),Sa(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(_.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,bn.D)(i).pipe((0,As.J)(),(0,xt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Mn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Bi),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(S_))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),$p=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Mo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Aa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ll&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ll(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Ps=new _.OlP("ROUTER_CONFIGURATION"),x_=new _.OlP("ROUTER_FORROOT_GUARD"),Nw=[Ae,{provide:er,useClass:zn},{provide:Bi,useFactory:function M_(n,e,t,r,i,a,l={},h,g){const v=new Bi(null,n,e,t,r,i,no(a));return h&&(v.urlHandlingStrategy=h),g&&(v.routeReuseStrategy=g),function Ow(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,v),l.enableTracing&&v.events.subscribe(D=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(N=console.groupEnd)||void 0===N||N.call(console)}),v},deps:[er,Xu,Ae,_.zs3,_.Sil,Mh,Ps,[class Sw{},new _.FiY],[class Rh{},new _.FiY]]},Xu,{provide:Yu,useFactory:function Hp(n){return n.routerState.root},deps:[Bi]},Mw,Rw,class A_{preload(e,t){return t().pipe(os(()=>gt(null)))}},{provide:Ps,useValue:{enableTracing:!1}}];function BT(){return new _.PXZ("Router",Bi)}let Nh=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Nw,R_(t),{provide:x_,useFactory:kw,deps:[[Bi,new _.FiY,new _.tp0]]},{provide:Ps,useValue:r||{}},{provide:me,useFactory:Pw,deps:[ue,[new _.tBr(Je),new _.FiY],Ps]},{provide:$p,useFactory:jT,deps:[Bi,kc,Ps]},{provide:S_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Rw},{provide:_.PXZ,multi:!0,useFactory:BT},[id,{provide:_.ip1,multi:!0,useFactory:Lw,deps:[id]},{provide:P_,useFactory:N_,deps:[id]},{provide:_.tb,multi:!0,useExisting:P_}]]}}static forChild(t){return{ngModule:n,providers:[R_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(x_,8),_.LFG(Bi,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function jT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new $p(n,e,t)}function Pw(n,e,t={}){return t.useHash?new Re(n,e):new $e(n,e)}function kw(n){return"guarded"}function R_(n){return[{provide:_.deG,multi:!0,useValue:n},{provide:Mh,multi:!0,useValue:n}]}let id=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ss.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(Bi),l=this.injector.get(Ps);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ps),i=this.injector.get(Mw),a=this.injector.get($p),l=this.injector.get(Bi),h=this.injector.get(_.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Lw(n){return n.appInitializer.bind(n)}function N_(n){return n.bootstrapListener.bind(n)}const P_=new _.OlP("Router Initializer");let $T=(()=>{class n{constructor(){this.title="firebase-travel"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[ql],styles:[""]}),n})();var Wp=L(4986),O_=L(6451),Fw=L(3099);function L_(n,e=Li.y){return n=null!=n?n:F_,(0,Jn.e)((t,r)=>{let i,a=!0;t.subscribe((0,Cn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function F_(n,e){return n===e}var Uw=L(5032),ln=L(5813),Cr=L(2011),U_=(L(5881),L(3942)),mr=L(4859),ve=L(5861),wi=L(9681),k=L(2090),$o=L(1877);const Bw="@firebase/database";let qp="";function $w(n){qp=n}class HT{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class GT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ot=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new HT(e)}}catch(e){}return new GT},tl=Ot("localStorage"),zp=Ot("sessionStorage"),Jl=new $o.Yd("@firebase/database"),Ph=function(){let n=1;return function(){return n++}}(),io=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},sd=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=sd.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let Xl=null,Kp=!0;const Pa=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Jl.logLevel=$o.in.VERBOSE,Xl=Jl.log.bind(Jl),e&&zp.set("logging_enabled",!0)):"function"==typeof n?Xl=n:(Xl=null,zp.remove("logging_enabled"))},Tr=function(...n){if(!0===Kp&&(Kp=!1,null===Xl&&!0===zp.get("logging_enabled")&&Pa(!0)),Xl){const e=sd.apply(null,n);Xl(e)}},od=function(n){return function(...e){Tr(n,...e)}},kh=function(...n){const e="FIREBASE INTERNAL ERROR: "+sd(...n);Jl.error(e)},hu=function(...n){const e=`FIREBASE FATAL ERROR: ${sd(...n)}`;throw Jl.error(e),new Error(e)},Ei=function(...n){const e="FIREBASE WARNING: "+sd(...n);Jl.warn(e)},ec=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ho="[MIN_NAME]",so="[MAX_NAME]",fu=function(n,e){if(n===e)return 0;if(n===Ho||e===so)return-1;if(e===Ho||n===so)return 1;{const t=ad(n),r=ad(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},NM=function(n,e){return n===e?0:n<e?-1:1},Oh=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},V_=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=V_(n[e[r]]);return t+="}",t},Hw=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Hr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const B_=function(n){(0,k.hu)(!ec(n),"Invalid JSON number");const r=1023;let i,a,l,h,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(g=0;g<64;g+=8){let N=parseInt(D.substr(g,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},Gw=new RegExp("^-?(0*)\\d{1,10}$"),j_=-2147483648,$_=2147483647,ad=function(n){if(Gw.test(n)){const e=Number(n);if(e>=j_&&e<=$_)return e}return null},Lh=function(n){try{n()}catch(e){setTimeout(()=>{throw Ei("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Yp=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class LM{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ei(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class FM{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Tr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ei(e)}}let Qp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Jp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,G_="websocket",Xp="long_polling";class W_{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function q_(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===G_)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Xp)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function nl(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Hr(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class ZT{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const Uh={},z_={};function eg(n){const e=n.toString();return Uh[e]||(Uh[e]=new ZT),Uh[e]}class QT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Lh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class nc{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=od(e),this.stats_=eg(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),q_(t,Xp,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new QT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Q_((...a)=>{const[l,h,g,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Jp.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nc.forceAllow_=!0}static forceDisallow(){nc.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!nc.forceAllow_&&(nc.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=Hw(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Q_{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Ph(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Q_.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Tr("frame writing exception"),h.stack&&Tr(h.stack),Tr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Tr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Tr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Bh=null;"undefined"!=typeof MozWebSocket?Bh=MozWebSocket:"undefined"!=typeof WebSocket&&(Bh=WebSocket);let si=(()=>{class n{constructor(t,r,i,a,l,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=od(this.connId),this.stats_=eg(r),this.connURL=n.connectionURL_(r,h,g,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const l={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&Jp.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),a&&(l.ac=a),q_(t,G_,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tl.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${qp}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new Bh(this.connURL,[],a)}else this.mySock=new Bh(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Bh&&!n.forceDisallow_}static previouslyFailed(){return tl.isInMemoryStorage||!0===tl.get("previous_websocket_failure")}markConnectionHealthy(){tl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Hw(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class J_{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nc,si]}initTransports_(e){const t=si&&si.isAvailable();let r=t&&!si.previouslyFailed();if(e.webSocketOnly&&(t||Ei("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[si];else{const i=this.transports_=[];for(const a of J_.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class uE{constructor(e,t,r,i,a,l,h,g,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=od("c:"+this.id+":"),this.transportManager_=new J_(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Oh("t",e),r=Oh("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Oh("t",e),r=Oh("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Oh("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?kh("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):kh("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ei("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Yp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lE{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class ny{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class jh extends ny{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new jh}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function dn(){return new cn("")}function Kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function rc(n){return n.pieces_.length-n.pieceNum_}function Sn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new cn(n.pieces_,e)}function ry(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function $h(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function tg(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new cn(e,0)}function Kn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new cn(t,0)}function Zt(n){return n.pieceNum_>=n.pieces_.length}function Gr(n,e){const t=Kt(n),r=Kt(e);if(null===t)return e;if(t===r)return Gr(Sn(n),Sn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function iy(n,e){const t=$h(n,0),r=$h(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=fu(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function sy(n,e){if(rc(n)!==rc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function cs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(rc(n)>rc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class oy{constructor(e,t){this.errorPrefix_=t,this.parts_=$h(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);hE(this)}}function hE(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+gu(n))}function gu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class fE extends ny{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new fE}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Hh=1e3;let hd,ic=(()=>{class n extends lE{constructor(t,r,i,a,l,h,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=od("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fE.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&jh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const g=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const v=g.d,D=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Ei(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):kh("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Hh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Hh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,v=null;const D=function(){v?v.close():(g=!0,a())};t.realtime_={close:D,sendRequest:function(j){(0,k.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(j)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,Z]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);g?Tr("getToken() completed but was canceled"):(Tr("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=Z&&Z.token,v=new uE(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Ee=>{Ei(Ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(j){t.log_("Failed to get token: "+j),g||(t.repoInfo_.nodeAdmin&&Ei(j),D())}}})()}interrupt(t){Tr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Tr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Hh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>V_(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new cn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Tr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Tr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+qp.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=jh.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Yt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Yt(e,t)}}class uy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Yt(Ho,e),i=new Yt(Ho,t);return 0!==this.compare(r,i)}minPost(){return Yt.MIN}}class ly extends uy{static get __EMPTY_NODE(){return hd}static set __EMPTY_NODE(e){hd=e}compare(e,t){return fu(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Yt.MIN}maxPost(){return new Yt(so,hd)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Yt(e,hd)}toString(){return".key"}}const oo=new ly;class rl{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let dy,Wo=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ji.EMPTY_NODE,this.right=null!=l?l:ji.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ji.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ji.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ji{constructor(e,t=ji.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ji(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Wo.BLACK,null,null))}remove(e){return new ji(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Wo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rl(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rl(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rl(this.root_,null,this.comparator_,!0,e)}}function yE(n,e){return fu(n.name,e.name)}function ng(n,e){return fu(n,e)}ji.EMPTY_NODE=new class cy{copy(e,t,r,i,a){return this}insert(e,t,r){return new Wo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vE=function(n){return"number"==typeof n?"number:"+B_(n):"string:"+n},wE=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===dy||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===dy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fy,py,EE,qo=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),wE(this.priorityNode_)}static set __childrenNodeConstructor(t){fy=t}static get __childrenNodeConstructor(){return fy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Zt(t)?this:".priority"===Kt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Kt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===rc(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Sn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+vE(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?B_(this.value_):this.value_,this.lazyHash_=io(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const On=new class iD extends uy{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?fu(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Yt.MIN}maxPost(){return new Yt(so,new qo("[PRIORITY-POST]",EE))}makePost(e,t){const r=py(e);return new Yt(t,new qo("[PRIORITY-POST]",r))}toString(){return".priority"}},sD=Math.log(2);class oD{constructor(e){this.count=parseInt(Math.log(e+1)/sD,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ds=function(n,e,t,r){n.sort(e);const i=function(g,v){const D=v-g;let S,N;if(0===D)return null;if(1===D)return S=n[g],N=t?t(S):S,new Wo(N,S.node,Wo.BLACK,null,null);{const j=parseInt(D/2,10)+g,Z=i(g,j),Ee=i(j+1,v);return S=n[j],N=t?t(S):S,new Wo(N,S.node,Wo.BLACK,Z,Ee)}},h=function(g){let v=null,D=null,S=n.length;const N=function(Z,Ee){const Oe=S-Z,Et=S;S-=Z;const Qe=i(Oe+1,Et),St=n[Oe],st=t?t(St):St;j(new Wo(st,St.node,Ee,null,Qe))},j=function(Z){v?(v.left=Z,v=Z):(D=Z,v=Z)};for(let Z=0;Z<g.count;++Z){const Ee=g.nextBitIsOne(),Oe=Math.pow(2,g.count-(Z+1));Ee?N(Oe,Wo.BLACK):(N(Oe,Wo.BLACK),N(Oe,Wo.RED))}return D}(new oD(n.length));return new ji(r||e,h)};let Wh;const sc={};class ka{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(sc&&On,"ChildrenNode.ts has not been loaded"),Wh=Wh||new ka({".priority":sc},{".priority":On}),Wh}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ji?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==oo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Yt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?ds(r,e.getCompare()):sc;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const D=Object.assign({},this.indexes_);return D[g]=h,new ka(D,v)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===sc){if(l.isDefinedOn(e.node)){const h=[],g=t.getIterator(Yt.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&h.push(v),v=g.getNext();return h.push(e),ds(h,l.getCompare())}return sc}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new Yt(e.name,h))),g.insert(e,e.node)}});return new ka(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===sc)return i;{const a=t.get(e.name);return a?i.remove(new Yt(e.name,a)):i}});return new ka(r,this.indexSet_)}}let pd,Ft=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&wE(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pd||(pd=new n(new ji(ng),null,ka.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pd}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?pd:r}}getChild(t){const r=Kt(t);return null===r?this:this.getImmediateChild(r).getChild(Sn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Yt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?pd:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Kt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Kt(t)||1===rc(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Sn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(On,(h,g)=>{r[h]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+vE(this.getPriority().val())+":"),this.forEachChild(On,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":io(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Yt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Yt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Yt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Yt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Yt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===qh?-1:0}withIndex(t){if(t===oo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===oo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(On),a=r.getIterator(On);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===oo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const qh=new class aD extends Ft{constructor(){super(new ji(ng),Ft.EMPTY_NODE,ka.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ft.EMPTY_NODE}isEmpty(){return!1}};function tr(n,e=null){if(null===n)return Ft.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new qo(n,tr(e));if(n instanceof Array){let t=Ft.EMPTY_NODE;return Hr(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=tr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(tr(e))}{const t=[];let r=!1;if(Hr(n,(l,h)=>{if("."!==l.substring(0,1)){const g=tr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Yt(l,g)))}}),0===t.length)return Ft.EMPTY_NODE;const a=ds(t,yE,l=>l.name,ng);if(r){const l=ds(t,On.getCompare());return new Ft(a,tr(e),new ka({".priority":l},{".priority":On}))}return new Ft(a,tr(e),ka.Default)}}Object.defineProperties(Yt,{MIN:{value:new Yt(Ho,Ft.EMPTY_NODE)},MAX:{value:new Yt(so,qh)}}),ly.__EMPTY_NODE=Ft.EMPTY_NODE,qo.__childrenNodeConstructor=Ft,function hy(n){dy=n}(qh),function fd(n){EE=n}(qh),function rD(n){py=n}(tr);class rg extends uy{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Zt(e)&&".priority"!==Kt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?fu(e.name,t.name):a}makePost(e,t){const r=tr(e),i=Ft.EMPTY_NODE.updateChild(this.indexPath_,r);return new Yt(t,i)}maxPost(){const e=Ft.EMPTY_NODE.updateChild(this.indexPath_,qh);return new Yt(so,e)}toString(){return $h(this.indexPath_,0).join("/")}}const ig=new class jM extends uy{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?fu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Yt.MIN}maxPost(){return Yt.MAX}makePost(e,t){const r=tr(e);return new Yt(t,r)}toString(){return".value"}},gd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",my=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=gd.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=gd.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),IE=function(n){if(n===""+$_)return"-";const e=ad(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return so;const a=gd.charAt(gd.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},_y=function(n){if(n===""+j_)return Ho;const e=ad(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+$_:(delete t[t.length-1],t.join("")):(t[t.length-1]=gd.charAt(gd.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function yy(n){return{type:"value",snapshotNode:n}}function zh(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function $i(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function sg(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class og{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange($i(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(zh(t,r)):l.trackChildChange(sg(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(On,(i,a)=>{t.hasChild(i)||r.trackChildChange($i(i,a))}),t.isLeafNode()||t.forEachChild(On,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(sg(i,a,l))}else r.trackChildChange(zh(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ft.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class md{constructor(e){this.indexedFilter_=new og(e.getIndex()),this.index_=e.getIndex(),this.startPost_=md.getStartPost_(e),this.endPost_=md.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new Yt(t,r))||(r=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ft.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ft.EMPTY_NODE);const a=this;return t.forEachChild(On,(l,h)=>{a.matches(new Yt(l,h))||(i=i.updateImmediateChild(l,Ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class bE{constructor(e){this.rangedFilter_=new md(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Yt(t,r))||(r=Ft.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ft.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Ft.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(N,j)=>S(j,N)}else g=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let v=0,D=!1;for(;g.hasNext();){const S=g.getNext();!D&&h(a,S)<=0&&(D=!0),D&&v<this.limit_&&h(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,j)=>S(j,N)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const g=new Yt(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(g);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const j=null==N?1:l(N,g);if(D&&!r.isEmpty()&&j>=0)return null!=a&&a.trackChildChange(sg(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange($i(t,S));const Ee=h.updateImmediateChild(t,Ft.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(zh(N.name,N.node)),Ee.updateImmediateChild(N.name,N.node)):Ee}}return r.isEmpty()?e:D&&l(v,g)>=0?(null!=a&&(a.trackChildChange($i(v.name,v.node)),a.trackChildChange(zh(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,Ft.EMPTY_NODE)):e}}class ag{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=On}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ho}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:so}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===On}copy(){const e=new ag;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vy(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ey(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ug(n,e){const t=n.copy();return t.index_=e,t}function DE(n){const e={};if(n.isDefault())return e;let t;return n.index_===On?t="$priority":n.index_===ig?t="$value":n.index_===oo?t="$key":((0,k.hu)(n.index_ instanceof rg,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function SE(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==On&&(e.i=n.index_.toString()),e}class lg extends lE{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=od("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=lg.getListenId_(e,r),h={};this.listens_[l]=h;const g=DE(e._queryParams);this.restRequest_(a+".json",g,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(N,null)}})}unlisten(e,t){const r=lg.getListenId_(e,t);delete this.listens_[r]}get(e){const t=DE(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,k.cI)(h.responseText)}catch(v){Ei("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&Ei("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class cg{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function _u(){return{value:null,children:new Map}}function _d(n,e,t){if(Zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Kt(e);n.children.has(r)||n.children.set(r,_u()),_d(n.children.get(r),e=Sn(e),t)}}function oc(n,e){if(Zt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(On,(r,i)=>{_d(n,new cn(r),i)}),oc(n,e)}}if(n.children.size>0){const t=Kt(e);return e=Sn(e),n.children.has(t)&&oc(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Iy(n,e,t){null!==n.value?t(e,n.value):function hD(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Iy(i,new cn(e.toString()+"/"+r),t)})}class by{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class ac{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new by(e);const r=1e4+2e4*Math.random();Yp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Hr(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Yp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Hi=(()=>{return(n=Hi||(Hi={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Hi;var n})();function il(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class yu{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Hi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Zt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new cn(e));return new yu(dn(),t,this.revert)}}return(0,k.hu)(Kt(this.path)===e,"operationForChild called for unrelated child."),new yu(Sn(this.path),this.affectedTree,this.revert)}}class Oa{constructor(e,t){this.source=e,this.path=t,this.type=Hi.LISTEN_COMPLETE}operationForChild(e){return Zt(this.path)?new Oa(this.source,dn()):new Oa(this.source,Sn(this.path))}}class ao{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Hi.OVERWRITE}operationForChild(e){return Zt(this.path)?new ao(this.source,dn(),this.snap.getImmediateChild(e)):new ao(this.source,Sn(this.path),this.snap)}}class Ko{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Hi.MERGE}operationForChild(e){if(Zt(this.path)){const t=this.children.subtree(new cn(e));return t.isEmpty()?null:t.value?new ao(this.source,dn(),t.value):new Ko(this.source,dn(),t)}return(0,k.hu)(Kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ko(this.source,Sn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ks{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Kt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class yd{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function La(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,g)=>function xE(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Yt(e.childName,e.snapshotNode),i=new Yt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),l.forEach(h=>{const g=function AE(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(g,n.query_))})})}function Yh(n,e){return{eventCache:n,serverCache:e}}function wd(n,e,t,r){return Yh(new ks(e,t,r),n.serverCache)}function Cy(n,e,t,r){return Yh(n.eventCache,new ks(e,t,r))}function Qh(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let dg;class Ln{constructor(e,t=(()=>(dg||(dg=new ji(NM)),dg))()){this.value=e,this.children=t}static fromObject(e){let t=new Ln(null);return Hr(e,(r,i)=>{t=t.set(new cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:dn(),value:this.value};if(Zt(e))return null;{const r=Kt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Sn(e),t);return null!=a?{path:Kn(new cn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Zt(e))return this;{const t=Kt(e),r=this.children.get(t);return null!==r?r.subtree(Sn(e)):new Ln(null)}}set(e,t){if(Zt(e))return new Ln(t,this.children);{const r=Kt(e),a=(this.children.get(r)||new Ln(null)).set(Sn(e),t),l=this.children.insert(r,a);return new Ln(this.value,l)}}remove(e){if(Zt(e))return this.children.isEmpty()?new Ln(null):new Ln(null,this.children);{const t=Kt(e),r=this.children.get(t);if(r){const i=r.remove(Sn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Ln(null):new Ln(this.value,a)}return this}}get(e){if(Zt(e))return this.value;{const t=Kt(e),r=this.children.get(t);return r?r.get(Sn(e)):null}}setTree(e,t){if(Zt(e))return t;{const r=Kt(e),a=(this.children.get(r)||new Ln(null)).setTree(Sn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Ln(this.value,l)}}fold(e){return this.fold_(dn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Kn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,dn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Zt(e))return null;{const a=Kt(e),l=this.children.get(a);return l?l.findOnPath_(Sn(e),Kn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,dn(),t)}foreachOnPath_(e,t,r){if(Zt(e))return this;{this.value&&r(t,this.value);const i=Kt(e),a=this.children.get(i);return a?a.foreachOnPath_(Sn(e),Kn(t,i),r):new Ln(null)}}foreach(e){this.foreach_(dn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Kn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class uo{constructor(e){this.writeTree_=e}static empty(){return new uo(new Ln(null))}}function Jh(n,e,t){if(Zt(e))return new uo(new Ln(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Gr(i,e);return a=a.updateChild(l,t),new uo(n.writeTree_.set(i,a))}{const i=new Ln(t),a=n.writeTree_.setTree(e,i);return new uo(a)}}}function hg(n,e,t){let r=n;return Hr(t,(i,a)=>{r=Jh(r,Kn(e,i),a)}),r}function Ty(n,e){if(Zt(e))return uo.empty();{const t=n.writeTree_.setTree(e,new Ln(null));return new uo(t)}}function Dy(n,e){return null!=uc(n,e)}function uc(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Gr(t.path,e)):null}function Sy(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(On,(r,i)=>{e.push(new Yt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Yt(r,i.value))}),e}function ol(n,e){if(Zt(e))return n;{const t=uc(n,e);return new uo(null!=t?new Ln(t):n.writeTree_.subtree(e))}}function fg(n){return n.writeTree_.isEmpty()}function Ed(n,e){return ME(dn(),n.writeTree_,e)}function ME(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=ME(Kn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Kn(n,".priority"),r)),t}}function Ay(n,e){return LE(e,n)}function GM(n,e){if(n.snap)return cs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&cs(Kn(n.path,t),e))return!0;return!1}function qM(n){return n.visible}function NE(n,e,t){let r=uo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)cs(t,l)?(h=Gr(t,l),r=Jh(r,h,a.snap)):cs(l,t)&&(h=Gr(l,t),r=Jh(r,dn(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(cs(t,l))h=Gr(t,l),r=hg(r,h,a.children);else if(cs(l,t))if(h=Gr(l,t),Zt(h))r=hg(r,dn(),a.children);else{const g=(0,k.DV)(a.children,Kt(h));if(g){const v=g.getChild(Sn(h));r=Jh(r,dn(),v)}}}}}return r}function My(n,e,t,r,i){if(r||i){const a=ol(n.visibleWrites,e);return!i&&fg(a)?t:i||null!=t||Dy(a,dn())?Ed(NE(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(cs(v.path,e)||cs(e,v.path))},e),t||Ft.EMPTY_NODE):null}{const a=uc(n.visibleWrites,e);if(null!=a)return a;{const l=ol(n.visibleWrites,e);return fg(l)?t:null!=t||Dy(l,dn())?Ed(l,t||Ft.EMPTY_NODE):null}}}function Xh(n,e,t,r){return My(n.writeTree,n.treePath,e,t,r)}function bd(n,e){return function zM(n,e,t){let r=Ft.EMPTY_NODE;const i=uc(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(On,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=ol(n.visibleWrites,e);return t.forEachChild(On,(l,h)=>{const g=Ed(ol(a,new cn(l)),h);r=r.updateImmediateChild(l,g)}),Sy(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return Sy(ol(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function kE(n,e,t,r){return function gD(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Kn(e,t);if(Dy(n.visibleWrites,a))return null;{const l=ol(n.visibleWrites,a);return fg(l)?i.getChild(t):Ed(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ef(n,e){return function mD(n,e){return uc(n.visibleWrites,e)}(n.writeTree,Kn(n.treePath,e))}function Ny(n,e,t){return function Id(n,e,t,r){const i=Kn(e,t),a=uc(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Ed(ol(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function OE(n,e){return LE(Kn(n.treePath,e),n.writeTree)}function LE(n,e){return{treePath:n,writeTree:e}}class vD{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,sg(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,$i(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,zh(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,sg(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const UE=new class FE{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class pg{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ks(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ny(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sl(this.viewCache_),a=function yD(n,e,t,r,i,a){return function PE(n,e,t,r,i,a,l){let h;const g=ol(n.visibleWrites,e),v=uc(g,dn());if(null!=v)h=v;else{if(null==t)return[];h=Ed(g,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),N=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let j=N.getNext();for(;j&&D.length<i;)0!==S(j,r)&&D.push(j),j=N.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function BE(n,e,t,r,i,a){const l=e.eventCache;if(null!=ef(r,t))return e;{let h,g;if(Zt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=sl(e),S=bd(r,v instanceof Ft?v:Ft.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=Xh(r,sl(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=Kt(t);if(".priority"===v){(0,k.hu)(1===rc(t),"Can't have a priority with additional path components");const D=l.getNode();g=e.serverCache.getNode();const S=kE(r,t,D,g);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Sn(t);let S;if(l.isCompleteForChild(v)){g=e.serverCache.getNode();const N=kE(r,t,l.getNode(),g);S=null!=N?l.getNode().getImmediateChild(v).updateChild(D,N):l.getNode().getImmediateChild(v)}else S=Ny(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,a):l.getNode()}}return wd(e,h,l.isFullyInitialized()||Zt(t),n.filter.filtersNodes())}}function Oy(n,e,t,r,i,a,l,h){const g=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(Zt(t))v=D.updateFullNode(g.getNode(),r,null);else if(D.filtersNodes()&&!g.isFiltered()){const j=g.getNode().updateChild(t,r);v=D.updateFullNode(g.getNode(),j,null)}else{const j=Kt(t);if(!g.isCompleteForPath(t)&&rc(t)>1)return e;const Z=Sn(t),Oe=g.getNode().getImmediateChild(j).updateChild(Z,r);v=".priority"===j?D.updatePriority(g.getNode(),Oe):D.updateChild(g.getNode(),j,Oe,Z,UE,null)}const S=Cy(e,v,g.isFullyInitialized()||Zt(t),D.filtersNodes());return BE(n,S,t,i,new pg(i,S,a),h)}function lc(n,e,t,r,i,a,l){const h=e.eventCache;let g,v;const D=new pg(i,e,a);if(Zt(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=wd(e,v,!0,n.filter.filtersNodes());else{const S=Kt(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=wd(e,v,h.isFullyInitialized(),h.isFiltered());else{const N=Sn(t),j=h.getNode().getImmediateChild(S);let Z;if(Zt(N))Z=r;else{const Ee=D.getCompleteChild(S);Z=null!=Ee?".priority"===ry(N)&&Ee.getChild(tg(N)).isEmpty()?Ee:Ee.updateChild(N,r):Ft.EMPTY_NODE}g=j.equals(Z)?e:wd(e,n.filter.updateChild(h.getNode(),S,Z,N,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function Ly(n,e){return n.eventCache.isCompleteForChild(e)}function gg(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Uy(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=Zt(t)?r:new Ln(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,N)=>{if(D.hasChild(S)){const Z=gg(0,e.serverCache.getNode().getImmediateChild(S),N);g=Oy(n,g,new cn(S),Z,i,a,l,h)}}),v.children.inorderTraversal((S,N)=>{const j=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!D.hasChild(S)&&!j){const Ee=gg(0,e.serverCache.getNode().getImmediateChild(S),N);g=Oy(n,g,new cn(S),Ee,i,a,l,h)}}),g}class ZM{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new og(r.getIndex()),a=function HM(n){return n.loadsAllData()?new og(n.getIndex()):n.hasLimit()?new bE(n):new md(n)}(r);this.processor_=function VE(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,g=i.updateFullNode(Ft.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Ft.EMPTY_NODE,h.getNode(),null),D=new ks(g,l.isFullyInitialized(),i.filtersNodes()),S=new ks(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Yh(S,D),this.eventGenerator_=new yd(this.query_)}get query(){return this.query_}}function jy(n,e){const t=sl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Zt(e)&&!t.getImmediateChild(Kt(e)).isEmpty())?t.getChild(e):null}function $y(n){return 0===n.eventRegistrations_.length}function yg(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Hy(n,e,t,r){e.type===Hi.MERGE&&null!==e.source.queryId&&((0,k.hu)(sl(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(Qh(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function KM(n,e,t,r,i){const a=new vD;let l,h;if(t.type===Hi.OVERWRITE){const v=t;v.source.fromUser?l=lc(n,e,v.path,v.snap,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!Zt(v.path),l=Oy(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===Hi.MERGE){const v=t;v.source.fromUser?l=function Fy(n,e,t,r,i,a,l){let h=e;return r.foreach((g,v)=>{const D=Kn(t,g);Ly(e,Kt(D))&&(h=lc(n,h,D,v,i,a,l))}),r.foreach((g,v)=>{const D=Kn(t,g);Ly(e,Kt(D))||(h=lc(n,h,D,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=Uy(n,e,v.path,v.children,r,i,h,a))}else if(t.type===Hi.ACK_USER_WRITE){const v=t;l=v.revert?function Vy(n,e,t,r,i,a){let l;if(null!=ef(r,t))return e;{const h=new pg(r,e,i),g=e.eventCache.getNode();let v;if(Zt(t)||".priority"===Kt(t)){let D;if(e.serverCache.isFullyInitialized())D=Xh(r,sl(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Ft,"serverChildren would be complete if leaf node"),D=bd(r,S)}D=D,v=n.filter.updateFullNode(g,D,a)}else{const D=Kt(t);let S=Ny(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=g.getImmediateChild(D)),v=null!=S?n.filter.updateChild(g,D,S,Sn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(g,D,Ft.EMPTY_NODE,Sn(t),h,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Xh(r,sl(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=ef(r,dn()),wd(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function mg(n,e,t,r,i,a,l){if(null!=ef(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(Zt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Oy(n,e,t,g.getNode().getChild(t),i,a,h,l);if(Zt(t)){let v=new Ln(null);return g.getNode().forEachChild(oo,(D,S)=>{v=v.set(new cn(D),S)}),Uy(n,e,t,v,i,a,h,l)}return e}{let v=new Ln(null);return r.foreach((D,S)=>{const N=Kn(t,D);g.isCompleteForPath(N)&&(v=v.set(D,g.getNode().getChild(N)))}),Uy(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Hi.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function _g(n,e,t,r,i){const a=e.serverCache;return BE(n,Cy(e,a.getNode(),a.isFullyInitialized()||Zt(t),a.isFiltered()),t,r,UE,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function ky(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Qh(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(yy(Qh(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function Py(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,vg(n,a.changes,a.viewCache.eventCache.getNode(),null)}function vg(n,e,t,r){return function vd(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function $M(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),La(n,i,"child_removed",e,r,t),La(n,i,"child_added",e,r,t),La(n,i,"child_moved",a,r,t),La(n,i,"child_changed",e,r,t),La(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let tf,rf;class HE{constructor(){this.views=new Map}}function Wy(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Hy(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(Hy(l,e,t,r));return a}}function qE(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=Xh(t,i?r:null),g=!1;h?g=!0:r instanceof Ft?(h=bd(t,r),g=!1):(h=Ft.EMPTY_NODE,g=!1);const v=Yh(new ks(h,g,!1),new ks(r,i,!1));return new ZM(e,v)}return l}function wg(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Fa(n,e){let t=null;for(const r of n.views.values())t=t||jy(r,e);return t}function qy(n,e){return e._queryParams.loadsAllData()?nf(n):n.views.get(e._queryIdentifier)}function zy(n,e){return null!=qy(n,e)}function vu(n){return null!=nf(n)}function nf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let ZE=1;class bD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ln(null),this.pendingWriteTree_=function _D(){return{visibleWrites:uo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ky(n,e,t,r,i){return function fD(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Jh(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Td(n,new ao({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function wu(n,e,t=!1){const r=function Ry(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function pD(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&GM(h,r.path)?i=!1:cs(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function WM(n){n.visibleWrites=NE(n.allWrites,qM,dn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Ty(n.visibleWrites,r.path):Hr(r.children,g=>{n.visibleWrites=Ty(n.visibleWrites,Kn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Ln(null);return null!=r.snap?a=a.set(dn(),!0):Hr(r.children,l=>{a=a.set(new cn(l),!0)}),Td(n,new yu(r.path,a,t))}return[]}function sf(n,e,t){return Td(n,new ao({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Zy(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||zy(a,e))){const h=function ID(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=vu(n);if("default"===i)for(const[g,v]of n.views.entries())l=l.concat(yg(v,t,r)),$y(v)&&(n.views.delete(g),v.query._queryParams.loadsAllData()||a.push(v.query));else{const g=n.views.get(i);g&&(l=l.concat(yg(g,t,r)),$y(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!vu(n)&&a.push(new(function WE(){return(0,k.hu)(tf,"Reference.ts has not been loaded"),tf}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function Gy(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=h.removed;l=h.events;const v=-1!==g.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,N)=>vu(N));if(v&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function SD(n){return n.fold((e,t,r)=>{if(t&&vu(t))return[nf(t)];{let i=[];return t&&(i=wg(t)),Hr(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let j=0;j<N.length;++j){const Z=N[j],Ee=Z.query,Oe=XE(n,Z);n.listenProvider_.startListening(lf(Ee),uf(n,Ee),Oe.hashFn,Oe.onComplete)}}}!D&&g.length>0&&!r&&(v?n.listenProvider_.stopListening(lf(e),null):g.forEach(S=>{const N=n.queryToTagMap.get(Jy(S));n.listenProvider_.stopListening(lf(S),N)})),function Ua(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Jy(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,g)}return l}function Yy(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,N)=>{const j=Gr(S,r);i=i||Fa(N,j),a=a||vu(N)});let h,l=n.syncPointTree_.get(r);l?(a=a||vu(l),i=i||Fa(l,dn())):(l=new HE,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=Ft.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,j)=>{const Z=Fa(j,dn());Z&&(i=i.updateImmediateChild(N,Z))}));const g=zy(l,e);if(!g&&!e._queryParams.loadsAllData()){const S=Jy(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=function Zo(){return ZE++}();n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let D=function ED(n,e,t,r,i,a){const l=qE(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function jE(n,e){n.eventRegistrations_.push(e)}(l,t),function $E(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(On,(a,l)=>{r.push(zh(a,l))}),t.isFullyInitialized()&&r.push(yy(t.getNode())),vg(n,r,t.getNode(),e)}(l,t)}(l,e,t,Ay(n.pendingWriteTree_,r),i,h);if(!g&&!a){const S=qy(l,e);D=D.concat(function Yo(n,e,t){const r=e._path,i=uf(n,e),a=XE(n,t),l=n.listenProvider_.startListening(lf(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!vu(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((v,D,S)=>{if(!Zt(v)&&D&&vu(D))return[nf(D).query];{let N=[];return D&&(N=N.concat(wg(D).map(j=>j.query))),Hr(S,(j,Z)=>{N=N.concat(Z)}),N}});for(let v=0;v<g.length;++v){const D=g[v];n.listenProvider_.stopListening(lf(D),uf(n,D))}}return l}(n,e,S))}return D}function af(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=Fa(h,Gr(l,e));if(v)return v});return My(i,e,a,t,!0)}function Td(n,e){return JE(e,n.syncPointTree_,null,Ay(n.pendingWriteTree_,dn()))}function JE(n,e,t,r){if(Zt(n.path))return Qy(n,e,t,r);{const i=e.get(dn());null==t&&null!=i&&(t=Fa(i,dn()));let a=[];const l=Kt(n.path),h=n.operationForChild(l),g=e.children.get(l);if(g&&h){const v=t?t.getImmediateChild(l):null,D=OE(r,l);a=a.concat(JE(h,g,v,D))}return i&&(a=a.concat(Wy(i,n,r,t))),a}}function Qy(n,e,t,r){const i=e.get(dn());null==t&&null!=i&&(t=Fa(i,dn()));let a=[];return e.children.inorderTraversal((l,h)=>{const g=t?t.getImmediateChild(l):null,v=OE(r,l),D=n.operationForChild(l);D&&(a=a.concat(Qy(D,h,g,v)))}),i&&(a=a.concat(Wy(i,n,r,t))),a}function XE(n,e){const t=e.query,r=uf(n,t);return{hashFn:()=>(function wD(n){return n.viewCache_.serverCache.getNode()}(e)||Ft.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function TD(n,e,t){const r=Eg(n,t);if(r){const i=Ig(r),a=i.path,l=i.queryId,h=Gr(a,e);return lo(n,a,new Oa(il(l),h))}return[]}(n,t._path,r):function YE(n,e){return Td(n,new Oa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function kM(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Zy(n,t,null,a)}}}}function uf(n,e){const t=Jy(e);return n.queryToTagMap.get(t)}function Jy(n){return n._path.toString()+"$"+n._queryIdentifier}function Eg(n,e){return n.tagToQueryMap.get(e)}function Ig(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new cn(n.substr(0,e))}}function lo(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),Wy(r,t,Ay(n.pendingWriteTree_,e),null)}function lf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function KE(){return(0,k.hu)(rf,"Reference.ts has not been loaded"),rf}())(n._repo,n._path):n}class bg{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new bg(t)}node(){return this.node_}}class Cg{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Kn(this.path_,e);return new Cg(this.syncTree_,t)}node(){return af(this.syncTree_,this.path_)}}const eI=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?xD(n[".sv"],e,t):"object"==typeof n[".sv"]?RD(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},xD=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},RD=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},Tg=function(n,e,t,r){return Xy(e,new Cg(t,n),r)},cc=function(n,e,t){return Xy(n,new bg(e),t)};function Xy(n,e,t){const r=n.getPriority().val(),i=eI(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=eI(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new qo(h,tr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new qo(i))),l.forEachChild(On,(h,g)=>{const v=Xy(g,e.getImmediateChild(h),t);v!==g&&(a=a.updateImmediateChild(h,v))}),a}}class Dg{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Sg(n,e){let t=e instanceof cn?e:new cn(e),r=n,i=Kt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new Dg(i,r,a),t=Sn(t),i=Kt(t)}return r}function al(n){return n.node.value}function Ag(n,e){n.node.value=e,xg(n)}function cf(n){return n.node.childCount>0}function df(n,e){Hr(n.node.children,(t,r)=>{e(new Dg(t,n,r))})}function ev(n,e,t,r){t&&!r&&e(n),df(n,i=>{ev(i,e,!0,r)}),t&&r&&e(n)}function dc(n){return new cn(null===n.parent?n.name:dc(n.parent)+"/"+n.name)}function xg(n){null!==n.parent&&function tI(n,e,t){const r=function MD(n){return void 0===al(n)&&!cf(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,xg(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,xg(n))}(n.parent,n.name,n)}const nI=/[\[\].#$\/\u0000-\u001F\u007F]/,rI=/[\[\].#$\u0000-\u001F\u007F]/,Rg=10485760,hf=function(n){return"string"==typeof n&&0!==n.length&&!nI.test(n)},nv=function(n){return"string"==typeof n&&0!==n.length&&!rI.test(n)},ff=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ec(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Va=function(n,e,t,r){r&&void 0===e||pf((0,k.gK)(n,"value"),e,t)},pf=function(n,e,t){const r=t instanceof cn?new oy(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+gu(r));if("function"==typeof e)throw new Error(n+"contains a function "+gu(r)+" with contents = "+e.toString());if(ec(e))throw new Error(n+"contains "+e.toString()+" "+gu(r));if("string"==typeof e&&e.length>Rg/3&&(0,k.ug)(e)>Rg)throw new Error(n+"contains a string greater than "+Rg+" utf8 bytes "+gu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Hr(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!hf(l)))throw new Error(n+" contains an invalid key ("+l+") "+gu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function dE(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),hE(n)})(r,l),pf(n,h,r),function nD(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+gu(r)+" in addition to actual children.")}},sI=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Hr(e,(l,h)=>{const g=new cn(l);if(pf(i,h,Kn(t,g)),".priority"===ry(g)&&!ff(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=$h(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!hf(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(iy);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&cs(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},rv=function(n,e,t){if(!t||void 0!==e){if(ec(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ff(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gf=function(n,e,t,r){if(!(r&&void 0===t||hf(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mf=function(n,e,t,r){if(!(r&&void 0===t||nv(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},co=function(n,e){if(".info"===Kt(e))throw new Error(n+" failed = Can't modify data under /.info/")},oI=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!hf(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nv(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class kD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Mg(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!sy(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function iv(n,e,t){Mg(n,t),aI(n,r=>sy(r,e))}function ho(n,e,t){Mg(n,t),aI(n,r=>cs(r,e)||cs(e,r))}function aI(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(OD(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function OD(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Xl&&Tr("event: "+t.toString()),Lh(r)}}}const uI="repo_interrupt";class cI{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new kD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_u(),this.transactionQueueTree_=new Dg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sv(n){const t=n.infoData_.getNode(new cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Dd(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:sv(n)})}function ov(n,e,t,r,i){n.dataUpdateCount++;const a=new cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,k.UI)(t,v=>tr(v));l=function DD(n,e,t,r){const i=Eg(n,r);if(i){const a=Ig(i),l=a.path,h=a.queryId,g=Gr(l,e),v=Ln.fromObject(t);return lo(n,l,new Ko(il(h),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=tr(t);l=function QE(n,e,t,r){const i=Eg(n,r);if(null!=i){const a=Ig(i),l=a.path,h=a.queryId,g=Gr(l,e);return lo(n,l,new ao(il(h),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,k.UI)(t,v=>tr(v));l=function kr(n,e,t){const r=Ln.fromObject(t);return Td(n,new Ko({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=tr(t);l=sf(n.serverSyncTree_,a,g)}let h=a;l.length>0&&(h=Iu(n,a)),ho(n.eventQueue_,h,l)}function av(n,e){Ng(n,"connected",e),!1===e&&function FD(n){Ad(n,"onDisconnectEvents");const e=Dd(n),t=_u();Iy(n.onDisconnect_,dn(),(i,a)=>{const l=Tg(i,a,n.serverSyncTree_,e);_d(t,i,l)});let r=[];Iy(t,dn(),(i,a)=>{r=r.concat(sf(n.serverSyncTree_,i,a));const l=Fg(n,i);Iu(n,l)}),n.onDisconnect_=_u(),ho(n.eventQueue_,dn(),r)}(n)}function Ng(n,e,t){const r=new cn("/.info/"+e),i=tr(t);n.infoData_.updateSnapshot(r,i);const a=sf(n.infoSyncTree_,r,i);ho(n.eventQueue_,r,a)}function _f(n){return n.nextWriteId_++}function Eu(n,e,t,r,i){Ad(n,"set",{path:e.toString(),value:t,priority:r});const a=Dd(n),l=tr(t,r),h=af(n.serverSyncTree_,e),g=cc(l,h,a),v=_f(n),D=Ky(n.serverSyncTree_,e,g,v,!0);Mg(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(N,j)=>{const Z="ok"===N;Z||Ei("set at "+e+" failed: "+N);const Ee=wu(n.serverSyncTree_,v,!Z);ho(n.eventQueue_,e,Ee),ul(0,i,N,j)});const S=Fg(n,e);Iu(n,S),ho(n.eventQueue_,S,[])}function Sd(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&oc(n.onDisconnect_,e),ul(0,t,r,i)})}function UD(n,e,t,r){const i=tr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&_d(n.onDisconnect_,e,i),ul(0,r,a,l)})}function Pg(n,e,t){let r;r=".info"===Kt(e._path)?Zy(n.infoSyncTree_,e,t):Zy(n.serverSyncTree_,e,t),iv(n.eventQueue_,e._path,r)}function VD(n){n.persistentConnection_&&n.persistentConnection_.interrupt(uI)}function Ad(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Tr(t,...e)}function ul(n,e,t,r){e&&Lh(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function xd(n,e,t){return af(n.serverSyncTree_,e,t)||Ft.EMPTY_NODE}function kg(n,e=n.transactionQueueTree_){if(e||Lg(n,e),al(e)){const t=lv(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Og(n,e,t){const r=t.map(v=>v.currentWriteId),i=xd(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Gr(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;n.server_.put(g.toString(),h,v=>{Ad(n,"transaction put response",{path:g.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,D=D.concat(wu(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();Lg(n,Sg(n.transactionQueueTree_,e)),kg(n,n.transactionQueueTree_),ho(n.eventQueue_,e,D);for(let N=0;N<S.length;N++)Lh(S[N])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Ei("transaction at "+g.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}Iu(n,e)}},l)}(n,dc(e),t)}else cf(e)&&df(e,t=>{kg(n,t)})}function Iu(n,e){const t=jD(n,e),r=dc(t);return function lr(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],v=Gr(t,g.path);let S,D=!1;if((0,k.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)D=!0,S=g.abortReason,i=i.concat(wu(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)D=!0,S="maxretry",i=i.concat(wu(n.serverSyncTree_,g.currentWriteId,!0));else{const N=xd(n,g.path,l);g.currentInputSnapshot=N;const j=e[h].update(N.val());if(void 0!==j){pf("transaction failed: Data returned ",j,g.path);let Z=tr(j);"object"==typeof j&&null!=j&&(0,k.r3)(j,".priority")||(Z=Z.updatePriority(N.getPriority()));const Oe=g.currentWriteId,Et=Dd(n),Qe=cc(Z,N,Et);g.currentOutputSnapshotRaw=Z,g.currentOutputSnapshotResolved=Qe,g.currentWriteId=_f(n),l.splice(l.indexOf(Oe),1),i=i.concat(Ky(n.serverSyncTree_,g.path,Qe,g.currentWriteId,g.applyLocally)),i=i.concat(wu(n.serverSyncTree_,Oe,!0))}else D=!0,S="nodata",i=i.concat(wu(n.serverSyncTree_,g.currentWriteId,!0))}ho(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}Lg(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Lh(r[h]);kg(n,n.transactionQueueTree_)}(n,lv(n,t),r),r}function jD(n,e){let t,r=n.transactionQueueTree_;for(t=Kt(e);null!==t&&void 0===al(r);)r=Sg(r,t),t=Kt(e=Sn(e));return r}function lv(n,e){const t=[];return gI(n,e,t),t.sort((r,i)=>r.order-i.order),t}function gI(n,e,t){const r=al(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);df(e,i=>{gI(n,i,t)})}function Lg(n,e){const t=al(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Ag(e,t.length>0?t:void 0)}df(e,r=>{Lg(n,r)})}function Fg(n,e){const t=dc(jD(n,e)),r=Sg(n.transactionQueueTree_,e);return function tv(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Ug(n,i)}),Ug(n,r),ev(r,i=>{Ug(n,i)}),t}function Ug(n,e){const t=al(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(wu(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Ag(e,void 0):t.length=a+1,ho(n.eventQueue_,dc(e),i);for(let l=0;l<r.length;l++)Lh(r[l])}}const cv=function(n,e){const t=$D(n),r=t.namespace;return"firebase.com"===t.domain&&hu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&hu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ei("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new W_(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new cn(t.pathString)}},$D=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function mI(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const N=function _I(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ei(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,g=parseInt(e.substring(v+1),10)):v=e.length;const j=e.slice(0,v);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class yI{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class Rd{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class vI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class wI{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return Sd(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){co("OnDisconnect.remove",this._path);const e=new k.BH;return UD(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){co("OnDisconnect.set",this._path),Va("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return UD(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){co("OnDisconnect.setWithPriority",this._path),Va("OnDisconnect.setWithPriority",e,this._path,!1),rv("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function uv(n,e,t,r,i){const a=tr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&_d(n.onDisconnect_,e,a),ul(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){co("OnDisconnect.update",this._path),sI("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function YM(n,e,t,r){if((0,k.xb)(t))return Tr("onDisconnect().update() called with empty data.  Don't do anything."),void ul(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Hr(t,(l,h)=>{const g=tr(h);_d(n.onDisconnect_,Kn(e,l),g)}),ul(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Zt(this._path)?null:ry(this._path)}get ref(){return new Os(this._repo,this._path)}get _queryIdentifier(){const e=SE(this._queryParams),t=V_(e);return"{}"===t?"default":t}get _queryObject(){return SE(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof fs))return!1;const t=this._repo===e._repo,r=sy(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function tD(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function hc(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function bu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===oo){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ho)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==so)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===On){if(null!=e&&!ff(e)||null!=t&&!ff(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof rg||n.getIndex()===ig,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function yf(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Os extends fs{constructor(e,t){super(e,t,new ag,!1)}get parent(){const e=tg(this._path);return null===e?null:new Os(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class fc{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new cn(e),r=pc(this.ref,e);return new fc(this._node.getChild(t),r,On)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new fc(i,pc(this.ref,r),On)))}hasChild(e){const t=new cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Md(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?pc(n._root,e):n._root}function Nd(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=cv(e,n._repo.repoInfo_.nodeAdmin);oI("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&hu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Md(n,t.path.toString())}function pc(n,e){return null===Kt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mf("child","path",t,!1)):mf("child","path",e,!1),new Os(n._repo,Kn(n._path,e));var t}function Vg(n,e){n=(0,k.m9)(n),co("set",n._path),Va("set",e,n._path,!1);const t=new k.BH;return Eu(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function bI(n,e){sI("update",e,n._path,!1);const t=new k.BH;return function LD(n,e,t,r){Ad(n,"update",{path:e.toString(),value:t});let i=!0;const a=Dd(n),l={};if(Hr(t,(h,g)=>{i=!1,l[h]=Tg(Kn(e,h),tr(g),n.serverSyncTree_,a)}),i)Tr("update() called with empty data.  Don't do anything."),ul(0,r,"ok",void 0);else{const h=_f(n),g=function CD(n,e,t,r){!function xy(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=hg(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Ln.fromObject(t);return Td(n,new Ko({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);Mg(n.eventQueue_,g),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||Ei("update at "+e+" failed: "+v);const N=wu(n.serverSyncTree_,h,!S),j=N.length>0?Iu(n,e):e;ho(n.eventQueue_,j,N),ul(0,r,v,D)}),Hr(t,v=>{const D=Fg(n,Kn(e,v));Iu(n,D)}),ho(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function WD(n){return function fI(n,e){const t=function Cd(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=Gr(v,t);r=r||Fa(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Fa(i,dn()):(i=new HE,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new ks(r,!0,!1):null;return function By(n){return Qh(n.viewCache_)}(qE(i,e,Ay(n.pendingWriteTree_,e._path),a?l.getNode():Ft.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=tr(r).withIndex(e._queryParams.getIndex()),a=sf(n.serverSyncTree_,e._path,i);return iv(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Ad(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new fc(e,new Os(n._repo,n._path),n._queryParams.getIndex()))}class Bg{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new yI("value",this,new fc(e.snapshotNode,new Os(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Rd(this,e,t):null}matches(e){return e instanceof Bg&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class dv{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Rd(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=pc(new Os(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new yI(e.type,this,new fc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof dv&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function jg(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,v=(D,S)=>{Pg(n._repo,n,h),g(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new vI(t,a||void 0),h="value"===e?new Bg(l):new dv(e,l);return function pI(n,e,t){let r;r=".info"===Kt(e._path)?Yy(n.infoSyncTree_,e,t):Yy(n.serverSyncTree_,e,t),iv(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>Pg(n._repo,n,h)}function CI(n,e,t,r){return jg(n,"value",e,t,r)}function qD(n,e,t,r){return jg(n,"child_added",e,t,r)}function hv(n,e,t,r){return jg(n,"child_changed",e,t,r)}function vf(n,e,t,r){return jg(n,"child_moved",e,t,r)}function TI(n,e,t,r){return jg(n,"child_removed",e,t,r)}function DI(n,e,t){let r=null;const i=t?new vI(t):null;"value"===e?r=new Bg(i):e&&(r=new dv(e,i)),Pg(n._repo,n,r)}class fo{}class Pd extends fo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Va("endAt",this._value,e._path,!0);const t=Ey(e._queryParams,this._value,this._key);if(yf(t),bu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fs(e._repo,e._path,t,e._orderByCalled)}}class KD extends fo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Va("endBefore",this._value,e._path,!1);const t=function dD(n,e,t){let r,i;return n.index_===oo?("string"==typeof e&&(e=_y(e)),i=Ey(n,e,t)):(r=null==t?Ho:_y(t),i=Ey(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(yf(t),bu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fs(e._repo,e._path,t,e._orderByCalled)}}class SI extends fo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Va("startAt",this._value,e._path,!0);const t=vy(e._queryParams,this._value,this._key);if(yf(t),bu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fs(e._repo,e._path,t,e._orderByCalled)}}class AI extends fo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Va("startAfter",this._value,e._path,!1);const t=function wy(n,e,t){let r;if(n.index_===oo)"string"==typeof e&&(e=IE(e)),r=vy(n,e,t);else{let i;i=null==t?so:IE(t),r=vy(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(yf(t),bu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fs(e._repo,e._path,t,e._orderByCalled)}}class JD extends fo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fs(e._repo,e._path,function CE(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class XD extends fo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fs(e._repo,e._path,function TE(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class eS extends fo{constructor(e){super(),this._path=e}_apply(e){hc(e,"orderByChild");const t=new cn(this._path);if(Zt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new rg(t),i=ug(e._queryParams,r);return bu(i),new fs(e._repo,e._path,i,!0)}}class tS extends fo{_apply(e){hc(e,"orderByKey");const t=ug(e._queryParams,oo);return bu(t),new fs(e._repo,e._path,t,!0)}}class nS extends fo{_apply(e){hc(e,"orderByPriority");const t=ug(e._queryParams,On);return bu(t),new fs(e._repo,e._path,t,!0)}}class rS extends fo{_apply(e){hc(e,"orderByValue");const t=ug(e._queryParams,ig);return bu(t),new fs(e._repo,e._path,t,!0)}}class PI extends fo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Va("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Pd(this._value,this._key)._apply(new SI(this._value,this._key)._apply(e))}}function Qo(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function GE(n){(0,k.hu)(!tf,"__referenceConstructor has already been defined"),tf=n})(Os),function zE(n){(0,k.hu)(!rf,"__referenceConstructor has already been defined"),rf=n}(Os);const wf={};function LI(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||hu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,l=cv(a,i),h=l.repoInfo;"undefined"!=typeof process&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${h.namespace}`,l=cv(a,i),h=l.repoInfo):g=!l.repoInfo.secure;const D=i&&g?new Qp(Qp.OWNER):new FM(n.name,n.options,e);oI("Invalid Firebase Database URL",l),Zt(l.path)||hu("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function aS(n,e,t,r){let i=wf[e.name];i||(i={},wf[e.name]=i);let a=i[n.toURLString()];return a&&hu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new cI(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new LM(n.name,t));return new lS(S,n)}class lS{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function dI(n,e,t){if(n.stats_=eg(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new lg(n.repoInfo_,(r,i,a,l)=>{ov(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>av(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ic(n.repoInfo_,e,(r,i,a,l)=>{ov(n,r,i,a,l)},r=>{av(n,r)},r=>{!function hI(n,e){Hr(e,(t,r)=>{Ng(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function YT(n,e){const t=n.toString();return z_[t]||(z_[t]=e()),z_[t]}(n.repoInfo_,()=>new ac(n.stats_,n.server_)),n.infoData_=new cg,n.infoSyncTree_=new bD({startListening:(r,i,a,l)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=sf(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),Ng(n,"connected",!1),n.serverSyncTree_=new bD({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,g)=>{const v=l(h,g);ho(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Os(this._repo,dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function oS(n,e){const t=wf[e];(!t||t[n.key]!==n)&&hu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),VD(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&hu("Cannot call "+e+" on a deleted database.")}}function UI(n,e){Pa(n,e)}const fS={".sv":"timestamp"};class gS{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ic.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ic.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function hS(n){$w(wi.SDK_VERSION),(0,wi._registerComponent)(new mr.wA("database",(e,{instanceIdentifier:t})=>LI(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,wi.registerVersion)(Bw,"0.12.7",n),(0,wi.registerVersion)(Bw,"0.12.7","esm2017")}();const _S=new $o.Yd("@firebase/database-compat"),HI=function(n){_S.warn("FIREBASE WARNING: "+n)};class vS{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,HI("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class wS{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Cu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),mf("DataSnapshot.child","path",e,!1),new Cu(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Cu(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new ps(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class oi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=oi.getCancelAndContextArgs_("Query.on",r,i),h=(v,D)=>{t.call(l.context,new Cu(this.database,v),D)};h.userCallback=t,h.context=l.context;const g=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return CI(this._delegate,h,g),t;case"child_added":return qD(this._delegate,h,g),t;case"child_removed":return TI(this._delegate,h,g),t;case"child_changed":return hv(this._delegate,h,g),t;case"child_moved":return vf(this._delegate,h,g),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,DI(this._delegate,e,i)}else DI(this._delegate,e)}get(){return WD(this._delegate).then(e=>new Cu(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=oi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(v,D)=>{const S=new Cu(this.database,v);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const g=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":CI(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":qD(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":TI(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":hv(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":vf(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new oi(this.database,Qo(this._delegate,function kd(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new JD(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new oi(this.database,Qo(this._delegate,function xI(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new XD(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new oi(this.database,Qo(this._delegate,function RI(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mf("orderByChild","path",n,!1),new eS(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new oi(this.database,Qo(this._delegate,function MI(){return new tS}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new oi(this.database,Qo(this._delegate,function fv(){return new nS}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new oi(this.database,Qo(this._delegate,function NI(){return new rS}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new oi(this.database,Qo(this._delegate,function YD(n=null,e){return gf("startAt","key",e,!0),new SI(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new oi(this.database,Qo(this._delegate,function QD(n,e){return gf("startAfter","key",e,!0),new AI(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new oi(this.database,Qo(this._delegate,function zD(n,e){return gf("endAt","key",e,!0),new Pd(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new oi(this.database,Qo(this._delegate,function ZD(n,e){return gf("endBefore","key",e,!0),new KD(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new oi(this.database,Qo(this._delegate,function iS(n,e){return gf("equalTo","key",e,!0),new PI(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof oi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ps(this.database,new Os(this._delegate._repo,this._delegate._path))}}class ps extends oi{constructor(e,t){super(e,new fs(t._repo,t._path,new ag,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ps(this.database,pc(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ps(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new ps(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=Vg(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,HI("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}co("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=bI(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function GD(n,e,t){if(co("setWithPriority",n._path),Va("setWithPriority",e,n._path,!1),rv("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return Eu(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function EI(n){return co("remove",n._path),Vg(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function mS(n,e,t){var r;if(n=(0,k.m9)(n),co("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,h=CI(n,()=>{});return function BD(n,e,t,r,i,a){Ad(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Ph(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=xd(n,e,void 0);l.currentInputSnapshot=h;const g=l.update(h.val());if(void 0===g)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{pf("transaction failed: Data returned ",g,l.path),l.status=0;const v=Sg(n.transactionQueueTree_,e),D=al(v)||[];let S;D.push(l),Ag(v,D),"object"==typeof g&&null!==g&&(0,k.r3)(g,".priority")?(S=(0,k.DV)(g,".priority"),(0,k.hu)(ff(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(af(n.serverSyncTree_,e)||Ft.EMPTY_NODE).getPriority().val();const N=Dd(n),j=tr(g,S),Z=cc(j,h,N);l.currentOutputSnapshotRaw=j,l.currentOutputSnapshotResolved=Z,l.currentWriteId=_f(n);const Ee=Ky(n.serverSyncTree_,e,Z,l.currentWriteId,l.applyLocally);ho(n.eventQueue_,e,Ee),kg(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,v,D)=>{let S=null;g?a.reject(g):(S=new fc(D,new Os(n._repo,n._path),On),a.resolve(new gS(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new wS(a.committed,new Cu(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function II(n,e){n=(0,k.m9)(n),co("setPriority",n._path),rv("setPriority",e,!1);const t=new k.BH;return Eu(n._repo,Kn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function HD(n,e){n=(0,k.m9)(n),co("push",n._path),Va("push",e,n._path,!0);const t=sv(n._repo),r=my(t),i=pc(n,r),a=pc(n,r);let l;return l=null!=e?Vg(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ps(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new ps(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return co("Reference.onDisconnect",this._delegate._path),new vS(new wI(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class $g{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function cS(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&hu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&hu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Qp(Qp.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new Qp(l)}!function OI(n,e,t,r){n.repoInfo_=new W_(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof ps){const t=Nd(this._delegate,e.toString());return new ps(this,t)}{const t=Md(this._delegate,e);return new ps(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=Nd(this._delegate,e);return new ps(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function dS(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),VD(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function FI(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function Ct(n){n.persistentConnection_&&n.persistentConnection_.resume(uI)}(n._repo)}(this._delegate)}}$g.ServerValue={TIMESTAMP:function VI(){return fS}(),increment:n=>function pS(n){return{".sv":{increment:n}}}(n)};var Hg=Object.freeze({__proto__:null,initStandalone:function ES({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){$w(t);const l=new mr.zt("auth-internal",new mr.H0("database-standalone"));return l.setComponent(new mr.wA("auth-internal",()=>r,"PRIVATE")),{instance:new $g(LI(n,l,void 0,e,a),n),namespace:i}}});const IS=$g.ServerValue;!function Od(n){n.INTERNAL.registerComponent(new mr.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new $g(i,r)},"PUBLIC").setServiceProps({Reference:ps,Query:oi,Database:$g,DataSnapshot:Cu,enableLogging:UI,INTERNAL:Hg,ServerValue:IS}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(U_.Z);var ll=L(5363),bS=L(6063);class XM extends Ss.x{constructor(e=1/0,t=1/0,r=bS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)h=g;h&&r.splice(0,h+1)}}}function mv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Fw.B)({connector:()=>new XM(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function GI(n,e){return(0,Ca.m)(e)?Rn(()=>n,e):Rn(()=>n)}var _v=L(9468);L(5867);const vv=new Map,Fd={activated:!1,tokenObservers:[]},oN={initialized:!1,enabled:!1};function Or(n){return vv.get(n)||Fd}function Jo(n,e){vv.set(n,e)}function wv(){return oN}class DS{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function SS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Gi=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function JI(n){if(!Or(n).activated)throw Gi.create("use-before-activation",{appName:n.name})}function Kg(n,e){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw Gi.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw Gi.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Gi.create("fetch-parse-error",{originalErrorMessage:S.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Gi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(g[1]),D=Date.now();return{token:h.attestationToken,expireTimeMillis:D+v,issuedAtTimeMillis:D}})).apply(this,arguments)}function tb(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const If="firebase-app-check-store";let Yg=null;function rb(){return Yg||(Yg=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Gi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(If,{keyPath:"compositeKey"})}}catch(t){e(Gi.create("storage-open",{originalErrorMessage:t.message}))}}),Yg)}function Cv(){return(Cv=(0,ve.Z)(function*(n,e){const r=(yield rb()).transaction(If,"readwrite"),a=r.objectStore(If).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var v;h(Gi.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Cf=new $o.Yd("@firebase/app-check");function Tf(n,e){return(0,k.hl)()?function bf(n,e){return function Xo(n,e){return Cv.apply(this,arguments)}(function ib(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Cf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Dv(){return wv().enabled}function Sv(){return Df.apply(this,arguments)}function Df(){return(Df=(0,ve.Z)(function*(){const n=wv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const LS={error:"UNKNOWN_ERROR"};function FS(n){return k.US.encodeString(JSON.stringify(n),!1)}function Av(n){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,ve.Z)(function*(n,e=!1){const t=n.app;JI(t);const r=Or(t);let a,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&em(g)&&(i=g)}if(!e&&i&&em(i))return{token:i.token};let h,l=!1;if(Dv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Kg(tb(t,yield Sv()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0);const g=yield r.exchangeTokenPromise;return yield Tf(t,g),Jo(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),l=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?Cf.warn(g.message):Cf.error(g),a=g}return i?(h={token:i.token},Jo(t,Object.assign(Object.assign({},r),{token:i})),yield Tf(t,i)):h=US(a),l&&ob(t,h),h})).apply(this,arguments)}function Jg(n,e){const t=Or(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Jo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Xg(n){const{app:e}=n,t=Or(e);let r=t.tokenRefresher;r||(r=function xv(n){const{app:e}=n;return new DS((0,ve.Z)(function*(){let r;if(r=Or(e).token?yield Av(n,!0):yield Av(n),r.error)throw r.error}),()=>!0,()=>{const t=Or(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Jo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ob(n,e){const t=Or(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function em(n){return n.expireTimeMillis-Date.now()>0}function US(n){return{token:FS(LS),error:n}}class VS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Or(this.app);for(const t of e)Jg(this.app,t.next);return Promise.resolve()}}const Mf="app-check-internal";!function Pv(){(0,wi._registerComponent)(new mr.wA("app-check",n=>function ab(n,e){return new VS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Mf).initialize()})),(0,wi._registerComponent)(new mr.wA(Mf,n=>function Rv(n){return{getToken:e=>Av(n,e),addTokenListener:e=>function Af(n,e,t,r){const{app:i}=n,a=Or(i),l={next:t,error:r,type:e};if(Jo(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&em(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),Xg(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Xg(n))}(n,"INTERNAL",e),removeTokenListener:e=>Jg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wi.registerVersion)("@firebase/app-check","0.5.5")}();class Nf{constructor(){return(0,ln.vb)("app-check")}}"undefined"!=typeof window&&window;var rm=L(127);const Ov=new _.OlP("angularfire2.auth.use-emulator"),im=new _.OlP("angularfire2.auth.settings"),sm=new _.OlP("angularfire2.auth.tenant-id"),om=new _.OlP("angularfire2.auth.langugage-code"),am=new _.OlP("angularfire2.auth.use-device-language"),Lv=new _.OlP("angularfire.auth.persistence"),Fv=(n,e,t,r,i,a,l,h)=>(0,Cr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[v,D]of Object.entries(l))g.settings[v]=D;return h&&g.setPersistence(h),g},[t,r,i,a,l,h]);let um=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S,N,j){const Z=new Ss.x,Ee=gt(void 0).pipe((0,ll.Q)(l.outsideAngular),Rn(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,xt.U)(()=>(0,Cr.on)(t,a,r)),(0,xt.U)(Oe=>Fv(Oe,a,h,v,D,S,g,N)),mv({bufferSize:1,refCount:!1}));if(da(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{Ee.pipe(Ro()).subscribe();const Et=Ee.pipe(Rn(st=>st.getRedirectResult().then(Ut=>Ut,()=>null)),ln.iC,mv({bufferSize:1,refCount:!1})),Qe=Ee.pipe(Rn(st=>new ur.y(Ut=>({unsubscribe:a.runOutsideAngular(()=>st.onAuthStateChanged(Vt=>Ut.next(Vt),Vt=>Ut.error(Vt),()=>Ut.complete()))})))),St=Ee.pipe(Rn(st=>new ur.y(Ut=>({unsubscribe:a.runOutsideAngular(()=>st.onIdTokenChanged(Vt=>Ut.next(Vt),Vt=>Ut.error(Vt),()=>Ut.complete()))}))));this.authState=Et.pipe(GI(Qe),(0,_v.R)(l.outsideAngular),(0,ll.Q)(l.insideAngular)),this.user=Et.pipe(GI(St),(0,_v.R)(l.outsideAngular),(0,ll.Q)(l.insideAngular)),this.idToken=this.user.pipe(Rn(st=>st?(0,bn.D)(st.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(Rn(st=>st?(0,bn.D)(st.getIdTokenResult()):gt(null))),this.credential=(0,O_.T)(Et,Z,this.authState.pipe(Ms(st=>!st))).pipe((0,xt.U)(st=>(null==st?void 0:st.user)?st:null),(0,_v.R)(l.outsideAngular),(0,ll.Q)(l.insideAngular))}return(0,Cr.pX)(this,Ee,a,{spy:{apply:(Oe,Et,Qe)=>{(Oe.startsWith("signIn")||Oe.startsWith("createUser"))&&Qe.then(St=>Z.next(St))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Cr.Dh),_.LFG(Cr.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ln.HU),_.LFG(Ov,8),_.LFG(im,8),_.LFG(sm,8),_.LFG(om,8),_.LFG(am,8),_.LFG(Lv,8),_.LFG(Nf,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wb=(()=>{class n{constructor(){rm.Z.registerVersion("angularfire",ln.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[um]}),n})();function JS(n){return null==n}function XS(n){return"function"==typeof n.set}function eA(n,e){return XS(e)?e:n.ref(e)}function tA(n,e){if(function mN(n){return"string"==typeof n}(n))return e.stringCase();if(XS(n))return e.firebaseCase();if(function _N(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function lm(n,e,t="on",r=Wp.z){return new ur.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,xt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,Fw.B)())}function Pf(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Eb(n,e){const{payload:t,prevKey:r,key:i}=e,a=Pf(n,i),l=function vN(n,e){if(JS(e))return 0;{const t=Pf(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const v={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function cm(n){return(JS(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Uv(n,e,t){return function yN(n,e,t){return lm(n,"value","once",t).pipe(Rn(r=>{const i=[gt(r)];return e.forEach(a=>i.push(lm(n,a,"on",t))),(0,O_.T)(...i).pipe(jr(Eb,[]))}),L_())}(n,e=cm(e),t)}function Vv(n,e,t){const r=(e=cm(e)).map(i=>lm(n,i,"on",t));return(0,O_.T)(...r)}function jv(n,e){return function(r,i){return tA(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function bb(n){return function(t){return t?tA(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function $v(n,e){return function(){return lm(n,"value","on",e)}}const Hv=new _.OlP("angularfire2.realtimeDatabaseURL"),rA=new _.OlP("angularfire2.database.use-emulator");let IN=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S,N,j,Z,Ee,Oe){this.schedulers=h;const Et=g,Qe=(0,Cr.on)(t,l,r);v&&Fv(Qe,l,D,N,j,Z,S,Ee),this.database=(0,Cr.cc)(`${Qe.name}.database.${i}`,"AngularFireDatabase",Qe.name,()=>{const St=l.runOutsideAngular(()=>Qe.database(i||void 0));return Et&&St.useEmulator(...Et),St},[Et])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>eA(this.database,t));let a=i;return r&&(a=r(i)),function EN(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:jv(r,"update"),set:jv(r,"set"),push:i=>r.push(i),remove:bb(r),snapshotChanges:i=>Uv(n,i,t).pipe(ln.iC),stateChanges:i=>Vv(n,i,t).pipe(ln.iC),auditTrail:i=>function wN(n,e,t){return function Ib(n,e,t){return function Bv(n,e){return lm(n,"value","on",e).pipe((0,xt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function xM(...n){const e=(0,br.jO)(n);return(0,Jn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,to.Xf)(n[g]).subscribe((0,Cn.x)(r,v=>{a[g]=v,!h&&!l[g]&&(l[g]=!0,(h=l.every(Li.y))&&(l=null))},Uw.Z));t.subscribe((0,Cn.x)(r,g=>{if(h){const v=[g,...a];r.next(e?e(...v):v)}}))})}(e),(0,xt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(g=>g.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function Vw(n){return(0,Jn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Cn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,xt.U)(i=>i.actions))}(n,Vv(n,e).pipe(jr((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(ln.iC),valueChanges:(i,a)=>Uv(n,i,t).pipe((0,xt.U)(h=>h.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),ln.iC)}}(a,this)}object(t){return function nA(n,e){return{query:n,snapshotChanges:()=>$v(n,e.schedulers.outsideAngular)().pipe(ln.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>$v(n,e.schedulers.outsideAngular)().pipe(ln.iC,(0,xt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>eA(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Cr.Dh),_.LFG(Cr.xv,8),_.LFG(Hv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ln.HU),_.LFG(rA,8),_.LFG(um,8),_.LFG(Ov,8),_.LFG(im,8),_.LFG(sm,8),_.LFG(om,8),_.LFG(am,8),_.LFG(Lv,8),_.LFG(Nf,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bN=(()=>{class n{constructor(){rm.Z.registerVersion("angularfire",ln.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[IN]}),n})();const Cb="firebasestorage.googleapis.com",Tb="storageBucket";class cr extends k.ZR{constructor(e,t){super(kf(e),`Firebase Storage: ${t} (${kf(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,cr.prototype)}_codeEquals(e){return kf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function kf(n){return"storage/"+n}function Gv(){return new cr("unknown","An unknown error occurred, please check the error payload for server response.")}function zv(){return new cr("canceled","User canceled the upload/download.")}function Kv(){return new cr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function dl(n){return new cr("invalid-argument",n)}function po(){return new cr("app-deleted","The Firebase app was deleted.")}function Ab(n){return new cr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dm(n,e){return new cr("invalid-format","String does not match format '"+n+"': "+e)}function Of(n){throw new cr("internal-error","Internal error: "+n)}class ai{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ai.makeFromUrl(e,t)}catch(i){return new ai(e,"")}if(""===r.path)return r;throw function uA(n){return new cr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(st){st.path_=decodeURIComponent(st.path)}const S=t.replace(/[.]/g,"\\."),St=[{regex:h,indices:{bucket:1,path:3},postModify:function a(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===Cb?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let st=0;st<St.length;st++){const Ut=St[st],Vt=Ut.regex.exec(e);if(Vt){let ci=Vt[Ut.indices.path];ci||(ci=""),r=new ai(Vt[Ut.indices.bucket],ci),Ut.postModify(r);break}}if(null==r)throw function Db(n){return new cr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class dA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Lf(n){return"string"==typeof n||n instanceof String}function Mb(n){return Zv()&&n instanceof Blob}function Zv(){return"undefined"!=typeof Blob}function hm(n,e,t,r){if(r<e)throw dl(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dl(`Invalid value for '${n}'. Expected ${t} or less.`)}function ta(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function fm(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Tu=(()=>{return(n=Tu||(Tu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Tu;var n})();class pA{constructor(e,t,r,i,a,l,h,g,v,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,j)=>{this.resolve_=N,this.reject_=j,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function fA(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==h){const g=Gv();g.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,g):g)}else l(i.canceled?this.appDelete_?po():zv():function qv(){return new cr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Ff(!1,null,!0)):this.backoffId_=function hA(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function g(){return 2===h}let v=!1;function D(...Oe){v||(v=!0,e.apply(null,Oe))}function S(Oe){i=setTimeout(()=>{i=null,n(j,g())},Oe)}function N(){a&&clearTimeout(a)}function j(Oe,...Et){if(v)return void N();if(Oe)return N(),void D.call(null,Oe,...Et);if(g()||l)return N(),void D.call(null,Oe,...Et);let St;r<64&&(r*=2),1===h?(h=2,St=0):St=1e3*(r+Math.random()),S(St)}let Z=!1;function Ee(Oe){Z||(Z=!0,N(),!v&&(null!==i?(Oe||(h=2),clearTimeout(i),S(0)):Oe||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,Ee(!0)},t),Ee}((r,i)=>{if(i)return void r(!1,new Ff(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Tu.NO_ERROR,g=a.getStatus();if(!h||this.isRetryStatusCode_(g)){const D=a.getErrorCode()===Tu.ABORT;return void r(!1,new Ff(!1,null,D))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new Ff(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function xb(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class Ff{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function _A(...n){const e=function Pb(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Zv())return new Blob(n);throw new cr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const go={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kb{constructor(e,t){this.data=e,this.contentType=t||null}}function Ob(n,e){switch(n){case go.RAW:return new kb(wA(e));case go.BASE64:case go.BASE64URL:return new kb(Lb(n,e));case go.DATA_URL:return new kb(function EA(n){const e=new Uf(n);return e.base64?Lb(go.BASE64,e.rest):function xN(n){let e;try{e=decodeURIComponent(n)}catch(t){throw dm(go.DATA_URL,"Malformed data URL.")}return wA(e)}(e.rest)}(e),function IA(n){return new Uf(n).contentType}(e))}throw Gv()}function wA(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Lb(n,e){switch(n){case go.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw dm(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case go.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw dm(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function vA(n){return atob(n)}(e)}catch(i){throw dm(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Uf{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw dm(go.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Fb(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class bi{constructor(e,t){let r=0,i="";Mb(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Mb(this.data_)){const i=function yA(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new bi(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new bi(r,!0)}}static getBlob(...e){if(Zv()){const t=e.map(r=>r instanceof bi?r.data_:r);return new bi(_A.apply(null,t))}{const t=e.map(l=>Lf(l)?Ob(go.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new bi(i,!0)}}uploadData(){return this.data_}}function pm(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function Rb(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Ub(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Jv(n,e){return e}class ui{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Jv}}let mc=null;function gm(){if(mc)return mc;const n=[];n.push(new ui("bucket")),n.push(new ui("generation")),n.push(new ui("metageneration")),n.push(new ui("name","fullPath",!0));const t=new ui("name");t.xform=function e(a,l){return function RN(n){return!Lf(n)||n.length<2?n:Ub(n)}(l)},n.push(t);const i=new ui("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new ui("timeCreated")),n.push(new ui("updated")),n.push(new ui("md5Hash",null,!0)),n.push(new ui("cacheControl",null,!0)),n.push(new ui("contentDisposition",null,!0)),n.push(new ui("contentEncoding",null,!0)),n.push(new ui("contentLanguage",null,!0)),n.push(new ui("contentType",null,!0)),n.push(new ui("metadata","customMetadata",!0)),mc=n,mc}function Xv(n,e,t){const r=pm(e);return null===r?null:function NN(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function MN(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ai(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function e0(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Vb="prefixes";class na{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ba(n){if(!n)throw Gv()}function mm(n,e){return function t(r,i){const a=Xv(n,i,e);return Ba(null!==a),a}}function Vf(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function oA(){return new cr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Wv(){return new cr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function sA(n){return new cr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function aA(n){return new cr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function $d(n){const e=Vf(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function ea(n){return new cr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function _m(n,e,t){const i=ta(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new na(i,"GET",mm(n,t),l);return h.errorHandler=$d(e),h}function CA(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=ta(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new na(h,"GET",function Hb(n,e){return function t(r,i){const a=function $b(n,e,t){const r=pm(t);return null===r?null:function jb(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Vb])for(const i of t[Vb]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new ai(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ai(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Ba(null!==a),a}}(n,e.bucket),v);return D.urlParams=a,D.errorHandler=Vf(e),D}function Wb(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function TA(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class n0{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function qb(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Ba(!1)}return Ba(!!t&&-1!==(e||["active"]).indexOf(t)),t}const VN={STATE_CHANGED:"state_changed"},gs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kb(n){switch(n){case"running":case"pausing":case"canceling":return gs.RUNNING;case"paused":return gs.PAUSED;case"success":return gs.SUCCESS;case"canceled":return gs.CANCELED;default:return gs.ERROR}}class s{constructor(e,t,r){if(function DN(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function o(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class d extends class c{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Tu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Tu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Tu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Of("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Of("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Of("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Of("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Of("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function f(){return new d}class R{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=gm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function LN(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=Wb(e,r,i),h={name:l.fullPath},g=ta(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=e0(l,t),Z=new na(g,"POST",function j(Ee){let Oe;qb(Ee);try{Oe=Ee.getResponseHeader("X-Goog-Upload-URL")}catch(Et){Ba(!1)}return Ba(Lf(Oe)),Oe},n.maxUploadRetryTime);return Z.urlParams=h,Z.headers=D,Z.body=S,Z.errorHandler=Vf(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,f,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function FN(n,e,t,r){const g=new na(t,"POST",function a(v){const D=qb(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(j){Ba(!1)}S||Ba(!1);const N=Number(S);return Ba(!isNaN(N)),new n0(N,r.size(),"final"===D)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Vf(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,f,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new n0(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function UN(n,e,t,r,i,a,l,h){const g=new n0(0,0);if(l?(g.current=l.current,g.total=l.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function lA(){return new cr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=g.total-g.current;let D=v;i>0&&(D=Math.min(D,i));const S=g.current,Z={"X-Goog-Upload-Command":D===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},Ee=r.slice(S,S+D);if(null===Ee)throw Kv();const St=new na(t,"POST",function Oe(st,Ut){const Vt=qb(st,["active","final"]),_o=g.current+D,ci=r.size();let Au;return Au="final"===Vt?mm(e,a)(st,Ut):null,new n0(_o,ci,"final"===Vt,Au)},e.maxUploadRetryTime);return St.headers=Z,St.body=Ee.uploadData(),St.progressCallback=h||null,St.errorHandler=Vf(n),St}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(l,f,i,a);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=_m(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,f,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function DA(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let St="";for(let st=0;st<2;st++)St+=Math.random().toString().slice(2);return St}();l["Content-Type"]="multipart/related; boundary="+g;const v=Wb(e,r,i),D=e0(v,t),j=bi.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+g+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===j)throw Kv();const Z={name:v.fullPath},Ee=ta(a,n.host,n._protocol),Et=n.maxUploadRetryTime,Qe=new na(Ee,"POST",mm(n,t),Et);return Qe.urlParams=Z,Qe.headers=l,Qe.body=j.uploadData(),Qe.errorHandler=Vf(e),Qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,f,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=zv(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Kb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new s(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Kb(this._state)){case gs.SUCCESS:o(this._resolve.bind(null,this.snapshot))();break;case gs.CANCELED:case gs.ERROR:o(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Kb(this._state)){case gs.RUNNING:case gs.PAUSED:e.next&&o(e.next.bind(e,this.snapshot))();break;case gs.SUCCESS:e.complete&&o(e.complete.bind(e))();break;default:e.error&&o(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class U{constructor(e,t){this._service=e,this._location=t instanceof ai?t:ai.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new U(e,t)}get root(){const e=new ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ub(this._location.path)}get storage(){return this._service}get parent(){const e=function Yv(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ai(this._location.bucket,e);return new U(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Ab(e)}}function Se(n,e,t){return _t.apply(this,arguments)}function _t(){return(_t=(0,ve.Z)(function*(n,e,t){const i=yield Qt(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Se(n,e,i.nextPageToken))})).apply(this,arguments)}function Qt(n,e){null!=e&&"number"==typeof e.maxResults&&hm("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=CA(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,f)}function _c(n){n._throwIfRoot("getDownloadURL");const e=function PN(n,e,t){const i=ta(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new na(i,"GET",function t0(n,e){return function t(r,i){const a=Xv(n,i,e);return Ba(null!==a),function bA(n,e,t,r){const i=pm(e);if(null===i||!Lf(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return ta("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+fm({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=$d(e),h}(n.storage,n._location,gm());return n.storage.makeRequestWithTokens(e,f).then(t=>{if(null===t)throw function cA(){return new cr("no-download-url","The given file does not have any download URLs.")}();return t})}function ym(n,e){const t=function Qv(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ai(n._location.bucket,t);return new U(n.storage,r)}function vm(n,e){if(n instanceof Bf){const t=n;if(null==t._bucket)throw function Sb(){return new cr("no-default-bucket","No default bucket found. Did you set the '"+Tb+"' property when initializing the app?")}();const r=new U(t,t._bucket);return null!=e?vm(r,e):r}return void 0!==e?ym(n,e):n}function a0(n,e){if(e&&function s0(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Bf)return function o0(n,e){return new U(n,e)}(n,e);throw dl("To use ref(service, url), the first argument must be a Storage instance.")}return vm(n,e)}function wm(n,e){const t=null==e?void 0:e[Tb];return null==t?null:ai.makeFromBucketSpec(t,n)}class Bf{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Cb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ai.makeFromBucketSpec(i,this._host):wm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ai.makeFromBucketSpec(this._url,e):wm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ve.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ve.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new U(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new dA(po());{const a=function AN(n,e,t,r,i,a){const l=fm(n.urlParams),h=n.url+l,g=Object.assign({},n.headers);return function mA(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function Nb(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function gA(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(g,a),function SN(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new pA(h,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ve.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const BN="@firebase/storage";function HN(n,e){return a0(n=(0,k.m9)(n),e)}function FL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Bf(t,r,i,e,wi.SDK_VERSION)}!function UL(){(0,wi._registerComponent)(new mr.wA("storage",FL,"PUBLIC").setMultipleInstances(!0)),(0,wi.registerVersion)(BN,"0.9.4",""),(0,wi.registerVersion)(BN,"0.9.4","esm2017")}();class Zb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class GN{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Zb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Zb(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new Zb(l,this,this._ref)):{next:t.next?l=>t.next(new Zb(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class WN{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new yc(e,this._service))}get items(){return this._delegate.items.map(e=>new yc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class yc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function OL(n,e){return ym(n,e)}(this._delegate,e);return new yc(t,this.storage)}get root(){return new yc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new yc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new GN(function AL(n,e,t){return function Be(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new R(n,new bi(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=go.RAW,r){this._throwIfRoot("putString");const i=Ob(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new GN(new R(this._delegate,new bi(i.data,!0),a),this)}listAll(){return function NL(n){return function it(n){const e={prefixes:[],items:[]};return Se(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new WN(e,this.storage))}list(e){return function ML(n,e){return Qt(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new WN(t,this.storage))}getMetadata(){return function xL(n){return function wn(n){n._throwIfRoot("getMetadata");const e=_m(n.storage,n._location,gm());return n.storage.makeRequestWithTokens(e,f)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function RL(n,e){return function Ls(n,e){n._throwIfRoot("updateMetadata");const t=function kN(n,e,t,r){const a=ta(e.fullServerUrl(),n.host,n._protocol),h=e0(t,r),v=n.maxOperationRetryTime,D=new na(a,"PATCH",mm(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=$d(e),D}(n.storage,n._location,e,gm());return n.storage.makeRequestWithTokens(t,f)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function PL(n){return _c(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function kL(n){return function r0(n){n._throwIfRoot("deleteObject");const e=function ON(n,e){const r=ta(e.fullServerUrl(),n.host,n._protocol),h=new na(r,"DELETE",function l(g,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=$d(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,f)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Ab(e)}}class qN{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(zN(e))throw dl("ref() expected a child path but got a URL, use refFromURL instead.");return new yc(HN(this._delegate,e),this)}refFromURL(e){if(!zN(e))throw dl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ai.makeFromUrl(e,this._delegate.host)}catch(t){throw dl("refFromUrl() expected a valid full URL but got an invalid one.")}return new yc(HN(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function LL(n,e,t,r={}){!function u0(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function zN(n){return/^[A-Za-z]+:\/\//.test(n)}function $L(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new qN(t,r)}function KN(n){const e=function GL(n){return new ur.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function CN(n,e=Wp.z){return(0,Jn.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function g(){const v=l+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);h()}t.subscribe((0,Cn.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,xt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Yb(n){return{getDownloadURL:()=>gt(void 0).pipe(ln.fc,Rn(()=>n.getDownloadURL()),ln.iC),getMetadata:()=>gt(void 0).pipe(ln.fc,Rn(()=>n.getMetadata()),ln.iC),delete:()=>(0,bn.D)(n.delete()),child:e=>Yb(n.child(e)),updateMetadata:e=>(0,bn.D)(n.updateMetadata(e)),put:(e,t)=>KN(n.put(e,t)),putString:(e,t,r)=>KN(n.putString(e,t,r)),list:e=>(0,bn.D)(n.list(e)),listAll:()=>(0,bn.D)(n.listAll())}}!function HL(n){const e={TaskState:gs,TaskEvent:VN,StringFormat:go,Storage:qN,Reference:yc};n.INTERNAL.registerComponent(new mr.wA("storage-compat",$L,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(U_.Z);const WL=new _.OlP("angularfire2.storageBucket"),qL=new _.OlP("angularfire2.storage.maxUploadRetryTime"),zL=new _.OlP("angularfire2.storage.maxOperationRetryTime"),KL=new _.OlP("angularfire2.storage.use-emulator");let ZL=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S){const N=(0,Cr.on)(t,l,r);this.storage=(0,Cr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const j=l.runOutsideAngular(()=>N.storage(i||void 0)),Z=D;return Z&&j.useEmulator(...Z),g&&j.setMaxUploadRetryTime(g),v&&j.setMaxOperationRetryTime(v),j},[g,v])}ref(t){return Yb(this.storage.ref(t))}refFromURL(t){return Yb(this.storage.refFromURL(t))}upload(t,r,i){return Yb(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Cr.Dh),_.LFG(Cr.xv,8),_.LFG(WL,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ln.HU),_.LFG(qL,8),_.LFG(zL,8),_.LFG(KL,8),_.LFG(Nf,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})(),QL=(()=>{class n{constructor(){rm.Z.registerVersion("angularfire",ln.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[ZL],imports:[YL]}),n})();function SA(){return(0,Jn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Cn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var at,JL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vc={},AA=AA||{},$t=JL||self;function Qb(){}function xA(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function l0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var RA="closure_uid_"+(1e9*Math.random()>>>0),eF=0;function tF(n,e,t){return n.call.apply(n.bind,arguments)}function nF(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function qi(n,e,t){return(qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tF:nF).apply(null,arguments)}function Jb(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function zi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Hd(){this.s=this.s,this.o=this.o}var iF={};Hd.prototype.s=!1,Hd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function XL(n){return Object.prototype.hasOwnProperty.call(n,RA)&&n[RA]||(n[RA]=++eF)}(this);delete iF[n]}},Hd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},YN=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function QN(n){return Array.prototype.concat.apply([],arguments)}function MA(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Xb(n){return/^[\s\xa0]*$/.test(n)}var Us,JN=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fs(n,e){return-1!=n.indexOf(e)}function NA(n,e){return n<e?-1:n>e?1:0}e:{var XN=$t.navigator;if(XN){var eP=XN.userAgent;if(eP){Us=eP;break e}}Us=""}function PA(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function tP(n){const e={};for(const t in n)e[t]=n[t];return e}var nP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rP(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<nP.length;a++)t=nP[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function kA(n){return kA[" "](n),n}kA[" "]=Qb;var eC,n,aF=Fs(Us,"Opera"),Em=Fs(Us,"Trident")||Fs(Us,"MSIE"),iP=Fs(Us,"Edge"),OA=iP||Em,sP=Fs(Us,"Gecko")&&!(Fs(Us.toLowerCase(),"webkit")&&!Fs(Us,"Edge"))&&!(Fs(Us,"Trident")||Fs(Us,"MSIE"))&&!Fs(Us,"Edge"),uF=Fs(Us.toLowerCase(),"webkit")&&!Fs(Us,"Edge");function oP(){var n=$t.document;return n?n.documentMode:void 0}e:{var LA="",FA=(n=Us,sP?/rv:([^\);]+)(\)|;)/.exec(n):iP?/Edge\/([\d\.]+)/.exec(n):Em?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uF?/WebKit\/(\S+)/.exec(n):aF?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(FA&&(LA=FA?FA[1]:""),Em){var UA=oP();if(null!=UA&&UA>parseFloat(LA)){eC=String(UA);break e}}eC=LA}var lF={};var dF=$t.document&&Em&&(oP()||parseInt(eC,10))||void 0,hF=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",Qb,e),$t.removeEventListener("test",Qb,e)}catch(t){}return n}();function ms(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function c0(n,e){if(ms.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(sP){e:{try{kA(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fF[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&c0.Z.h.call(this)}}ms.prototype.h=function(){this.defaultPrevented=!0},zi(c0,ms);var fF={2:"touch",3:"pen",4:"mouse"};c0.prototype.h=function(){c0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var d0="closure_listenable_"+(1e6*Math.random()|0),pF=0;function gF(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++pF,this.ca=this.fa=!1}function tC(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function nC(n){this.src=n,this.g={},this.h=0}function BA(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ZN(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(tC(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function jA(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}nC.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=jA(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new gF(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var $A="closure_lm_"+(1e6*Math.random()|0),HA={};function uP(n,e,t,r,i){if(r&&r.once)return cP(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)uP(n,e[a],t,r,i);return null}return t=zA(t),n&&n[d0]?n.N(e,t,l0(r)?!!r.capture:!!r,i):lP(n,e,t,!1,r,i)}function lP(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=l0(i)?!!i.capture:!!i,h=WA(n);if(h||(n[$A]=h=new nC(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function mF(){var e=_F;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hF||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(hP(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function cP(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)cP(n,e[a],t,r,i);return null}return t=zA(t),n&&n[d0]?n.O(e,t,l0(r)?!!r.capture:!!r,i):lP(n,e,t,!0,r,i)}function dP(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)dP(n,e[a],t,r,i);else r=l0(r)?!!r.capture:!!r,t=zA(t),n&&n[d0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=jA(a=n.g[e],t,r,i))&&(tC(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=WA(n))&&(e=n.g[e.toString()],n=-1,e&&(n=jA(e,t,r,i)),(t=-1<n?e[n]:null)&&GA(t))}function GA(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[d0])BA(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hP(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=WA(e))?(BA(t,n),0==t.h&&(t.src=null,e[$A]=null)):tC(n)}}}function hP(n){return n in HA?HA[n]:HA[n]="on"+n}function _F(n,e){if(n.ca)n=!0;else{e=new c0(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&GA(n),n=t.call(r,e)}return n}function WA(n){return(n=n[$A])instanceof nC?n:null}var qA="__closure_events_fn_"+(1e9*Math.random()>>>0);function zA(n){return"function"==typeof n?n:(n[qA]||(n[qA]=function(e){return n.handleEvent(e)}),n[qA])}function Ci(){Hd.call(this),this.i=new nC(this),this.P=this,this.I=null}function Ki(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ms(e,n);else if(e instanceof ms)e.target=e.target||n;else{var i=e;rP(e=new ms(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=rC(l,r,!0,e)&&i}if(i=rC(l=e.g=n,r,!0,e)&&i,i=rC(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=rC(l=e.g=t[a],r,!1,e)&&i}function rC(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,g=l.ia||l.src;l.fa&&BA(n.i,l),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}zi(Ci,Hd),Ci.prototype[d0]=!0,Ci.prototype.removeEventListener=function(n,e,t,r){dP(this,n,e,t,r)},Ci.prototype.M=function(){if(Ci.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)tC(t[r]);delete n.g[e],n.h--}}this.I=null},Ci.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ci.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var KA=$t.JSON.stringify;function yF(){var n=pP;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var YA,fP=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new wF,n=>n.reset());class wF{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function EF(n){$t.setTimeout(()=>{throw n},0)}function ZA(n,e){YA||function IF(){var n=$t.Promise.resolve(void 0);YA=function(){n.then(bF)}}(),QA||(YA(),QA=!0),pP.add(n,e)}var QA=!1,pP=new class vF{constructor(){this.h=this.g=null}add(e,t){const r=fP.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function bF(){for(var n;n=yF();){try{n.h.call(n.g)}catch(t){EF(t)}var e=fP;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}QA=!1}function iC(n,e){Ci.call(this),this.h=n||1,this.g=e||$t,this.j=qi(this.kb,this),this.l=Date.now()}function JA(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function XA(n,e,t){if("function"==typeof n)t&&(n=qi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=qi(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function gP(n){n.g=XA(()=>{n.g=null,n.i&&(n.i=!1,gP(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}zi(iC,Ci),(at=iC.prototype).da=!1,at.S=null,at.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ki(this,"tick"),this.da&&(JA(this),this.start()))}},at.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){iC.Z.M.call(this),JA(this),delete this.g};class CF extends Hd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gP(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function h0(n){Hd.call(this),this.h=n,this.g={}}zi(h0,Hd);var mP=[];function _P(n,e,t,r){Array.isArray(t)||(t&&(mP[0]=t.toString()),t=mP);for(var i=0;i<t.length;i++){var a=uP(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function yP(n){PA(n.g,function(e,t){this.g.hasOwnProperty(t)&&GA(e)},n),n.g={}}function sC(){this.g=!0}function Im(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function AF(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return KA(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}h0.prototype.M=function(){h0.Z.M.call(this),yP(this)},h0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sC.prototype.Aa=function(){this.g=!1},sC.prototype.info=function(){};var jf={},vP=null;function oC(){return vP=vP||new Ci}function wP(n){ms.call(this,jf.Ma,n)}function f0(n){const e=oC();Ki(e,new wP(e,n))}function EP(n,e){ms.call(this,jf.STAT_EVENT,n),this.stat=e}function Vs(n){const e=oC();Ki(e,new EP(e,n))}function IP(n,e){ms.call(this,jf.Na,n),this.size=e}function p0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}jf.Ma="serverreachability",zi(wP,ms),jf.STAT_EVENT="statevent",zi(EP,ms),jf.Na="timingevent",zi(IP,ms);var aC={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},bP={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ex(){}function TP(){}ex.prototype.h=null;var rx,g0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function tx(){ms.call(this,"d")}function nx(){ms.call(this,"c")}function uC(){}function m0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new h0(this),this.P=xF,this.W=new iC(n=OA?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new DP}function DP(){this.i=null,this.g="",this.h=!1}zi(tx,ms),zi(nx,ms),zi(uC,ex),uC.prototype.g=function(){return new XMLHttpRequest},uC.prototype.i=function(){return{}},rx=new uC;var xF=45e3,ix={},lC={};function sx(n,e,t){n.K=1,n.v=pC(wc(e)),n.s=t,n.U=!0,SP(n,null)}function SP(n,e){n.F=Date.now(),_0(n),n.A=wc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),LP(t.h,"t",r),n.C=0,t=n.l.H,n.h=new DP,n.g=sk(n.l,t?e:null,!n.s),0<n.O&&(n.L=new CF(qi(n.Ia,n,n.g),n.O)),_P(n.V,n.g,"readystatechange",n.gb),e=n.H?tP(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),f0(1),function TF(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),g=0;g<h.length;g++){var v=h[g].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function AP(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function xP(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=RF(n,t),i==lC){4==e&&(n.o=4,Vs(14),r=!1),Im(n.j,n.m,null,"[Incomplete Response]");break}if(i==ix){n.o=4,Vs(15),Im(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Im(n.j,n.m,i,null),ox(n,i)}AP(n)&&i!=lC&&i!=ix&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),_x(e),e.L=!0,Vs(11))):(Im(n.j,n.m,t,"[Invalid Chunked Response]"),$f(n),y0(n))}function RF(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?lC:(t=Number(e.substring(t,r)),isNaN(t)?ix:(r+=1)+t>e.length?lC:(e=e.substr(r,t),n.C=r+t,e))}function _0(n){n.Y=Date.now()+n.P,RP(n,n.P)}function RP(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=p0(qi(n.eb,n),e)}function cC(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function y0(n){0==n.l.G||n.I||tk(n.l,n)}function $f(n){cC(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,JA(n.W),yP(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ox(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||lx(t.i,n)))if(t.I=n.N,!n.J&&lx(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=p0(qi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;wC(t),yC(t)}mx(t),Vs(18)}if(1>=VP(t.i)&&t.ka){try{t.ka()}catch(v){}t.ka=void 0}}else Wf(t,11)}else if((n.J||t.g==n)&&wC(t),!Xb(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const D=v[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=v[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const Z=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;!a.g&&(Fs(Z,"spdy")||Fs(Z,"quic")||Fs(Z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(cx(a,a.h),a.h=null))}if(r.D){const Ee=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;Ee&&(r.sa=Ee,dr(r.F,r.D,Ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=ik(r,r.H?r.la:null,r.W),l.J){BP(r.i,l);var h=l,g=r.K;g&&h.setTimeout(g),h.B&&(cC(h),_0(h)),r.g=l}else XP(r);0<t.l.length&&vC(t)}else"stop"!=v[0]&&"close"!=v[0]||Wf(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Wf(t,7):px(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}f0(4)}catch(v){}}function ax(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(xA(n)||"string"==typeof n)YN(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(xA(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function MF(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(xA(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function bm(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof bm)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ux(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Hf(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Hf(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Hf(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(at=m0.prototype).setTimeout=function(n){this.P=n},at.gb=function(n){n=n.target;const e=this.L;e&&3==Ec(n)?e.l():this.Ia(n)},at.Ia=function(n){try{if(n==this.g)e:{const D=Ec(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||OA||this.g&&(this.h.h||this.g.ga()||KP(this.g)))){this.I||4!=D||7==e||f0(8==e||0>=S?3:2),cC(this);var t=this.g.ba();this.N=t;t:if(AP(this)){var r=KP(this.g);n="";var i=r.length,a=4==Ec(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$f(this),y0(this);var l="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function DF(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xb(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Vs(12),$f(this),y0(this);break e}Im(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ox(this,t)}this.U?(xP(this,D,l),OA&&this.i&&3==D&&(_P(this.V,this.W,"tick",this.fb),this.W.start())):(Im(this.j,this.m,l,null),ox(this,l)),4==D&&$f(this),this.i&&!this.I&&(4==D?tk(this.l,this):(this.i=!1,_0(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Vs(12)):(this.o=0,Vs(13)),$f(this),y0(this)}}}catch(D){}},at.fb=function(){if(this.g){var n=Ec(this.g),e=this.g.ga();this.C<e.length&&(cC(this),xP(this,n,e),this.i&&4!=n&&_0(this))}},at.cancel=function(){this.I=!0,$f(this)},at.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function SF(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(f0(3),Vs(17)),$f(this),this.o=2,y0(this)):RP(this,this.Y-n)},(at=bm.prototype).R=function(){ux(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},at.T=function(){return ux(this),this.g.concat()},at.get=function(n,e){return Hf(this.h,n)?this.h[n]:e},at.set=function(n,e){Hf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},at.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var MP=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gf(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Gf){this.g=void 0!==e?e:n.g,dC(this,n.j),this.s=n.s,hC(this,n.i),fC(this,n.m),this.l=n.l,e=n.h;var t=new E0;t.i=e.i,e.g&&(t.g=new bm(e.g),t.h=e.h),NP(this,t),this.o=n.o}else n&&(t=String(n).match(MP))?(this.g=!!e,dC(this,t[1]||"",!0),this.s=v0(t[2]||""),hC(this,t[3]||"",!0),fC(this,t[4]),this.l=v0(t[5]||"",!0),NP(this,t[6]||"",!0),this.o=v0(t[7]||"")):(this.g=!!e,this.h=new E0(null,this.g))}function wc(n){return new Gf(n)}function dC(n,e,t){n.j=t?v0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function hC(n,e,t){n.i=t?v0(e,!0):e}function fC(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function NP(n,e,t){e instanceof E0?(n.h=e,function BF(n,e){e&&!n.j&&(Gd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(kP(this,r),LP(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=w0(e,UF)),n.h=new E0(e,n.g))}function dr(n,e,t){n.h.set(e,t)}function pC(n){return dr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function v0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function w0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,OF),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function OF(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(w0(e,PP,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(w0(e,PP,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(w0(t,"/"==t.charAt(0)?FF:LF,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",w0(t,VF)),n.join("")};var PP=/[#\/\?@]/g,LF=/[#\?:]/g,FF=/[#\?]/g,UF=/[#\?@]/g,VF=/#/g;function E0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Gd(n){n.g||(n.g=new bm,n.h=0,n.i&&function NF(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kP(n,e){Gd(n),e=Cm(n,e),Hf(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Hf((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ux(n)))}function OP(n,e){return Gd(n),e=Cm(n,e),Hf(n.g.h,e)}function LP(n,e,t){kP(n,e),0<t.length&&(n.i=null,n.g.set(Cm(n,e),MA(t)),n.h+=t.length)}function Cm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function FP(n){this.l=n||$F,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ea&&$t.g.Ea()&&$t.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=E0.prototype).add=function(n,e){Gd(this),this.i=null,n=Cm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Gd(this),this.g.forEach(function(t,r){YN(t,function(i){n.call(e,i,r,this)},this)},this)},at.T=function(){Gd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},at.R=function(n){Gd(this);var e=[];if("string"==typeof n)OP(this,n)&&(e=QN(e,this.g.get(Cm(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=QN(e,n[t])}return e},at.set=function(n,e){return Gd(this),this.i=null,OP(this,n=Cm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var $F=10;function UP(n){return!!n.h||!!n.g&&n.g.size>=n.j}function VP(n){return n.h?1:n.g?n.g.size:0}function lx(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function cx(n,e){n.g?n.g.add(e):n.h=e}function BP(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function jP(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return MA(n.i)}function dx(){}function HF(){this.g=new dx}function GF(n,e,t){const r=t||"";try{ax(n,function(i,a){let l=i;l0(i)&&(l=KA(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function gC(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function I0(n){this.l=n.$b||null,this.j=n.ib||!1}function mC(n,e){Ci.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=hx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}FP.prototype.cancel=function(){if(this.i=jP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},dx.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},dx.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},zi(I0,ex),I0.prototype.g=function(){return new mC(this.l,this.j)},I0.prototype.i=function(n){return function(){return n}}({}),zi(mC,Ci);var hx=0;function $P(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function b0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,C0(n)}function C0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=mC.prototype).open=function(n,e){if(this.readyState!=hx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,C0(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,b0(this)),this.readyState=hx},at.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,C0(this)),this.g&&(this.readyState=3,C0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==$t.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$P(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},at.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?b0(this):C0(this),3==this.readyState&&$P(this)}},at.Ua=function(n){this.g&&(this.response=this.responseText=n,b0(this))},at.Ta=function(n){this.g&&(this.response=n,b0(this))},at.ha=function(){this.g&&b0(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(mC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var qF=$t.JSON.parse;function Wr(n){Ci.call(this),this.headers=new bm,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=HP,this.K=this.L=!1}zi(Wr,Ci);var HP="",zF=/^https?$/i,KF=["POST","PUT"];function YF(n){return"content-type"==n.toLowerCase()}function GP(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,WP(n),_C(n)}function WP(n){n.D||(n.D=!0,Ki(n,"complete"),Ki(n,"error"))}function qP(n){if(n.h&&void 0!==AA&&(!n.C[1]||4!=Ec(n)||2!=n.ba()))if(n.v&&4==Ec(n))XA(n.Fa,0,n);else if(Ki(n,"readystatechange"),4==Ec(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(MP)[1]||null;if(!i&&$t.self&&$t.self.location){var a=$t.self.location.protocol;i=a.substr(0,a.length-1)}r=!zF.test(i?i.toLowerCase():"")}t=r}if(t)Ki(n,"complete"),Ki(n,"success");else{n.m=6;try{var l=2<Ec(n)?n.g.statusText:""}catch(g){l=""}n.j=l+" ["+n.ba()+"]",WP(n)}}finally{_C(n)}}}function _C(n,e){if(n.g){zP(n);const t=n.g,r=n.C[0]?Qb:null;n.g=null,n.C=null,e||Ki(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function zP(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function Ec(n){return n.g?n.g.readyState:0}function KP(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case HP:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function fx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function QF(n){let e="";return PA(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dr(n,e,t))}function T0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ZP(n){this.za=0,this.l=[],this.h=new sC,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=T0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=T0("baseRetryDelayMs",5e3,n),this.$a=T0("retryDelaySeedMs",1e4,n),this.Ya=T0("forwardChannelMaxRetries",2,n),this.ra=T0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new FP(n&&n.concurrentRequestLimit),this.Ca=new HF,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function px(n){if(YP(n),3==n.G){var e=n.V++,t=wc(n.F);dr(t,"SID",n.J),dr(t,"RID",e),dr(t,"TYPE","terminate"),D0(n,t),(e=new m0(n,n.h,e,void 0)).K=2,e.v=pC(wc(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=sk(e.l,null),e.g.ea(e.v)),e.F=Date.now(),_0(e)}rk(n)}function yC(n){n.g&&(_x(n),n.g.cancel(),n.g=null)}function YP(n){yC(n),n.u&&($t.clearTimeout(n.u),n.u=null),wC(n),n.i.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function gx(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&vC(n)}function vC(n){UP(n.i)||n.m||(n.m=!0,ZA(n.Ha,n),n.C=0)}function QP(n,e){var t;t=e?e.m:n.V++;const r=wc(n.F);dr(r,"SID",n.J),dr(r,"RID",t),dr(r,"AID",n.U),D0(n,r),n.o&&n.s&&fx(r,n.o,n.s),t=new m0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=JP(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),cx(n.i,t),sx(t,r,e)}function D0(n,e){n.j&&ax({},function(t,r){dr(e,r,t)})}function JP(n,e,t){t=Math.min(n.l.length,t);var r=n.j?qi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let g=0;g<t;g++){let v=i[g].h;const D=i[g].g;if(v-=a,0>v)a=Math.max(0,i[g].h-100),h=!1;else try{GF(D,l,"req"+v+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function XP(n){n.g||n.u||(n.Y=1,ZA(n.Ga,n),n.A=0)}function mx(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=p0(qi(n.Ga,n),nk(n,n.A)),n.A++,0))}function _x(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function ek(n){n.g=new m0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=wc(n.oa);dr(e,"RID","rpc"),dr(e,"SID",n.J),dr(e,"CI",n.N?"0":"1"),dr(e,"AID",n.U),D0(n,e),dr(e,"TYPE","xmlhttp"),n.o&&n.s&&fx(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=pC(wc(e)),t.s=null,t.U=!0,SP(t,n)}function wC(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function tk(n,e){var t=null;if(n.g==e){wC(n),_x(n),n.g=null;var r=2}else{if(!lx(n.i,e))return;t=e.D,BP(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ki(r=oC(),new IP(r,t,e,i)),vC(n)}else XP(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function JF(n,e){return!(VP(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=p0(qi(n.Ha,n,e),nk(n,n.C)),n.C++,0)))}(n,e)||2==r&&mx(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Wf(n,5);break;case 4:Wf(n,10);break;case 3:Wf(n,6);break;default:Wf(n,2)}}function nk(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Wf(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=qi(n.jb,n);t||(t=new Gf("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||dC(t,"https"),pC(t)),function WF(n,e){const t=new sC;if($t.Image){const r=new Image;r.onload=Jb(gC,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Jb(gC,t,r,"TestLoadImage: error",!1,e),r.onabort=Jb(gC,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jb(gC,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vs(2);n.G=0,n.j&&n.j.va(e),rk(n),YP(n)}function rk(n){n.G=0,n.I=-1,n.j&&((0!=jP(n.i).length||0!=n.l.length)&&(n.i.i.length=0,MA(n.l),n.l.length=0),n.j.ua())}function ik(n,e,t){let r=function PF(n){return n instanceof Gf?wc(n):new Gf(n,void 0)}(t);if(""!=r.i)e&&hC(r,e+"."+r.i),fC(r,r.m);else{const i=$t.location;r=function kF(n,e,t,r){var i=new Gf(null,void 0);return n&&dC(i,n),e&&hC(i,e),t&&fC(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&PA(n.aa,function(i,a){dr(r,a,i)}),t=n.sa,(e=n.D)&&t&&dr(r,e,t),dr(r,"VER",n.ma),D0(n,r),r}function sk(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wr(t&&n.Ba&&!n.qa?new I0({ib:!0}):n.qa)).L=n.H,e}function ok(){}function EC(){if(Em&&!(10<=Number(dF)))throw Error("Environmental error: no available transport.")}function ra(n,e){Ci.call(this),this.g=new ZP(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Xb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xb(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Tm(this)}function ak(n){tx.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function uk(){nx.call(this),this.status=1}function Tm(n){this.g=n}(at=Wr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rx.g(),this.C=function CP(n){return n.h||(n.h=n.i())}(this.u?this.u:rx),this.g.onreadystatechange=qi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void GP(this,a)}n=t||"";const i=new bm(this.headers);r&&ax(r,function(a,l){i.set(l,a)}),r=function sF(n){e:{var e=YF;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=$t.FormData&&n instanceof $t.FormData,!(0<=ZN(KF,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zP(this),0<this.B&&((this.K=function ZF(n){return Em&&function cF(){return function oF(n){var e=lF;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=JN(String(eC)).split("."),t=JN("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=NA(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||NA(0==i[2].length,0==a[2].length)||NA(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qi(this.pa,this)):this.A=XA(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){GP(this,a)}},at.pa=function(){void 0!==AA&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ki(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ki(this,"complete"),Ki(this,"abort"),_C(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_C(this,!0)),Wr.Z.M.call(this)},at.Fa=function(){this.s||(this.F||this.v||this.l?qP(this):this.cb())},at.cb=function(){qP(this)},at.ba=function(){try{return 2<Ec(this)?this.g.status:-1}catch(n){return-1}},at.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},at.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),qF(e)}},at.Da=function(){return this.m},at.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=ZP.prototype).ma=8,at.G=1,at.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},at.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new m0(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=tP(a),rP(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=JP(this,i,e),dr(t=wc(this.F),"RID",n),dr(t,"CVER",22),this.D&&dr(t,"X-HTTP-Session-Id",this.D),D0(this,t),this.o&&a&&fx(t,this.o,a),cx(this.i,i),this.Ra&&dr(t,"TYPE","init"),this.ja?(dr(t,"$req",e),dr(t,"SID","null"),i.$=!0,sx(i,t,null)):sx(i,t,e),this.G=2}}else 3==this.G&&(n?QP(this,n):0==this.l.length||UP(this.i)||QP(this))},at.Ga=function(){if(this.u=null,ek(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=p0(qi(this.bb,this),n)}},at.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Vs(10),yC(this),ek(this))},at.ab=function(){null!=this.v&&(this.v=null,yC(this),mx(this),Vs(19))},at.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Vs(2)):(this.h.info("Failed to ping google.com"),Vs(1))},(at=ok.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Oa=function(){},EC.prototype.g=function(n,e){return new ra(n,e)},zi(ra,Ci),ra.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ZA(qi(n.hb,n,e))),Vs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=ik(n,null,n.W),vC(n)},ra.prototype.close=function(){px(this.g)},ra.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,gx(this.g,e)}else this.v?((e={}).__data__=KA(n),gx(this.g,e)):gx(this.g,n)},ra.prototype.M=function(){this.g.j=null,delete this.j,px(this.g),delete this.g,ra.Z.M.call(this)},zi(ak,tx),zi(uk,nx),zi(Tm,ok),Tm.prototype.xa=function(){Ki(this.g,"a")},Tm.prototype.wa=function(n){Ki(this.g,new ak(n))},Tm.prototype.va=function(n){Ki(this.g,new uk(n))},Tm.prototype.ua=function(){Ki(this.g,"b")},EC.prototype.createWebChannel=EC.prototype.g,ra.prototype.send=ra.prototype.u,ra.prototype.open=ra.prototype.m,ra.prototype.close=ra.prototype.close,aC.NO_ERROR=0,aC.TIMEOUT=8,aC.HTTP_ERROR=6,bP.COMPLETE="complete",TP.EventType=g0,g0.OPEN="a",g0.CLOSE="b",g0.ERROR="c",g0.MESSAGE="d",Ci.prototype.listen=Ci.prototype.N,Wr.prototype.listenOnce=Wr.prototype.O,Wr.prototype.getLastError=Wr.prototype.La,Wr.prototype.getLastErrorCode=Wr.prototype.Da,Wr.prototype.getStatus=Wr.prototype.ba,Wr.prototype.getResponseJson=Wr.prototype.Qa,Wr.prototype.getResponseText=Wr.prototype.ga,Wr.prototype.send=Wr.prototype.ea;var XF=vc.createWebChannelTransport=function(){return new EC},eU=vc.getStatEventTarget=function(){return oC()},yx=vc.ErrorCode=aC,tU=vc.EventType=bP,nU=vc.Event=jf,lk=vc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rU=vc.FetchXmlHttpFactory=I0,IC=vc.WebChannel=TP,iU=vc.XhrIo=Wr;const ck="@firebase/firestore";class Zi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zi.UNAUTHENTICATED=new Zi(null),Zi.GOOGLE_CREDENTIALS=new Zi("google-credentials-uid"),Zi.FIRST_PARTY=new Zi("first-party-uid"),Zi.MOCK_USER=new Zi("mock-user");let Dm="9.6.10";const Wd=new $o.Yd("@firebase/firestore");function vx(){return Wd.logLevel}function je(n,...e){if(Wd.logLevel<=$o.in.DEBUG){const t=e.map(wx);Wd.debug(`Firestore (${Dm}): ${n}`,...t)}}function qr(n,...e){if(Wd.logLevel<=$o.in.ERROR){const t=e.map(wx);Wd.error(`Firestore (${Dm}): ${n}`,...t)}}function S0(n,...e){if(Wd.logLevel<=$o.in.WARN){const t=e.map(wx);Wd.warn(`Firestore (${Dm}): ${n}`,...t)}}function wx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Dm}) INTERNAL ASSERTION FAILED: `+n;throw qr(e),new Error(e)}function Lt(n,e){n||ct()}function et(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zi.UNAUTHENTICATED))}shutdown(){}}class uU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lU{constructor(e){this.t=e,this.currentUser=Zi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ti,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,ve.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ti)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new dk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new Zi(e)}}class cU{constructor(e,t,r){this.type="FirstParty",this.user=Zi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class dU{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new cU(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hU{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,je("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Lt("string"==typeof t.token),this.p=t.token,new hk(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ia{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function fU(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ia.A=-1;class fk{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fU(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Xt(n,e){return n<e?-1:n>e?1:0}function Sm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function pk(n){return n+"\0"}class Lr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lr.fromMillis(Date.now())}static fromDate(e){return Lr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Lr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new Lr(0,0))}static max(){return new At(new Lr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function gk(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class A0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===A0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof A0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hn extends A0{construct(e,t,r){return new hn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new hn(t)}static emptyPath(){return new hn([])}}const pU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends A0{construct(e,t,r){return new Di(e,t,r)}static isValidIdentifier(e){return pU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Di(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new ke(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ke(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new ke(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Di(t)}static emptyPath(){return new Di([])}}class Am{constructor(e){this.fields=e,e.sort(Di.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new li(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new li(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}li.EMPTY_BYTE_STRING=new li("");const mU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qd(n){if(Lt(!!n),"string"==typeof n){let e=0;const t=mU.exec(n);if(Lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dr(n.seconds),nanos:Dr(n.nanos)}}function Dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function zf(n){return"string"==typeof n?li.fromBase64String(n):li.fromUint8Array(n)}function Ex(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _k(n){const e=n.mapValue.fields.__previous_value__;return Ex(e)?_k(e):e}function x0(n){const e=qd(n.mapValue.fields.__local_write_time__.timestampValue);return new Lr(e.seconds,e.nanos)}class _U{constructor(e,t,r,i,a,l,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class Ic{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ic("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ic&&e.projectId===this.projectId&&e.database===this.database}}function Kf(n){return null==n}function R0(n){return 0===n&&1/n==-1/0}function yk(n){return"number"==typeof n&&Number.isInteger(n)&&!R0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(hn.fromString(e))}static fromName(e){return new ze(hn.fromString(e).popFirst(5))}static empty(){return new ze(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new hn(e.slice()))}}const vk={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wk={nullValue:"NULL_VALUE"};function Zf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ex(n)?4:Ck(n)?9:10:ct()}function hl(n,e){if(n===e)return!0;const t=Zf(n);if(t!==Zf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return x0(n).isEqual(x0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=qd(r.timestampValue),l=qd(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,zf(n.bytesValue).isEqual(zf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Dr(r.geoPointValue.latitude)===Dr(i.geoPointValue.latitude)&&Dr(r.geoPointValue.longitude)===Dr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Dr(r.integerValue)===Dr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Dr(r.doubleValue),l=Dr(i.doubleValue);return a===l?R0(a)===R0(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Sm(n.arrayValue.values||[],e.arrayValue.values||[],hl);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(gk(a)!==gk(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!hl(a[h],l[h])))return!1;return!0}(n,e);default:return ct()}var i}function M0(n,e){return void 0!==(n.values||[]).find(t=>hl(t,e))}function zd(n,e){if(n===e)return 0;const t=Zf(n),r=Zf(e);if(t!==r)return Xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Dr(i.integerValue||i.doubleValue),h=Dr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return Ek(n.timestampValue,e.timestampValue);case 4:return Ek(x0(n),x0(e));case 5:return Xt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=zf(i),h=zf(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let g=0;g<l.length&&g<h.length;g++){const v=Xt(l[g],h[g]);if(0!==v)return v}return Xt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Xt(Dr(i.latitude),Dr(a.latitude));return 0!==l?l:Xt(Dr(i.longitude),Dr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let g=0;g<l.length&&g<h.length;++g){const v=zd(l[g],h[g]);if(v)return v}return Xt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const l=i.fields||{},h=Object.keys(l),g=a.fields||{},v=Object.keys(g);h.sort(),v.sort();for(let D=0;D<h.length&&D<v.length;++D){const S=Xt(h[D],v[D]);if(0!==S)return S;const N=zd(l[h[D]],g[v[D]]);if(0!==N)return N}return Xt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ct()}}function Ek(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Xt(n,e);const t=qd(n),r=qd(e),i=Xt(t.seconds,r.seconds);return 0!==i?i:Xt(t.nanos,r.nanos)}function xm(n){return Ix(n)}function Ix(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=qd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?zf(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Ix(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Ix(r.fields[h])}`;return a+"}"}(n.mapValue):ct();var e}function Rm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bx(n){return!!n&&"integerValue"in n}function N0(n){return!!n&&"arrayValue"in n}function Ik(n){return!!n&&"nullValue"in n}function bk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bC(n){return!!n&&"mapValue"in n}function P0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=P0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=P0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ck(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Tk(n,e){return void 0===n?e:void 0===e||zd(n,e)>0?n:e}function Dk(n,e){return void 0===n?e:void 0===e||zd(n,e)<0?n:e}class _s{constructor(e){this.value=e}static empty(){return new _s({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=P0(t)}setAll(e){let t=Di.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=P0(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());bC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new _s(P0(this.value))}}function Sk(n){const e=[];return qf(n.fields,(t,r)=>{const i=new Di([t]);if(bC(r)){const a=Sk(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Am(e)}class nr{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new nr(e,0,At.min(),At.min(),_s.empty(),0)}static newFoundDocument(e,t,r){return new nr(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new nr(e,2,t,At.min(),_s.empty(),0)}static newUnknownDocument(e,t){return new nr(e,3,t,At.min(),_s.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_s.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_s.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class CC{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Cx(n){return n.fields.find(e=>2===e.kind)}function Mm(n){return n.fields.filter(e=>2!==e.kind)}CC.UNKNOWN_ID=-1;class TC{constructor(e,t){this.fieldPath=e,this.kind=t}}class k0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new k0(0,bc.min())}}function Ak(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new Lr(t+1,0):new Lr(t,r));return new bc(i,ze.empty(),e)}function yU(n){return new bc(n.readTime,n.key,-1)}class bc{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bc(At.min(),ze.empty(),-1)}static max(){return new bc(At.max(),ze.empty(),-1)}}function vU(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Xt(n.largestBatchId,e.largestBatchId))}class wU{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.P=null}}function xk(n,e=null,t=[],r=[],i=null,a=null,l=null){return new wU(n,e,t,r,i,a,l)}function Yf(n){const e=et(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+xm(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Kf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xm(r)).join(",")),e.P=t}return e.P}function O0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!xU(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!hl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Nk(n.startAt,e.startAt)&&Nk(n.endAt,e.endAt)}function DC(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function SC(n,e){return n.filters.filter(t=>t instanceof Yi&&t.field.isEqual(e))}class Yi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new IU(e,t,r):"array-contains"===t?new TU(e,r):"in"===t?new DU(e,r):"not-in"===t?new SU(e,r):"array-contains-any"===t?new AU(e,r):new Yi(e,t,r)}static V(e,t,r){return"in"===t?new bU(e,r):new CU(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(zd(t,this.value)):null!==t&&Zf(this.value)===Zf(t)&&this.v(zd(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class IU extends Yi{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.v(t)}}class bU extends Yi{constructor(e,t){super(e,"in",t),this.keys=Rk(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class CU extends Yi{constructor(e,t){super(e,"not-in",t),this.keys=Rk(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rk(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class TU extends Yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return N0(t)&&M0(t.arrayValue,this.value)}}class DU extends Yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&M0(this.value.arrayValue,t)}}class SU extends Yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(M0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!M0(this.value.arrayValue,t)}}class AU extends Yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!N0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>M0(this.value.arrayValue,r))}}class Kd{constructor(e,t){this.position=e,this.inclusive=t}}class Nm{constructor(e,t="asc"){this.field=e,this.dir=t}}function xU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Mk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?ze.comparator(ze.fromName(l.referenceValue),t.key):zd(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Nk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hl(n.position[t],e.position[t]))return!1;return!0}class Cc{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=g,this.D=null,this.C=null}}function Pk(n,e,t,r,i,a,l,h){return new Cc(n,e,t,r,i,a,l,h)}function Pm(n){return new Cc(n)}function AC(n){return!Kf(n.limit)&&"F"===n.limitType}function xC(n){return!Kf(n.limit)&&"L"===n.limitType}function Tx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Dx(n){for(const e of n.filters)if(e.S())return e.field;return null}function Sx(n){return null!==n.collectionGroup}function km(n){const e=et(n);if(null===e.D){e.D=[];const t=Dx(e),r=Tx(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Nm(t)),e.D.push(new Nm(Di.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Nm(Di.keyField(),a))}}}return e.D}function ja(n){const e=et(n);if(!e.C)if("F"===e.limitType)e.C=xk(e.path,e.collectionGroup,km(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of km(e))t.push(new Nm(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Kd(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Kd(e.startAt.position,!e.startAt.inclusive):null;e.C=xk(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function kk(n,e,t){return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function L0(n,e){return O0(ja(n),ja(e))&&n.limitType===e.limitType}function Ok(n){return`${Yf(ja(n))}|lt:${n.limitType}`}function Ax(n){return`Query(target=${function EU(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${xm(r.value)}`;var r}).join(", ")}]`),Kf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>xm(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>xm(t)).join(",")),`Target(${e})`}(ja(n))}; limitType=${n.limitType})`}function xx(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=Mk(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,km(t),r)||t.endAt&&!function(i,a,l){const h=Mk(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,km(t),r)));var t,r}function Lk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fk(n){return(e,t)=>{let r=!1;for(const i of km(n)){const a=RU(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function RU(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),g=l.data.field(i);return null!==h&&null!==g?zd(h,g):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function Uk(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:R0(e)?"-0":e}}function Vk(n){return{integerValue:""+n}}function Bk(n,e){return yk(e)?Vk(e):Uk(n,e)}class RC{constructor(){this._=void 0}}function MU(n,e,t){return n instanceof Om?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Qf?$k(n,e):n instanceof Jf?Hk(n,e):function(r,i){const a=jk(r,i),l=Gk(a)+Gk(r.k);return bx(a)&&bx(r.k)?Vk(l):Uk(r.M,l)}(n,e)}function NU(n,e,t){return n instanceof Qf?$k(n,e):n instanceof Jf?Hk(n,e):t}function jk(n,e){return n instanceof Lm?bx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Om extends RC{}class Qf extends RC{constructor(e){super(),this.elements=e}}function $k(n,e){const t=Wk(e);for(const r of n.elements)t.some(i=>hl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Jf extends RC{constructor(e){super(),this.elements=e}}function Hk(n,e){let t=Wk(e);for(const r of n.elements)t=t.filter(i=>!hl(i,r));return{arrayValue:{values:t}}}class Lm extends RC{constructor(e,t){super(),this.M=e,this.k=t}}function Gk(n){return Dr(n.integerValue||n.doubleValue)}function Wk(n){return N0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class F0{constructor(e,t){this.field=e,this.transform=t}}class kU{constructor(e,t){this.version=e,this.transformResults=t}}class zr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zr}static exists(e){return new zr(void 0,e)}static updateTime(e){return new zr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function MC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class NC{}function OU(n,e,t){n instanceof U0?function(r,i,a){const l=r.value.clone(),h=Zk(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Xf?function(r,i,a){if(!MC(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Zk(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(Kk(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Rx(n,e,t){var i;n instanceof U0?function(r,i,a){if(!MC(r.precondition,i))return;const l=r.value.clone(),h=Yk(r.fieldTransforms,a,i);l.setAll(h),i.convertToFoundDocument(zk(i),l).setHasLocalMutations()}(n,e,t):n instanceof Xf?function(r,i,a){if(!MC(r.precondition,i))return;const l=Yk(r.fieldTransforms,a,i),h=i.data;h.setAll(Kk(r)),h.setAll(l),i.convertToFoundDocument(zk(i),h).setHasLocalMutations()}(n,e,t):MC(n.precondition,i=e)&&i.convertToNoDocument(At.min())}function LU(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=jk(r.transform,i||null);null!=a&&(null==t&&(t=_s.empty()),t.set(r.field,a))}return t||null}function qk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Sm(t,r,(i,a)=>function PU(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Qf&&r instanceof Qf||t instanceof Jf&&r instanceof Jf?Sm(t.elements,r.elements,hl):t instanceof Lm&&r instanceof Lm?hl(t.k,r.k):t instanceof Om&&r instanceof Om);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function zk(n){return n.isFoundDocument()?n.version:At.min()}class U0 extends NC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Xf extends NC{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function Kk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Zk(n,e,t){const r=new Map;Lt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,NU(l,h,t[i]))}return r}function Yk(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,MU(a,l,e))}return r}class V0 extends NC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Mx extends NC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class FU{constructor(e){this.count=e}}var Kr,fn;function Qk(n){switch(n){default:return ct();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function Jk(n){if(void 0===n)return qr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Kr.OK:return fe.OK;case Kr.CANCELLED:return fe.CANCELLED;case Kr.UNKNOWN:return fe.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return fe.INTERNAL;case Kr.UNAVAILABLE:return fe.UNAVAILABLE;case Kr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Kr.NOT_FOUND:return fe.NOT_FOUND;case Kr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Kr.ABORTED:return fe.ABORTED;case Kr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Kr.DATA_LOSS:return fe.DATA_LOSS;default:return ct()}}(fn=Kr||(Kr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class Zd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return mk(this.inner)}size(){return this.innerSize}}class Fr{constructor(e,t){this.comparator=e,this.root=t||Qi.EMPTY}insert(e,t){return new Fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qi.BLACK,null,null))}remove(e){return new Fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new PC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new PC(this.root,e,this.comparator,!1)}getReverseIterator(){return new PC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new PC(this.root,e,this.comparator,!0)}}class PC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Qi.RED,this.left=null!=i?i:Qi.EMPTY,this.right=null!=a?a:Qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Qi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Qi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Qi.EMPTY=null,Qi.RED=!0,Qi.BLACK=!1,Qi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Qi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rr{constructor(e){this.comparator=e,this.data=new Fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xk(this.data.getIterator())}getIteratorFrom(e){return new Xk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rr(this.comparator);return t.data=e,t}}class Xk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fm(n){return n.hasNext()?n.getNext():void 0}const UU=new Fr(ze.comparator);function $a(){return UU}const VU=new Fr(ze.comparator);function Nx(){return VU}function B0(){return new Zd(n=>n.toString(),(n,e)=>n.isEqual(e))}const BU=new Fr(ze.comparator),jU=new rr(ze.comparator);function An(...n){let e=jU;for(const t of n)e=e.add(t);return e}const $U=new rr(Xt);function kC(){return $U}class j0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,$0.createSynthesizedTargetChangeForCurrentChange(e,t)),new j0(At.min(),r,kC(),$a(),An())}}class $0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new $0(li.EMPTY_BYTE_STRING,t,An(),An(),An())}}class OC{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class eO{constructor(e,t){this.targetId=e,this.$=t}}class tO{constructor(e,t,r=li.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nO{constructor(){this.B=0,this.L=iO(),this.U=li.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=An(),t=An(),r=An();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new $0(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=iO()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class HU{constructor(e){this.nt=e,this.st=new Map,this.it=$a(),this.rt=rO(),this.ot=new rr(Xt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(DC(a))if(0===r){const l=new ze(a.path);this.ct(t,l,nr.newNoDocument(l,At.min()))}else Lt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const h=this.wt(l);if(h){if(a.current&&DC(h.target)){const g=new ze(h.target.path);null!==this.it.get(g)||this.It(l,g)||this.ct(l,g,nr.newNoDocument(g,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=An();this.rt.forEach((a,l)=>{let h=!0;l.forEachWhile(g=>{const v=this.wt(g);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new j0(e,t,this.ot,this.it,r);return this.it=$a(),this.rt=rO(),this.ot=new rr(Xt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new nO,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new rr(Xt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new nO),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function rO(){return new Fr(ze.comparator)}function iO(){return new Fr(ze.comparator)}const GU={asc:"ASCENDING",desc:"DESCENDING"},WU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class qU{constructor(e,t){this.databaseId=e,this.N=t}}function H0(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sO(n,e){return n.N?e.toBase64():e.toUint8Array()}function zU(n,e){return H0(n,e.toTimestamp())}function Si(n){return Lt(!!n),At.fromTimestamp(function(e){const t=qd(e);return new Lr(t.seconds,t.nanos)}(n))}function Px(n,e){return(t=n,new hn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oO(n){const e=hn.fromString(n);return Lt(gO(e)),e}function G0(n,e){return Px(n.databaseId,e.path)}function fl(n,e){const t=oO(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(uO(t))}function kx(n,e){return Px(n.databaseId,e)}function aO(n){const e=oO(n);return 4===e.length?hn.emptyPath():uO(e)}function W0(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uO(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lO(n,e,t){return{name:G0(n,e),fields:t.value.mapValue.fields}}function cO(n,e,t){const r=fl(n,e.name),i=Si(e.updateTime),a=new _s({mapValue:{fields:e.fields}}),l=nr.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function q0(n,e){let t;if(e instanceof U0)t={update:lO(n,e.key,e.value)};else if(e instanceof V0)t={delete:G0(n,e.key)};else if(e instanceof Xf)t={update:lO(n,e.key,e.data),updateMask:nV(e.fieldMask)};else{if(!(e instanceof Mx))return ct();t={verify:G0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Om)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Jf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Lm)return{fieldPath:a.field.canonicalString(),increment:l.k};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:zU(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function Ox(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?zr.updateTime(Si(i.updateTime)):void 0!==i.exists?zr.exists(i.exists):zr.none():zr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Lt("REQUEST_TIME"===l.setToServerValue),h=new Om):"appendMissingElements"in l?h=new Qf(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Jf(l.removeAllFromArray.values||[]):"increment"in l?h=new Lm(a,l.increment):ct();const g=Di.fromServerFormat(l.fieldPath);return new F0(g,h)}(n,i)):[];var i;if(e.update){const i=fl(n,e.update.name),a=new _s({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Am((e.updateMask.fieldPaths||[]).map(v=>Di.fromServerFormat(v)));return new Xf(i,a,l,t,r)}return new U0(i,a,t,r)}if(e.delete){const i=fl(n,e.delete);return new V0(i,t)}if(e.verify){const i=fl(n,e.verify);return new Mx(i,t)}return ct()}function dO(n,e){return{documents:[kx(n,e.path)]}}function hO(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=kx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=kx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const v=g.map(D=>function(S){if("=="===S.op){if(bk(S.value))return{unaryFilter:{field:Um(S.field),op:"IS_NAN"}};if(Ik(S.value))return{unaryFilter:{field:Um(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(bk(S.value))return{unaryFilter:{field:Um(S.field),op:"IS_NOT_NAN"}};if(Ik(S.value))return{unaryFilter:{field:Um(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Um(S.field),op:XU(S.op),value:S.value}}}(D));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:Um((D=v).field),direction:JU(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.N||Kf(v)?v:{value:v});var v,h,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function fO(n){let e=aO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Lt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=pO(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new Nm(Vm((S=D).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Kf(S)?null:S}(t.limit));let g=null;var D;t.startAt&&(g=new Kd((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new Kd(D.values||[],!D.before)}(t.endAt)),Pk(e,i,l,a,h,"F",g,v)}function pO(n){return n?void 0!==n.unaryFilter?[tV(n)]:void 0!==n.fieldFilter?[eV(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>pO(e)).reduce((e,t)=>e.concat(t)):ct():[]}function JU(n){return GU[n]}function XU(n){return WU[n]}function Um(n){return{fieldPath:n.canonicalString()}}function Vm(n){return Di.fromServerFormat(n.fieldPath)}function eV(n){return Yi.create(Vm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function tV(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Vm(n.unaryFilter.field);return Yi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Vm(n.unaryFilter.field);return Yi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vm(n.unaryFilter.field);return Yi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Vm(n.unaryFilter.field);return Yi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function nV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mO(e)),e=rV(n.get(t),e);return mO(e)}function rV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function mO(n){return n+"\x01\x01"}function Du(n){const e=n.length;if(Lt(e>=2),2===e)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),hn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ct(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ct()}a=l+2}return new hn(r)}const _O=["userId","batchId"];function LC(n,e){return[n,Ai(e)]}function yO(n,e,t){return[n,Ai(e),t]}const iV={},sV=["prefixPath","collectionGroup","readTime","documentId"],oV=["prefixPath","collectionGroup","documentId"],aV=["collectionGroup","readTime","prefixPath","documentId"],uV=["canonicalId","targetId"],lV=["targetId","path"],cV=["path","targetId"],dV=["collectionId","parent"],hV=["indexId","uid"],fV=["uid","sequenceNumber"],pV=["indexId","uid","arrayValue","directionalValue","documentKey"],gV=["indexId","uid","documentKey"],mV=["userId","collectionPath","documentId"],_V=["userId","collectionPath","largestBatchId"],yV=["userId","collectionGroup","largestBatchId"],vO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vV=[...vO,"documentOverlays"],wO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wV=[...wO,"indexConfiguration","indexState","indexEntries"],EO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,r)=>{t(e)})}static reject(e){return new ye((t,r)=>{r(e)})}static waitFor(e){return new ye((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next(i=>i?ye.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class FC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ti,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new z0(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Lx(r.target.error);this.At.reject(new z0(e,i))}}static open(e,t,r,i){try{return new FC(t,e.transaction(i,r))}catch(a){throw new z0(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new IV(t)}}class Su{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Su.Vt((0,k.z$)())&&qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),tp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Su.St())return!0;const e=(0,k.z$)(),t=Su.Vt(e),r=0<t&&t<10,i=Su.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new z0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new ke(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new ke(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new z0(e,h))},a.onupgradeneeded=l=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.Pt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ve.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Nt(e);const g=FC.open(a.db,e,l?"readonly":"readwrite",r),v=i(g).next(D=>(g.bt(),D)).catch(D=>(g.abort(D),ye.reject(D))).toPromise();return v.catch(()=>{}),yield g.Rt,v}catch(g){const v="FirebaseError"!==g.name&&h<3;if(je("SimpleDb","Transaction failed with error:",g.message,"Retrying:",v),a.close(),!v)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class EV{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return tp(this.Ft.delete())}}class z0 extends ke{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ep(n){return"IndexedDbTransactionError"===n.name}class IV{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),tp(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),tp(this.store.add(e))}get(e){return tp(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),tp(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),tp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ye((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ye((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,l,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new ye((r,i)=>{t.onerror=a=>{const l=Lx(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}Gt(e,t){const r=[];return new ye((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const g=new EV(h),v=t(h.primaryKey,h.value,g);if(v instanceof ye){const D=v.catch(S=>(g.done(),ye.reject(S)));r.push(D)}g.isDone?i():null===g.Lt?h.continue():h.continue(g.Lt)}}).next(()=>ye.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function tp(n){return new ye((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Lx(r.target.error);t(i)}})}let bO=!1;function Lx(n){const e=Su.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bO||(bO=!0,setTimeout(()=>{throw r},0)),r}}return n}class CO extends IO{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function xi(n,e){const t=et(n);return Su.xt(t.Ht,e)}class Fx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&OU(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Rx(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Rx(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),An())}isEqual(e){return this.batchId===e.batchId&&Sm(this.mutations,e.mutations,(t,r)=>qk(t,r))&&Sm(this.baseMutations,e.baseMutations,(t,r)=>qk(t,r))}}class Ux{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Lt(e.mutations.length===r.length);let i=BU;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Ux(e,t,r,i)}}class Vx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yd{constructor(e,t,r,i,a=At.min(),l=At.min(),h=li.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Yd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class TO{constructor(e){this.Jt=e}}function DO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:UC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:G0(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:H0(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:np(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:np(e.version)}}var i,a;return r}function UC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function np(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rp(n){const e=new Lr(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Bm(n,e){const t=(e.baseMutations||[]).map(a=>Ox(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Ox(n.Jt,a)),i=Lr.fromMillis(e.localWriteTimeMs);return new Fx(e.batchId,i,t,r)}function K0(n){const e=rp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rp(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=ja(Pm(aO(i.documents[0])))):r=ja(fO(n.query)),new Yd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,li.fromBase64String(n.resumeToken))}function SO(n,e){const t=np(e.snapshotVersion),r=np(e.lastLimboFreeSnapshotVersion);let i;i=DC(e.target)?dO(n.Jt,e.target):hO(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yf(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Bx(n){const e=fO({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kk(e,e.limit,"L"):e}function jx(n,e){return new Vx(e.largestBatchId,Ox(n.Jt,e.overlayMutation))}function AO(n,e){const t=e.path.lastSegment();return[n,Ai(e.path.popLast()),t]}class CV{getBundleMetadata(e,t){return xO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:rp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return xO(e).put({bundleId:(r=t).id,createTime:np(Si(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return RO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Bx(i.bundledQuery),readTime:rp(i.readTime)};var i})}saveNamedQuery(e,t){return RO(e).put({name:(r=t).name,readTime:np(Si(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xO(n){return xi(n,"bundles")}function RO(n){return xi(n,"namedQueries")}class $x{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new $x(e,t.uid||"")}getOverlay(e,t){return Z0(e).get(AO(this.userId,t)).next(r=>r?jx(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new Vx(t,l);i.push(this.Xt(e,h))}),ye.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ai(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Z0(e).Qt("collectionPathOverlayIndex",h))}),ye.waitFor(a)}getOverlaysForCollection(e,t,r){const i=B0(),a=Ai(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Z0(e).qt("collectionPathOverlayIndex",l).next(h=>{for(const g of h){const v=jx(this.M,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=B0();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Z0(e).Wt({index:"collectionGroupOverlayIndex",range:h},(g,v,D)=>{const S=jx(this.M,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}Xt(e,t){return Z0(e).put(function(r,i,a){const[l,h,g]=AO(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:q0(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function Z0(n){return xi(n,"documentOverlays")}class jm{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Dr(e.integerValue));else if("doubleValue"in e){const r=Dr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),R0(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(zf(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Ck(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ct()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),ze.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function TV(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function MO(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=TV(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}jm.fe=new jm;class DV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=MO(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=MO(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class SV{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class AV{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class VC{constructor(){this.De=new DV,this.Ce=new SV(this.De),this.xe=new AV(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Qd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Qd(this.indexId,this.documentKey,this.arrayValue,r)}}function ip(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=NO(n.arrayValue,e.arrayValue),0!==t?t:(t=NO(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function NO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class xV{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Cx(e);if(void 0!==t&&!this.Be(t))return!1;const r=Mm(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class RV{constructor(){this.qe=new Hx}addToCollectionParentIndex(e,t){return this.qe.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getFieldIndex(e,t){return ye.resolve(null)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class Hx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rr(hn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rr(hn.comparator)).toArray()}}const BC=new Uint8Array(0);class MV{constructor(e){this.user=e,this.Ge=new Hx,this.Ke=new Zd(t=>Yf(t),(t,r)=>O0(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:Ai(i)};return PO(e).put(a)}return ye.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[pk(t),""],!1,!0);return PO(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Du(l.parent))}return r})}addFieldIndex(e,t){const r=jC(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=jC(e),i=$C(e),a=Y0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Y0(e);let i=!0;const a=new Map;return ye.forEach(this.Qe(t),l=>this.getFieldIndex(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=An();return ye.forEach(a,(h,g)=>{var v;je("IndexedDbIndexManager",`Using index ${v=h,`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(Qe=>`${Qe.fieldPath}:${Qe.kind}`).join(",")}`} to execute ${Yf(t)}`);const D=function(Qe,St){const st=Cx(St);if(void 0===st)return null;for(const Ut of SC(Qe,st.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(g,h),S=function(Qe,St){const st=new Map;for(const Ut of Mm(St))for(const Vt of SC(Qe,Ut.fieldPath))switch(Vt.op){case"==":case"in":st.set(Ut.fieldPath.canonicalString(),Vt.value);break;case"not-in":case"!=":return st.set(Ut.fieldPath.canonicalString(),Vt.value),Array.from(st.values())}return null}(g,h),N=function(Qe,St){const st=[];let Ut=!0;for(const _o of Mm(St)){let ci,Au=!0;for(const di of SC(Qe,_o.fieldPath)){let _r,n_=!0;switch(di.op){case"<":case"<=":_r="nullValue"in(Vt=di.value)?wk:"booleanValue"in Vt?{booleanValue:!1}:"integerValue"in Vt||"doubleValue"in Vt?{doubleValue:NaN}:"timestampValue"in Vt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Vt?{stringValue:""}:"bytesValue"in Vt?{bytesValue:""}:"referenceValue"in Vt?Rm(Ic.empty(),ze.empty()):"geoPointValue"in Vt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Vt?{arrayValue:{}}:"mapValue"in Vt?{mapValue:{}}:ct();break;case"==":case"in":case">=":_r=di.value;break;case">":_r=di.value,n_=!1;break;case"!=":case"not-in":_r=wk}Tk(ci,_r)===_r&&(ci=_r,Au=n_)}if(null!==Qe.startAt)for(let di=0;di<Qe.orderBy.length;++di)if(Qe.orderBy[di].field.isEqual(_o.fieldPath)){const _r=Qe.startAt.position[di];Tk(ci,_r)===_r&&(ci=_r,Au=Qe.startAt.inclusive);break}if(void 0===ci)return null;st.push(ci),Ut&&(Ut=Au)}var Vt;return new Kd(st,Ut)}(g,h),j=function(Qe,St){const st=[];let Ut=!0;for(const _o of Mm(St)){let ci,Au=!0;for(const di of SC(Qe,_o.fieldPath)){let _r,n_=!0;switch(di.op){case">=":case">":_r="nullValue"in(Vt=di.value)?{booleanValue:!1}:"booleanValue"in Vt?{doubleValue:NaN}:"integerValue"in Vt||"doubleValue"in Vt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Vt?{stringValue:""}:"stringValue"in Vt?{bytesValue:""}:"bytesValue"in Vt?Rm(Ic.empty(),ze.empty()):"referenceValue"in Vt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Vt?{arrayValue:{}}:"arrayValue"in Vt?{mapValue:{}}:"mapValue"in Vt?vk:ct(),n_=!1;break;case"==":case"in":case"<=":_r=di.value;break;case"<":_r=di.value,n_=!1;break;case"!=":case"not-in":_r=vk}Dk(ci,_r)===_r&&(ci=_r,Au=n_)}if(null!==Qe.endAt)for(let di=0;di<Qe.orderBy.length;++di)if(Qe.orderBy[di].field.isEqual(_o.fieldPath)){const _r=Qe.endAt.position[di];Dk(ci,_r)===_r&&(ci=_r,Au=Qe.endAt.inclusive);break}if(void 0===ci)return null;st.push(ci),Ut&&(Ut=Au)}var Vt;return new Kd(st,Ut)}(g,h),Z=this.je(h,g,N),Ee=this.je(h,g,j),Oe=this.We(h,g,S),Et=this.ze(h.indexId,D,Z,!!N&&N.inclusive,Ee,!!j&&j.inclusive,Oe);return ye.forEach(Et,Qe=>r.Kt(Qe,t.limit).next(St=>{St.forEach(st=>{l=l.add(new ze(Du(st.documentKey)))})}))}).next(()=>l)}return ye.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,l,h){const g=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),v=g/(null!=t?t.length:1),D=[];for(let S=0;S<g;++S){const N=t?this.He(t[S/v]):BC,j=r?this.Je(e,N,r[S%v],i):this.Ye(e),Z=a?this.Xe(e,N,a[S%v],l):this.Ye(e+1);D.push(...this.createRange(j,Z,h.map(Ee=>this.Je(e,N,Ee,!0))))}return D}Je(e,t,r,i){const a=new Qd(e,ze.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Qd(e,ze.empty(),t,r);return i?a.ke():a}Ye(e){return new Qd(e,ze.empty(),BC,BC)}getFieldIndex(e,t){const r=new xV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const l=a.filter(h=>r.$e(h));return l.sort((h,g)=>g.fields.length-h.fields.length),l.length>0?l[0]:null})}Ze(e,t){const r=new VC;for(const i of Mm(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);jm.fe.Zt(a,l)}return r.Se()}He(e){const t=new VC;return jm.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new VC);let a=0;for(const l of Mm(e)){const h=r[a++];for(const g of i)if(this.tn(t,l.fieldPath)&&N0(h))i=this.en(i,l,h);else{const v=g.Ne(l.kind);jm.fe.Zt(h,v)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const g=new VC;g.seed(h.Se()),jm.fe.Zt(l,g.Ne(t.kind)),a.push(g)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof Yi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=jC(e),i=$C(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return ye.forEach(a,h=>i.get([h.indexId,this.uid]).next(g=>{l.push(function(v,D){const S=D?new k0(D.sequenceNumber,new bc(rp(D.readTime),new ze(Du(D.documentKey)),D.largestBatchId)):k0.empty(),N=v.fields.map(([j,Z])=>new TC(Di.fromServerFormat(j),Z));return new CC(v.indexId,v.collectionGroup,N,S)}(h,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Xt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=jC(e),a=$C(e);return this.sn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ye.forEach(h,g=>{return a.put({indexId:g.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:np((N=r).readTime),documentKey:Ai(N.documentKey.path),largestBatchId:N.largestBatchId});var N})))}updateIndexEntries(e,t){const r=new Map;return ye.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ye.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ye.forEach(h,g=>this.rn(e,i,g).next(v=>{const D=this.on(a,g);return v.isEqual(D)?ye.resolve():this.un(e,a,v,D)}))))})}an(e,t,r){return Y0(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Ai(t.key.path)})}cn(e,t,r){return Y0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Ai(t.key.path)])}rn(e,t,r){const i=Y0(e);let a=new rr(ip);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Ai(t.path)])},(l,h)=>{a=a.add(new Qd(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}on(e,t){let r=new rr(ip);const i=this.Ze(t,e);if(null==i)return r;const a=Cx(t);if(null!=a){const l=e.data.field(a.fieldPath);if(N0(l))for(const h of l.arrayValue.values||[])r=r.add(new Qd(t.indexId,e.key,this.He(h),i))}else r=r.add(new Qd(t.indexId,e.key,BC,i));return r}un(e,t,r,i){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(l,h,g,v,D){const S=l.getIterator(),N=h.getIterator();let j=Fm(S),Z=Fm(N);for(;j||Z;){let Ee=!1,Oe=!1;if(j&&Z){const Et=g(j,Z);Et<0?Oe=!0:Et>0&&(Ee=!0)}else null!=j?Oe=!0:Ee=!0;Ee?(v(Z),Z=Fm(N)):Oe?(D(j),j=Fm(S)):(j=Fm(S),Z=Fm(N))}}(r,i,ip,l=>{a.push(this.an(e,t,l))},l=>{a.push(this.cn(e,t,l))}),ye.waitFor(a)}sn(e){let t=1;return $C(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>ip(l,h)).filter((l,h,g)=>!h||0!==ip(l,g[h-1]));const i=[];i.push(e);for(const l of r){const h=ip(l,e),g=ip(l,t);if(0===h)i[0]=e.ke();else if(h>0&&g<0)i.push(l),i.push(l.ke());else if(g>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,""],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,""]));return a}}function PO(n){return xi(n,"collectionParents")}function Y0(n){return xi(n,"indexEntries")}function jC(n){return xi(n,"indexConfiguration")}function $C(n){return xi(n,"indexState")}const kO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new mo(e,mo.DEFAULT_COLLECTION_PERCENTILE,mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function OO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const g=r.Wt({range:l},(D,S,N)=>(h++,N.delete()));a.push(g.next(()=>{Lt(1===h)}));const v=[];for(const D of t.mutations){const S=yO(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return ye.waitFor(a).next(()=>v)}function HC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}mo.DEFAULT_COLLECTION_PERCENTILE=10,mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mo.DEFAULT=new mo(41943040,mo.DEFAULT_COLLECTION_PERCENTILE,mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mo.DISABLED=new mo(-1,0,0);class Gx{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Lt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Gx(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jd(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=$m(e),l=Jd(e);return l.add({}).next(h=>{Lt("number"==typeof h);const g=new Fx(h,t,r,i),v=function(N,j,Z){const Ee=Z.baseMutations.map(Et=>q0(N.Jt,Et)),Oe=Z.mutations.map(Et=>q0(N.Jt,Et));return{userId:j,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:Ee,mutations:Oe}}(this.M,this.userId,g),D=[];let S=new rr((N,j)=>Xt(N.canonicalString(),j.canonicalString()));for(const N of i){const j=yO(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),D.push(l.put(v)),D.push(a.put(j,iV))}return S.forEach(N=>{D.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.hn[h]=g.keys()}),ye.waitFor(D).next(()=>g)})}lookupMutationBatch(e,t){return Jd(e).get(t).next(r=>r?(Lt(r.userId===this.userId),Bm(this.M,r)):null)}ln(e,t){return this.hn[t]?ye.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Jd(e).Wt({index:"userMutationsIndex",range:i},(l,h,g)=>{h.userId===this.userId&&(Lt(h.batchId>=r),a=Bm(this.M,h)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Jd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jd(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Bm(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=LC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return $m(e).Wt({range:i},(l,h,g)=>{const[v,D,S]=l,N=Du(D);if(v===this.userId&&t.path.isEqual(N))return Jd(e).get(S).next(j=>{if(!j)throw ct();Lt(j.userId===this.userId),a.push(Bm(this.M,j))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Xt);const i=[];return t.forEach(a=>{const l=LC(this.userId,a.path),h=IDBKeyRange.lowerBound(l),g=$m(e).Wt({range:h},(v,D,S)=>{const[N,j,Z]=v,Ee=Du(j);N===this.userId&&a.path.isEqual(Ee)?r=r.add(Z):S.done()});i.push(g)}),ye.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=LC(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new rr(Xt);return $m(e).Wt({range:l},(g,v,D)=>{const[S,N,j]=g,Z=Du(N);S===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(h=h.add(j)):D.done()}).next(()=>this.fn(e,h))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Jd(e).get(a).next(l=>{if(null===l)throw ct();Lt(l.userId===this.userId),r.push(Bm(this.M,l))}))}),ye.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OO(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ye.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $m(e).Wt({range:r},(a,l,h)=>{if(a[0]===this.userId){const g=Du(a[1]);i.push(g)}else h.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,t){return LO(e,this.userId,t)}_n(e){return FO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function LO(n,e,t){const r=LC(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return $m(n).Wt({range:a,jt:!0},(h,g,v)=>{const[D,S,N]=h;D===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Jd(n){return xi(n,"mutations")}function $m(n){return xi(n,"documentMutations")}function FO(n){return xi(n,"mutationQueues")}class sp{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new sp(0)}static gn(){return new sp(-1)}}class NV{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new sp(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>At.fromTimestamp(new Lr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hm(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Hm(e).Wt((l,h)=>{const g=K0(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>ye.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Hm(e).Wt((r,i)=>{const a=K0(i);t(a)})}yn(e){return UO(e).get("targetGlobalKey").next(t=>(Lt(null!==t),t))}pn(e,t){return UO(e).put("targetGlobalKey",t)}In(e,t){return Hm(e).put(SO(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Hm(e).Wt({range:i,index:"queryTargetsIndex"},(l,h,g)=>{const v=K0(h);O0(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Xd(e);return t.forEach(l=>{const h=Ai(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ye.waitFor(i)}removeMatchingKeys(e,t,r){const i=Xd(e);return ye.forEach(t,a=>{const l=Ai(a.path);return ye.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Xd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Xd(e);let a=An();return i.Wt({range:r,jt:!0},(l,h,g)=>{const v=Du(l[1]),D=new ze(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Ai(t.path),i=IDBKeyRange.bound([r],[pk(r)],!1,!0);let a=0;return Xd(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,h],g,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}Et(e,t){return Hm(e).get(t).next(r=>r?K0(r):null)}}function Hm(n){return xi(n,"targets")}function UO(n){return xi(n,"targetGlobal")}function Xd(n){return xi(n,"targetDocuments")}function op(n){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,ve.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==EO)throw n;je("LocalStore","Unexpectedly lost primary lease")}),Wx.apply(this,arguments)}function VO([n,e],[t,r]){const i=Xt(n,t);return 0===i?Xt(e,r):i}class PV{constructor(e){this.En=e,this.buffer=new rr(VO),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kV{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;je("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){ep(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield op(i)}yield t.vn(e)}))}}class OV{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ye.resolve(ia.A);const r=new PV(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(kO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kO):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,l,h,g,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),vx()<=$o.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(g-h)+`ms\n\tRemoved ${S} documents in `+(v-g)+`ms\nTotal Duration: ${v-D}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class LV{constructor(e,t){this.db=e,this.garbageCollector=new OV(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return GC(e,r)}removeReference(e,t,r){return GC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return GC(e,t)}Mn(e,t){return function(r,i){let a=!1;return FO(r).zt(l=>LO(r,l,i).next(h=>(h&&(a=!0),ye.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(l,h)=>{if(h<=t){const g=this.Mn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,At.min()),Xd(e).delete([0,Ai(l.path)])))});i.push(g)}}).next(()=>ye.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return GC(e,t)}kn(e,t){const r=Xd(e);let i,a=ia.A;return r.Wt({index:"documentTargetsIndex"},([l,h],{path:g,sequenceNumber:v})=>{0===l?(a!==ia.A&&t(new ze(Du(i)),a),a=v,i=g):a=ia.A}).next(()=>{a!==ia.A&&t(new ze(Du(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function GC(n,e){return Xd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ai(e.path),sequenceNumber:r}));var r}class BO{constructor(){this.changes=new Zd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FV{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ap(e).put(r)}removeEntry(e,t,r){return ap(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],UC(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=nr.newInvalidDocument(t);return ap(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Q0(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:nr.newInvalidDocument(t)};return ap(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Q0(t))},(i,a)=>{r={document:this.Fn(t,a),size:HC(a)}}).next(()=>r)}getEntries(e,t){let r=$a();return this.Bn(e,t,(i,a)=>{const l=this.Fn(i,a);r=r.insert(i,l)}).next(()=>r)}Ln(e,t){let r=$a(),i=new Fr(ze.comparator);return this.Bn(e,t,(a,l)=>{const h=this.Fn(a,l);r=r.insert(a,h),i=i.insert(a,HC(l))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return ye.resolve();let i=new rr(HO);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(Q0(i.first()),Q0(i.last())),l=i.getIterator();let h=l.getNext();return ap(e).Wt({index:"documentKeyIndex",range:a},(g,v,D)=>{const S=ze.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&HO(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?D.Ut(Q0(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),UC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ap(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=$a();for(const g of l){const v=this.Fn(ze.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(v.key,v)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=$a();const l=$O(t,r),h=$O(t,bc.max());return ap(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(g,v,D)=>{const S=this.Fn(ze.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new UV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jO(e).get("remoteDocumentGlobalKey").next(t=>(Lt(!!t),t))}On(e,t){return jO(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function bV(n,e){let t;if(e.document)t=cO(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=rp(e.noDocument.readTime);t=nr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=ze.fromSegments(e.unknownDocument.path),i=rp(e.unknownDocument.version);t=nr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Lr(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return nr.newInvalidDocument(e)}}class UV extends BO{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Zd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new rr((a,l)=>Xt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const g=DO(this.qn.M,l);i=i.add(a.path.popLast()),r+=HC(g)-h.size,t.push(this.qn.addEntry(e,a,g))}else if(r-=h.size,this.trackRemovals){const g=DO(this.qn.M,l.convertToNoDocument(At.min()));t.push(this.qn.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),ye.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function jO(n){return xi(n,"remoteDocumentGlobal")}function ap(n){return xi(n,"remoteDocumentsV14")}function Q0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $O(n,e){const t=e.documentKey.path.toArray();return[n,UC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HO(n,e){const t=n.path.length-e.path.length;return 0!==t?t:ze.comparator(n,e)}class VV{constructor(e){this.M=e}kt(e,t,r,i){const a=new FC("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_O,{unique:!0}),h.createObjectStore("documentMutations"),GO(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ye.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),GO(e)),l=l.next(()=>function(h){const g=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,g){return g.store("mutations").qt().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_O,{unique:!0});const D=g.store("mutations"),S=v.map(N=>D.put(N));return ye.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Kn(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(l=l.next(()=>this.jn(a))),r<8&&i>=8&&(l=l.next(()=>this.Wn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.zn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:mV});g.createIndex("collectionPathOverlayIndex",_V,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",yV,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:sV});g.createIndex("documentKeyIndex",oV),g.createIndex("collectionGroupIndex",aV)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:hV}).createIndex("sequenceNumberIndex",fV,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:pV}).createIndex("documentKeyIndex",gV,{unique:!1})}(e)})),l}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=HC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ye.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(h=>ye.forEach(h,g=>{Lt(g.userId===a.userId);const v=Bm(this.M,g);return OO(e,a.userId,v).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,h)=>{const g=new hn(l),v=[0,Ai(g)];a.push(t.get(v).next(D=>D?ye.resolve():t.put({targetId:0,path:Ai(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ye.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:dV});const r=t.store("collectionParents"),i=new Hx,a=l=>{if(i.add(l)){const h=l.lastSegment(),g=l.popLast();return r.put({collectionId:h,parent:Ai(g)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,h)=>{const g=new hn(l);return a(g.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,h,g],v)=>{const D=Du(h);return a(D.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=K0(i),l=SO(this.M,a);return t.put(l)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const h=t.store("remoteDocumentsV14"),g=(v=l,v.document?new ze(hn.fromString(v.document.name).popFirst(5)):v.noDocument?ze.fromSegments(v.noDocument.path):v.unknownDocument?ze.fromSegments(v.unknownDocument.path):ct()).path.toArray();var v;const D={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>ye.waitFor(i))}}function GO(n){n.createObjectStore("targetDocuments",{keyPath:lV}).createIndex("documentTargetsIndex",cV,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uV,{unique:!0}),n.createObjectStore("targetGlobal")}const qx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zx{constructor(e,t,r,i,a,l,h,g,v,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=l,this.document=h,this.Yn=v,this.Xn=D,this.Zn=S,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=N=>Promise.resolve(),!zx.vt())throw new ke(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LV(this,i),this.cs=t+"main",this.M=new TO(g),this.hs=new Su(this.cs,this.Zn,new VV(this.M)),this.ls=new NV(this.referenceDelegate,this.M),this.fs=new FV(this.M),this.ds=new CV,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===D&&qr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,qx);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new ia(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>WC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(ep(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return J0(e).get("owner").next(t=>ye.resolve(this.bs(t)))}Ps(e){return WC(e).delete(this.clientId)}Vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=xi(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ss(a,18e5),h=a.filter(g=>-1===l.indexOf(g));return ye.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?ye.resolve(!0):J0(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,qx);return!1}}return!(!this.networkEnabled||!this.inForeground)||WC(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CO(t,ia.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>WC(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Gx.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new MV(e)}getDocumentOverlayCache(e){return $x.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.Zn)?wV:13===l?wO:12===l?vV:11===l?vO:void ct();var l;let h;return this.hs.runTransaction(e,i,a,g=>(h=new CO(g,this.ts?this.ts.next():ia.A),"readwrite-primary"===t?this.Ts(h).next(v=>!!v||this.Es(h)).next(v=>{if(!v)throw qr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new ke(fe.FAILED_PRECONDITION,EO);return r(h)}).next(v=>this.Rs(h).next(()=>v)):this.Fs(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}Fs(e){return J0(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(fe.FAILED_PRECONDITION,qx)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return J0(e).put("owner",t)}static vt(){return Su.vt()}As(e){const t=J0(e);return t.get("owner").next(r=>this.bs(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ye.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(qr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){qr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function J0(n){return xi(n,"owner")}function WC(n){return xi(n,"clientMetadata")}function Kx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class BV{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):Sx(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new ze(t)).next(r=>{let i=Nx();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=Nx();return this.indexManager.getCollectionParents(e,i).next(l=>ye.forEach(l,h=>{const g=(v=t,D=h.child(i),new Cc(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.Ws(e,g,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const h of l.mutations){const g=h.key;let v=i.get(g);null==v&&(v=nr.newInvalidDocument(g),i=i.insert(g,v)),Rx(h,v,l.localWriteTime),v.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((a,l)=>{xx(t,l)||(i=i.remove(a))}),i))}}class Zx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=An(),i=An();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Zx(e,t.fromCache,r,i)}}class WO{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(At.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const l=this.ti(t,a);return(AC(t)||xC(t))&&this.ei(t.limitType,l,i,r)?this.Zs(e,t):(vx()<=$o.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ax(t)),this.Xs.Ks(e,t,Ak(r,-1)).next(h=>(l.forEach(g=>{h=h.insert(g.key,g)}),h)))});var a}ti(e,t){let r=new rr(Fk(e));return t.forEach((i,a)=>{xx(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return vx()<=$o.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",Ax(t)),this.Xs.Ks(e,t,bc.min())}}class jV{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new Fr(Xt),this.ii=new Zd(a=>Yf(a),O0),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new BV(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function qO(n,e,t,r){return new jV(n,e,t,r)}function zO(n,e){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,ve.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let g=An();for(const v of i){l.push(v.batchId);for(const D of v.mutations)g=g.add(D.key)}for(const v of a){h.push(v.batchId);for(const D of v.mutations)g=g.add(D.key)}return t.ai.qs(r,g).next(v=>({ci:v,removedBatchIds:l,addedBatchIds:h}))})})}),Yx.apply(this,arguments)}function $V(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(l,h,g,v){const D=g.batch,S=D.keys();let N=ye.resolve();return S.forEach(j=>{N=N.next(()=>v.getEntry(h,j)).next(Z=>{const Ee=g.docVersions.get(j);Lt(null!==Ee),Z.version.compareTo(Ee)<0&&(D.applyToRemoteDocument(Z,g),Z.isValidDocument()&&(Z.setReadTime(g.commitVersion),v.addEntry(Z)))})}),N.next(()=>l.$s.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function KO(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function HV(n,e){const t=et(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const h=[];e.targetChanges.forEach((v,D)=>{const S=i.get(D);if(!S)return;h.push(t.ls.removeMatchingKeys(a,v.removedDocuments,D).next(()=>t.ls.addMatchingKeys(a,v.addedDocuments,D)));let N=S.withSequenceNumber(a.currentSequenceNumber);var j,Z,Ee;e.targetMismatches.has(D)?N=N.withResumeToken(li.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,r)),i=i.insert(D,N),Z=N,Ee=v,(0===(j=S).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&h.push(t.ls.updateTargetData(a,N))});let g=$a();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(ZO(a,l,e.documentUpdates).next(v=>{g=v})),!r.isEqual(At.min())){const v=t.ls.getLastRemoteSnapshotVersion(a).next(D=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(v)}return ye.waitFor(h).next(()=>l.apply(a)).next(()=>t.ai.Gs(a,g)).next(()=>g)}).then(a=>(t.si=i,a))}function ZO(n,e,t){let r=An();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=$a();return t.forEach((l,h)=>{const g=i.get(l);h.isNoDocument()&&h.version.isEqual(At.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||0===h.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):je("LocalStore","Ignoring outdated watch update for ",l,". Current version:",g.version," Watch version:",h.version)}),a})}function GV(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Gm(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,ye.resolve(i)):t.ls.allocateTargetId(r).next(l=>(i=new Yd(e,l,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Wm(n,e,t){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,ve.Z)(function*(n,e,t){const r=et(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!ep(l))throw l;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),Qx.apply(this,arguments)}function qC(n,e,t){const r=et(n);let i=At.min(),a=An();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,g,v){const D=et(h),S=D.ii.get(v);return void 0!==S?ye.resolve(D.si.get(S)):D.ls.getTargetData(g,v)}(r,l,ja(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(l,h.targetId).next(g=>{a=g})}).next(()=>r.ni.Ks(l,e,t?i:At.min(),t?a:An())).next(h=>(JO(r,Lk(e),h),{documents:h,hi:a})))}function YO(n,e){const t=et(n),r=et(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function QO(n,e){const t=et(n),r=t.ri.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,Ak(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(JO(t,e,i),i))}function JO(n,e,t){let r=At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function Jx(){return Jx=(0,ve.Z)(function*(n,e,t,r){const i=et(n);let a=An(),l=$a();for(const v of t){const D=e.li(v.metadata.name);v.document&&(a=a.add(D));const S=e.fi(v);S.setReadTime(e.di(v.metadata.readTime)),l=l.insert(D,S)}const h=i.oi.newChangeBuffer({trackRemovals:!0}),g=yield Gm(i,(v=r,ja(Pm(hn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>ZO(v,h,l).next(D=>(h.apply(v),D)).next(D=>i.ls.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.ls.addMatchingKeys(v,a,g.targetId)).next(()=>i.ai.Gs(v,D)).next(()=>D)))}),Jx.apply(this,arguments)}function qV(n,e){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,ve.Z)(function*(n,e,t=An()){const r=yield Gm(n,ja(Bx(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Si(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.ds.saveNamedQuery(a,e);const h=r.withResumeToken(li.EMPTY_BYTE_STRING,l);return i.si=i.si.insert(h.targetId,h),i.ls.updateTargetData(a,h).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),Xx.apply(this,arguments)}class zV{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return ye.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Si(r.createTime)}),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:Bx(r.bundledQuery),readTime:Si(r.readTime)}),ye.resolve();var r}}class KV{constructor(){this.overlays=new Fr(ze.comparator),this.mi=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),ye.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const i=B0(),a=t.length+1,l=new ze(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const g=h.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Fr((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=B0(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const h=B0(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,D)=>h.set(v,D)),!(h.size()>=i)););return ye.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Vx(t,r));let a=this.mi.get(t);void 0===a&&(a=An(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class eR{constructor(){this.gi=new rr(Ri.yi),this.pi=new rr(Ri.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Ri(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Ri(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new ze(new hn([])),r=new Ri(t,e),i=new Ri(t,e+1),a=[];return this.pi.forEachInRange([r,i],l=>{this.Ei(l),a.push(l.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new ze(new hn([])),r=new Ri(t,e),i=new Ri(t,e+1);let a=An();return this.pi.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ri(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ri{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return ze.comparator(e.key,t.key)||Xt(e.Vi,t.Vi)}static Ii(e,t){return Xt(e.Vi,t.Vi)||ze.comparator(e.key,t.key)}}class ZV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new rr(Ri.yi)}checkEmpty(e){return ye.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const l=new Fx(a,t,r,i);this.$s.push(l);for(const h of i)this.Si=this.Si.add(new Ri(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ye.resolve(l)}lookupMutationBatch(e,t){return ye.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return ye.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return ye.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ri(t,0),i=new Ri(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],l=>{const h=this.Di(l.Vi);a.push(h)}),ye.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Xt);return t.forEach(i=>{const a=new Ri(i,0),l=new Ri(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,l],h=>{r=r.add(h.Vi)})}),ye.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const l=new Ri(new ze(a),0);let h=new rr(Xt);return this.Si.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(g.Vi)),!0)},l),ye.resolve(this.xi(h))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Lt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return ye.forEach(t.mutations,i=>{const a=new Ri(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Ri(t,0),i=this.Si.firstAfterOrEqual(r);return ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ye.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class YV{constructor(e){this.ki=e,this.docs=new Fr(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():nr.newInvalidDocument(t))}getEntries(e,t){let r=$a();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():nr.newInvalidDocument(i))}),ye.resolve(r)}getAllFromCollection(e,t,r){let i=$a();const a=new ze(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:g}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||vU(yU(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return ye.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ct()}Mi(e,t){return ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new QV(this)}getSize(e){return ye.resolve(this.size)}}class QV extends BO{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),ye.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class JV{constructor(e){this.persistence=e,this.Oi=new Zd(t=>Yf(t),O0),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Fi=0,this.$i=new eR,this.targetCount=0,this.Bi=sp.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),ye.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new sp(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.In(t),ye.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Oi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ye.waitFor(a).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ye.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.$i.containsKey(t))}}class XV{constructor(e,t){this.Li={},this.overlays={},this.ts=new ia(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new JV(this),this.indexManager=new RV,this.fs=new YV(r=>this.referenceDelegate.Ui(r)),this.M=new TO(t),this.ds=new zV(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new ZV(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new e2(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return ye.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class e2 extends IO{constructor(e){super(),this.currentSequenceNumber=e}}class tR{constructor(e){this.persistence=e,this.Qi=new eR,this.ji=null}static Wi(e){return new tR(e)}get zi(){if(this.ji)return this.ji;throw ct()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.zi,r=>{const i=ze.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return ye.or([()=>ye.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function XO(n,e){return`firestore_clients_${n}_${e}`}function e1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function nR(n,e){return`firestore_targets_${n}_${e}`}class zC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new ke(i.error.code,i.error.message))),l?new zC(e,t,i.state,a):(qr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class X0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ke(r.error.code,r.error.message))),a?new X0(e,r.state,i):(qr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class KC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=kC();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=yk(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new KC(e,a):(qr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class rR{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rR(t.clientId,t.onlineState):(qr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iR{constructor(){this.activeTargetIds=kC()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sR{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Fr(Xt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=XO(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new iR),this.ar=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(XO(e.persistenceKey,i));if(a){const l=KC.Ji(i,a);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(nR(this.persistenceKey,e));if(r){const i=X0.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let l=ia.A;if(null!=a)try{const h=JSON.parse(a);Lt("number"==typeof h),l=h}catch(h){qr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==ia.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new zC(this.currentUser,e,t,r),a=e1(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=e1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=nR(this.persistenceKey,e),a=new X0(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return KC.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return zC.Ji(new Zi(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return X0.Ji(i,t)}wr(e){return rR.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),l=[],h=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||h.push(g)}),this.syncEngine.Or(l,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=kC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class t1{constructor(){this.Fr=new iR,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new iR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class t2{Br(e){}shutdown(){}}class n1{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const n2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class r2{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class i2 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const l=this.oo(e,t);je("RestConnection","Sending: ",l,r);const h={};return this.uo(h,i,a),this.ao(e,l,h,r).then(g=>(je("RestConnection","Received: ",g),g),g=>{throw S0("RestConnection",`${e} failed with error: `,g,"url: ",l,"request:",r),g})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${n2[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,l)=>{const h=new iU;h.listenOnce(tU.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case yx.NO_ERROR:const v=h.getResponseJson();je("Connection","XHR received:",JSON.stringify(v)),a(v);break;case yx.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),l(new ke(fe.DEADLINE_EXCEEDED,"Request time out"));break;case yx.HTTP_ERROR:const D=h.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const N=function(j){const Z=j.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Z)>=0?Z:fe.UNKNOWN}(S.status);l(new ke(N,S.message))}else l(new ke(fe.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new ke(fe.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);h.send(t,"POST",g,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=XF(),l=eU(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new rU({})),this.uo(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");je("Connection","Creating WebChannel: "+g,h);const v=a.createWebChannel(g,h);let D=!1,S=!1;const N=new r2({jr:Z=>{S?je("Connection","Not sending because WebChannel is closed:",Z):(D||(je("Connection","Opening WebChannel transport."),v.open(),D=!0),je("Connection","WebChannel sending:",Z),v.send(Z))},Wr:()=>v.close()}),j=(Z,Ee,Oe)=>{Z.listen(Ee,Et=>{try{Oe(Et)}catch(Qe){setTimeout(()=>{throw Qe},0)}})};return j(v,IC.EventType.OPEN,()=>{S||je("Connection","WebChannel transport opened.")}),j(v,IC.EventType.CLOSE,()=>{S||(S=!0,je("Connection","WebChannel transport closed"),N.eo())}),j(v,IC.EventType.ERROR,Z=>{S||(S=!0,S0("Connection","WebChannel transport errored:",Z),N.eo(new ke(fe.UNAVAILABLE,"The operation could not be completed")))}),j(v,IC.EventType.MESSAGE,Z=>{var Ee;if(!S){const Oe=Z.data[0];Lt(!!Oe);const Et=Oe,Qe=Et.error||(null===(Ee=Et[0])||void 0===Ee?void 0:Ee.error);if(Qe){je("Connection","WebChannel received error:",Qe);const St=Qe.status;let st=function(Vt){const _o=Kr[Vt];if(void 0!==_o)return Jk(_o)}(St),Ut=Qe.message;void 0===st&&(st=fe.INTERNAL,Ut="Unknown error status: "+St+" with message "+Qe.message),S=!0,N.eo(new ke(st,Ut)),v.close()}else je("Connection","WebChannel received:",Oe),N.no(Oe)}}),j(l,nU.STAT_EVENT,Z=>{Z.stat===lk.PROXY?je("Connection","Detected buffering proxy"):Z.stat===lk.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function r1(){return"undefined"!=typeof window?window:null}function ZC(){return"undefined"!=typeof document?document:null}function ew(n){return new qU(n,!0)}class oR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class i1{constructor(e,t,r,i,a,l,h,g){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new oR(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ve.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new ke(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ve.Z)(function*(){e.state=0,e.start()}))}qo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s2 extends i1{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function ZU(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ct(),i=e.targetChange.targetIds||[],a=function(g,v){return g.N?(Lt(void 0===v||"string"==typeof v),li.fromBase64String(v||"")):(Lt(void 0===v||v instanceof Uint8Array),li.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(g){const v=void 0===g.code?fe.UNKNOWN:Jk(g.code);return new ke(v,g.message||"")}(l);t=new tO(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=fl(n,r.document.name),a=Si(r.document.updateTime),l=new _s({mapValue:{fields:r.document.fields}}),h=nr.newFoundDocument(i,a,l);t=new OC(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=fl(n,r.document),a=r.readTime?Si(r.readTime):At.min(),l=nr.newNoDocument(i,a);t=new OC([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=fl(n,r.document);t=new OC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,a=new FU(r.count||0);t=new eO(r.targetId,a)}}var g;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?Si(a.readTime):At.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=W0(this.M),t.addTarget=function(i,a){let l;const h=a.target;return l=DC(h)?{documents:dO(i,h)}:{query:hO(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=sO(i,a.resumeToken):a.snapshotVersion.compareTo(At.min())>0&&(l.readTime=H0(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function QU(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=W0(this.M),t.removeTarget=e,this.Oo(t)}}class o2 extends i1{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function YU(n,e){return n&&n.length>0?(Lt(void 0!==e),n.map(t=>function(r,i){let a=Si(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=Si(i)),new kU(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Si(e.commitTime);return this.listener.Jo(r,t)}return Lt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=W0(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>q0(this.M,r))};this.Oo(t)}}class a2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(fe.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(fe.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class u2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(qr(t),this.su=!1):je("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class l2{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(h=>{r.enqueueAndForget((0,ve.Z)(function*(){var g;eh(l)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,ve.Z)(function*(v){const D=et(v);D.lu.add(4),yield qm(D),D._u.set("Unknown"),D.lu.delete(4),yield tw(D)}),function(v){return g.apply(this,arguments)})(l))}))}),this._u=new u2(r,i)}}function tw(n){return aR.apply(this,arguments)}function aR(){return aR=(0,ve.Z)(function*(n){if(eh(n))for(const e of n.fu)yield e(!0)}),aR.apply(this,arguments)}function qm(n){return uR.apply(this,arguments)}function uR(){return uR=(0,ve.Z)(function*(n){for(const e of n.fu)yield e(!1)}),uR.apply(this,arguments)}function YC(n,e){const t=et(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),dR(t)?cR(t):Km(t).Co()&&lR(t,e))}function nw(n,e){const t=et(n),r=Km(t);t.hu.delete(e),r.Co()&&s1(t,e),0===t.hu.size&&(r.Co()?r.ko():eh(t)&&t._u.set("Unknown"))}function lR(n,e){n.wu.Z(e.targetId),Km(n).Qo(e)}function s1(n,e){n.wu.Z(e),Km(n).jo(e)}function cR(n){n.wu=new HU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Km(n).start(),n._u.iu()}function dR(n){return eh(n)&&!Km(n).Do()&&n.hu.size>0}function eh(n){return 0===et(n).lu.size}function o1(n){n.wu=void 0}function c2(n){return hR.apply(this,arguments)}function hR(){return hR=(0,ve.Z)(function*(n){n.hu.forEach((e,t)=>{lR(n,e)})}),hR.apply(this,arguments)}function d2(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,ve.Z)(function*(n,e){o1(n),dR(n)?(n._u.uu(e),cR(n)):n._u.set("Unknown")}),fR.apply(this,arguments)}function h2(n,e,t){return pR.apply(this,arguments)}function pR(){return pR=(0,ve.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof tO&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield QC(n,r)}else if(e instanceof OC?n.wu.ut(e):e instanceof eO?n.wu._t(e):n.wu.ht(e),!t.isEqual(At.min()))try{const r=yield KO(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.wu.yt(a);return l.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.hu.get(g);v&&i.hu.set(g,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const g=i.hu.get(h);if(!g)return;i.hu.set(h,g.withResumeToken(li.EMPTY_BYTE_STRING,g.snapshotVersion)),s1(i,h);const v=new Yd(g.target,h,1,g.sequenceNumber);lR(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield QC(n,r)}var r}),pR.apply(this,arguments)}function QC(n,e,t){return gR.apply(this,arguments)}function gR(){return gR=(0,ve.Z)(function*(n,e,t){if(!ep(e))throw e;n.lu.add(1),yield qm(n),n._u.set("Offline"),t||(t=()=>KO(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield tw(n)}))}),gR.apply(this,arguments)}function a1(n,e){return e().catch(t=>QC(n,t,e))}function zm(n){return mR.apply(this,arguments)}function mR(){return mR=(0,ve.Z)(function*(n){const e=et(n),t=th(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;f2(e);)try{const i=yield GV(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,p2(e,i)}catch(i){yield QC(e,i)}u1(e)&&l1(e)}),mR.apply(this,arguments)}function f2(n){return eh(n)&&n.cu.length<10}function p2(n,e){n.cu.push(e);const t=th(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function u1(n){return eh(n)&&!th(n).Do()&&n.cu.length>0}function l1(n){th(n).start()}function g2(n){return _R.apply(this,arguments)}function _R(){return _R=(0,ve.Z)(function*(n){th(n).Xo()}),_R.apply(this,arguments)}function m2(n){return yR.apply(this,arguments)}function yR(){return yR=(0,ve.Z)(function*(n){const e=th(n);for(const t of n.cu)e.Ho(t.mutations)}),yR.apply(this,arguments)}function _2(n,e,t){return vR.apply(this,arguments)}function vR(){return vR=(0,ve.Z)(function*(n,e,t){const r=n.cu.shift(),i=Ux.from(r,e,t);yield a1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield zm(n)}),vR.apply(this,arguments)}function y2(n,e){return wR.apply(this,arguments)}function wR(){return wR=(0,ve.Z)(function*(n,e){var t;e&&th(n).zo&&(yield(t=(0,ve.Z)(function*(r,i){if(Qk(a=i.code)&&a!==fe.ABORTED){const l=r.cu.shift();th(r).No(),yield a1(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield zm(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),u1(n)&&l1(n)}),wR.apply(this,arguments)}function c1(n,e){return ER.apply(this,arguments)}function ER(){return ER=(0,ve.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=eh(t);t.lu.add(3),yield qm(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield tw(t)}),ER.apply(this,arguments)}function IR(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,ve.Z)(function*(n,e){const t=et(n);e?(t.lu.delete(2),yield tw(t)):e||(t.lu.add(2),yield qm(t),t._u.set("Unknown"))}),bR.apply(this,arguments)}function Km(n){return n.mu||(n.mu=function(e,t,r){const i=et(e);return i.tu(),new s2(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:c2.bind(null,n),Jr:d2.bind(null,n),Ko:h2.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.mu.No(),dR(n)?cR(n):n._u.set("Unknown")):(yield n.mu.stop(),o1(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function th(n){return n.gu||(n.gu=function(e,t,r){const i=et(e);return i.tu(),new o2(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:g2.bind(null,n),Jr:y2.bind(null,n),Yo:m2.bind(null,n),Jo:_2.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.gu.No(),yield zm(n)):(yield n.gu.stop(),n.cu.length>0&&(je("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class CR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new CR(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(n,e){if(qr("AsyncQueue",`${e}: ${n}`),ep(n))return new ke(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ym{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Nx(),this.sortedSet=new Fr(this.comparator)}static emptySet(e){return new Ym(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ym)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ym;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class d1{constructor(){this.yu=new Fr(ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ct():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qm{constructor(e,t,r,i,a,l,h,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new Qm(e,t,Ym.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&L0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class v2{constructor(){this.Iu=void 0,this.listeners=[]}}class w2{constructor(){this.queries=new Zd(e=>Ok(e),L0),this.onlineState="Unknown",this.Tu=new Set}}function TR(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,ve.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new v2),i)try{a.Iu=yield t.onListen(r)}catch(l){const h=Zm(l,`Initialization of query '${Ax(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&xR(t)}),DR.apply(this,arguments)}function SR(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,ve.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),AR.apply(this,arguments)}function E2(n,e){const t=et(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Au(i)&&(r=!0);l.Iu=i}}r&&xR(t)}function I2(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function xR(n){n.Tu.forEach(e=>{e.next()})}class RR{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class b2{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class h1{constructor(e){this.M=e}li(e){return fl(this.M,e)}fi(e){return e.metadata.exists?cO(this.M,e.document,!1):nr.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Si(e)}}class C2{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=f1(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=hn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new h1(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||An()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function WV(n,e,t,r){return Jx.apply(this,arguments)}(e.localStore,new h1(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield qV(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function f1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class p1{constructor(e){this.key=e}}class g1{constructor(e){this.key=e}}class m1{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=An(),this.mutatedKeys=An(),this.Lu=Fk(e),this.Uu=new Ym(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new d1,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const g=AC(this.query)&&i.size===this.query.limit?i.last():null,v=xC(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const N=i.get(D),j=xx(this.query,S)?S:null,Z=!!N&&this.mutatedKeys.has(N.key),Ee=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Oe=!1;N&&j?N.data.isEqual(j.data)?Z!==Ee&&(r.track({type:3,doc:j}),Oe=!0):this.Qu(N,j)||(r.track({type:2,doc:j}),Oe=!0,(g&&this.Lu(j,g)>0||v&&this.Lu(j,v)<0)&&(h=!0)):!N&&j?(r.track({type:0,doc:j}),Oe=!0):N&&!j&&(r.track({type:1,doc:N}),Oe=!0,(g||v)&&(h=!0)),Oe&&(j?(l=l.add(j),a=Ee?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),AC(this.query)||xC(this.query))for(;l.size>this.query.limit;){const D=AC(this.query)?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Uu:l,Ku:r,ei:h,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((v,D)=>function(S,N){const j=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return j(S)-j(N)}(v.type,D.type)||this.Lu(v.doc,D.doc)),this.ju(r);const l=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,g=h!==this.$u;return this.$u=h,0!==a.length||g?{snapshot:new Qm(this.query,e.Uu,i,a,e.mutatedKeys,0===h,g,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new d1,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=An(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new g1(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new p1(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=An();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Qm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class T2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class D2{constructor(e){this.key=e,this.Xu=!1}}class S2{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Zu={},this.ta=new Zd(h=>Ok(h),L0),this.ea=new Map,this.na=new Set,this.sa=new Fr(ze.comparator),this.ia=new Map,this.ra=new eR,this.oa={},this.ua=new Map,this.aa=sp.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function A2(n,e){return MR.apply(this,arguments)}function MR(){return MR=(0,ve.Z)(function*(n,e){const t=eM(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const l=yield Gm(t.localStore,ja(e));t.isPrimaryClient&&YC(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield NR(t,e,r,"current"===h)}return i}),MR.apply(this,arguments)}function NR(n,e,t,r){return PR.apply(this,arguments)}function PR(){return PR=(0,ve.Z)(function*(n,e,t,r){n.ha=(D,S,N)=>{return(j=(0,ve.Z)(function*(Z,Ee,Oe,Et){let Qe=Ee.view.Gu(Oe);Qe.ei&&(Qe=yield qC(Z.localStore,Ee.query,!1).then(({documents:Ut})=>Ee.view.Gu(Ut,Qe)));const St=Et&&Et.targetChanges.get(Ee.targetId),st=Ee.view.applyChanges(Qe,Z.isPrimaryClient,St);return HR(Z,Ee.targetId,st.zu),st.snapshot}),function(Z,Ee,Oe,Et){return j.apply(this,arguments)})(n,D,S,N);var j};const i=yield qC(n.localStore,e,!0),a=new m1(e,i.hi),l=a.Gu(i.documents),h=$0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=a.applyChanges(l,n.isPrimaryClient,h);HR(n,t,g.zu);const v=new T2(e,t,a);return n.ta.set(e,v),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),g.snapshot}),PR.apply(this,arguments)}function x2(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,ve.Z)(function*(n,e){const t=et(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!L0(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),nw(t.remoteStore,r.targetId),Jm(t,r.targetId)}).catch(op))):(Jm(t,r.targetId),yield Wm(t.localStore,r.targetId,!0))}),kR.apply(this,arguments)}function OR(){return OR=(0,ve.Z)(function*(n,e,t){const r=tM(n);try{const i=yield function(a,l){const h=et(a),g=Lr.now(),v=l.reduce((S,N)=>S.add(N.key),An());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.ai.qs(S,v).next(N=>{D=N;const j=[];for(const Z of l){const Ee=LU(Z,D.get(Z.key));null!=Ee&&j.push(new Xf(Z.key,Ee,Sk(Ee.value.mapValue),zr.exists(!0)))}return h.$s.addMutationBatch(S,g,j,l)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let g=a.oa[a.currentUser.toKey()];g||(g=new Fr(Xt)),g=g.insert(l,h),a.oa[a.currentUser.toKey()]=g}(r,i.batchId,t),yield Tc(r,i.changes),yield zm(r.remoteStore)}catch(i){const a=Zm(i,"Failed to persist write");t.reject(a)}}),OR.apply(this,arguments)}function _1(n,e){return LR.apply(this,arguments)}function LR(){return LR=(0,ve.Z)(function*(n,e){const t=et(n);try{const r=yield HV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ia.get(a);l&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Xu=!0:i.modifiedDocuments.size>0?Lt(l.Xu):i.removedDocuments.size>0&&(Lt(l.Xu),l.Xu=!1))}),yield Tc(t,r,e)}catch(r){yield op(r)}}),LR.apply(this,arguments)}function y1(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,l)=>{const h=l.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=et(a);h.onlineState=l;let g=!1;h.queries.forEach((v,D)=>{for(const S of D.listeners)S.Eu(l)&&(g=!0)}),g&&xR(h)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function M2(n,e,t){return FR.apply(this,arguments)}function FR(){return FR=(0,ve.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let l=new Fr(ze.comparator);l=l.insert(a,nr.newNoDocument(a,At.min()));const h=An().add(a),g=new j0(At.min(),new Map,new rr(Xt),l,h);yield _1(r,g),r.sa=r.sa.remove(a),r.ia.delete(e),GR(r)}else yield Wm(r.localStore,e,!1).then(()=>Jm(r,e,t)).catch(op)}),FR.apply(this,arguments)}function N2(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,ve.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield $V(t.localStore,e);$R(t,r,null),jR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Tc(t,i)}catch(i){yield op(i)}}),UR.apply(this,arguments)}function P2(n,e,t){return VR.apply(this,arguments)}function VR(){return VR=(0,ve.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(a,l){const h=et(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return h.$s.lookupMutationBatch(g,l).next(D=>(Lt(null!==D),v=D.keys(),h.$s.removeMutationBatch(g,D))).next(()=>h.$s.performConsistencyCheck(g)).next(()=>h.ai.qs(g,v))})}(r.localStore,e);$R(r,e,t),jR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Tc(r,i)}catch(i){yield op(i)}}),VR.apply(this,arguments)}function BR(){return BR=(0,ve.Z)(function*(n,e){const t=et(n);eh(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=et(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.$s.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=Zm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),BR.apply(this,arguments)}function jR(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function $R(n,e,t){const r=et(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||v1(n,r)})}function v1(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(nw(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),GR(n))}function HR(n,e,t){for(const r of t)r instanceof p1?(n.ra.addReference(r.key,e),O2(n,r)):r instanceof g1?(je("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||v1(n,r.key)):ct()}function O2(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(je("SyncEngine","New document in limbo: "+t),n.na.add(r),GR(n))}function GR(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new ze(hn.fromString(e)),r=n.aa.next();n.ia.set(r,new D2(t)),n.sa=n.sa.insert(t,r),YC(n.remoteStore,new Yd(ja(Pm(t.path)),r,2,ia.A))}}function Tc(n,e,t){return WR.apply(this,arguments)}function WR(){return WR=(0,ve.Z)(function*(n,e,t){const r=et(n),i=[],a=[],l=[];var h;r.ta.isEmpty()||(r.ta.forEach((h,g)=>{l.push(r.ha(g,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v.fromCache?"not-current":"current"),i.push(v);const D=Zx.Js(g.targetId,v);a.push(D)}}))}),yield Promise.all(l),r.Zu.Ko(i),yield(h=(0,ve.Z)(function*(g,v){const D=et(g);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ye.forEach(v,N=>ye.forEach(N.zs,j=>D.persistence.referenceDelegate.addReference(S,N.targetId,j)).next(()=>ye.forEach(N.Hs,j=>D.persistence.referenceDelegate.removeReference(S,N.targetId,j)))))}catch(S){if(!ep(S))throw S;je("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const N=S.targetId;if(!S.fromCache){const j=D.si.get(N),Ee=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);D.si=D.si.insert(N,Ee)}}}),function(g,v){return h.apply(this,arguments)})(r.localStore,a))}),WR.apply(this,arguments)}function L2(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,ve.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield zO(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(l=>{l.forEach(h=>{h.reject(new ke(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tc(t,r.ci)}var i}),qR.apply(this,arguments)}function F2(n,e){const t=et(n),r=t.ia.get(e);if(r&&r.Xu)return An().add(r.key);{let i=An();const a=t.ea.get(e);if(!a)return i;for(const l of a){const h=t.ta.get(l);i=i.unionWith(h.view.qu)}return i}}function U2(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,ve.Z)(function*(n,e){const t=et(n),r=yield qC(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&HR(t,e.targetId,i.zu),i}),zR.apply(this,arguments)}function V2(n,e){return KR.apply(this,arguments)}function KR(){return KR=(0,ve.Z)(function*(n,e){const t=et(n);return QO(t.localStore,e).then(r=>Tc(t,r))}),KR.apply(this,arguments)}function B2(n,e,t,r){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,ve.Z)(function*(n,e,t,r){const i=et(n),a=yield function(l,h){const g=et(l),v=et(g.$s);return g.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.ln(D,h).next(S=>S?g.ai.qs(D,S):ye.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield zm(i.remoteStore):"acknowledged"===t||"rejected"===t?($R(i,e,r||null),jR(i,e),h=e,et(et(i.localStore).$s).dn(h)):ct(),yield Tc(i,a)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),ZR.apply(this,arguments)}function YR(){return YR=(0,ve.Z)(function*(n,e){const t=et(n);if(eM(t),tM(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield w1(t,r.toArray());t.ca=!0,yield IR(t.remoteStore,!0);for(const a of i)YC(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Jm(t,l),Wm(t.localStore,l,!0))),nw(t.remoteStore,l)}),yield i,yield w1(t,r),function(a){const l=et(a);l.ia.forEach((h,g)=>{nw(l.remoteStore,g)}),l.ra.bi(),l.ia=new Map,l.sa=new Fr(ze.comparator)}(t),t.ca=!1,yield IR(t.remoteStore,!1)}}),YR.apply(this,arguments)}function w1(n,e,t){return QR.apply(this,arguments)}function QR(){return QR=(0,ve.Z)(function*(n,e,t){const r=et(n),i=[],a=[];for(const l of e){let h;const g=r.ea.get(l);if(g&&0!==g.length){h=yield Gm(r.localStore,ja(g[0]));for(const v of g){const D=r.ta.get(v),S=yield U2(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield YO(r.localStore,l);h=yield Gm(r.localStore,v),yield NR(r,E1(v),l,!1)}i.push(h)}return r.Zu.Ko(a),i}),QR.apply(this,arguments)}function E1(n){return Pk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $2(n){const e=et(n);return et(et(e.localStore).persistence).Os()}function H2(n,e,t,r){return JR.apply(this,arguments)}function JR(){return JR=(0,ve.Z)(function*(n,e,t,r){const i=et(n);if(i.ca)return void je("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield QO(i.localStore,Lk(a[0])),h=j0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Tc(i,l,h);break}case"rejected":yield Wm(i.localStore,e,!0),Jm(i,e,r);break;default:ct()}}),JR.apply(this,arguments)}function G2(n,e,t){return XR.apply(this,arguments)}function XR(){return XR=(0,ve.Z)(function*(n,e,t){const r=eM(n);if(r.ca){for(const i of e){if(r.ea.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const a=yield YO(r.localStore,i),l=yield Gm(r.localStore,a);yield NR(r,E1(a),l.targetId,!1),YC(r.remoteStore,l)}for(const i of t)r.ea.has(i)&&(yield Wm(r.localStore,i,!1).then(()=>{nw(r.remoteStore,i),Jm(r,i)}).catch(op))}}),XR.apply(this,arguments)}function eM(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M2.bind(null,e),e.Zu.Ko=E2.bind(null,e.eventManager),e.Zu.la=I2.bind(null,e.eventManager),e}function tM(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P2.bind(null,e),e}class I1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=ew(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return qO(this.persistence,new WO,e.initialUser,this.M)}_a(e){return new XV(tR.Wi,this.M)}da(e){return new t1}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class b1 extends I1{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield tM(r.ga.syncEngine),yield zm(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return qO(this.persistence,new WO,e.initialUser,this.M)}wa(e){return new kV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Kx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?mo.withCacheSize(this.cacheSizeBytes):mo.DEFAULT;return new zx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,r1(),ZC(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new t1}}class q2 extends b1{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof sR&&(r.sharedClientState.syncEngine={kr:B2.bind(null,i),Mr:H2.bind(null,i),Or:G2.bind(null,i),Os:$2.bind(null,i),Nr:V2.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,ve.Z)(function*(l){yield function j2(n,e){return YR.apply(this,arguments)}(r.ga.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}da(e){const t=r1();if(!sR.vt(t))throw new ke(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Kx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class nM{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>y1(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=L2.bind(null,r.syncEngine),yield IR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new w2}createDatastore(e){const t=ew(e.databaseInfo.databaseId),r=new i2(e.databaseInfo);return new a2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>y1(this.syncEngine,h,0),l=n1.vt()?new n1:new t2,new l2(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,g,v){const D=new S2(r,i,a,l,h,g);return v&&(D.ca=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=et(t);je("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield qm(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function C1(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class JC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class z2{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Ti,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new b2(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ve.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class K2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,l){const h=et(a),g=W0(h.M)+"/documents",v={documents:l.map(j=>G0(h.M,j))},D=yield h.co("BatchGetDocuments",g,v),S=new Map;D.forEach(j=>{const Z=function KU(n,e){return"found"in e?function(t,r){Lt(!!r.found);const i=fl(t,r.found.name),a=Si(r.found.updateTime),l=new _s({mapValue:{fields:r.found.fields}});return nr.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Lt(!!r.missing),Lt(!!r.readTime);const i=fl(t,r.missing),a=Si(r.readTime);return nr.newNoDocument(i,a)}(n,e):ct()}(h.M,j);S.set(Z.key.toString(),Z)});const N=[];return l.forEach(j=>{const Z=S.get(j.toString());Lt(!!Z),N.push(Z)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new V0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ze.fromPath(i);e.mutations.push(new Mx(a,e.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const l=et(i),h=W0(l.M)+"/documents",g={writes:a.map(v=>q0(l.M,v))};yield l.ro("Commit",h,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?zr.updateTime(t):zr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new ke(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zr.updateTime(t)}return zr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Z2{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new oR(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ve.Z)(function*(){const t=new K2(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!Kf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Qk(t)}return!1}}class Y2{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Zi.UNAUTHENTICATED,this.clientId=fk.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(je("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function T1(n,e){return rM.apply(this,arguments)}function rM(){return rM=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield zO(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),rM.apply(this,arguments)}function D1(n,e){return iM.apply(this,arguments)}function iM(){return iM=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield sM(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>c1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>c1(e.remoteStore,a)),n.onlineComponents=e}),iM.apply(this,arguments)}function sM(n){return oM.apply(this,arguments)}function oM(){return oM=(0,ve.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield T1(n,new I1)),n.offlineComponents}),oM.apply(this,arguments)}function XC(n){return aM.apply(this,arguments)}function aM(){return aM=(0,ve.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield D1(n,new nM)),n.onlineComponents}),aM.apply(this,arguments)}function S1(n){return sM(n).then(e=>e.persistence)}function uM(n){return sM(n).then(e=>e.localStore)}function A1(n){return XC(n).then(e=>e.remoteStore)}function lM(n){return XC(n).then(e=>e.syncEngine)}function Xm(n){return cM.apply(this,arguments)}function cM(){return cM=(0,ve.Z)(function*(n){const e=yield XC(n),t=e.eventManager;return t.onListen=A2.bind(null,e.syncEngine),t.onUnlisten=x2.bind(null,e.syncEngine),t}),cM.apply(this,arguments)}function x1(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,h,g){const v=new JC({next:S=>{a.enqueueAndForget(()=>SR(i,D));const N=S.docs.has(l);!N&&S.fromCache?g.reject(new ke(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?g.reject(new ke(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),D=new RR(Pm(l.path),v,{includeMetadataChanges:!0,Du:!0});return TR(i,D)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}function R1(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,l,h,g){const v=new JC({next:S=>{a.enqueueAndForget(()=>SR(i,D)),S.fromCache&&"server"===h.source?g.reject(new ke(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),D=new RR(l,v,{includeMetadataChanges:!0,Du:!0});return TR(i,D)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}const M1=new Map;function dM(n,e,t){if(!t)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function N1(n,e,t,r){if(!0===e&&!0===r)throw new ke(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function P1(n){if(!ze.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function k1(n){if(ze.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eT(n);throw new ke(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function O1(n,e){if(e<=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class L1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,N1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L1({}),this._settingsFrozen=!1,e instanceof Ic?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ke(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ic(i.options.projectId)}(e))}get app(){if(!this._app)throw new ke(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L1(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new aU;switch(t.type){case"gapi":const r=t.client;return Lt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new dU(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=M1.get(e);t&&(je("ComponentProvider","Removing Datastore"),M1.delete(e),t.terminate())}(this),Promise.resolve()}}class ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class ys{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ys(this.firestore,e,this._query)}}class pl extends ys{constructor(e,t,r){super(e,t,Pm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new ze(e))}withConverter(e){return new pl(this.firestore,e,this._path)}}function F1(n,e,...t){if(n=(0,k.m9)(n),dM("collection","path",e),n instanceof rw){const r=hn.fromString(e,...t);return k1(r),new pl(n,null,r)}{if(!(n instanceof ir||n instanceof pl))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return k1(r),new pl(n.firestore,null,r)}}function tT(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=fk.R()),dM("doc","path",e),n instanceof rw){const r=hn.fromString(e,...t);return P1(r),new ir(n,null,new ze(r))}{if(!(n instanceof ir||n instanceof pl))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return P1(r),new ir(n.firestore,n instanceof pl?n.converter:null,new ze(r))}}function U1(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof ir||n instanceof pl)&&(e instanceof ir||e instanceof pl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function V1(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof ys&&e instanceof ys&&n.firestore===e.firestore&&L0(n._query,e._query)&&n.converter===e.converter}class aB{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new oR(this,"async_queue_retry"),this.Ua=()=>{const t=ZC();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=ZC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=ZC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Ti;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ve.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!ep(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,qr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=CR.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&ct()}verifyOperationInProgress(){}ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function hM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class uB{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hr extends rw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new aB,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||B1(this),this._firestoreClient.terminate()}}function Zr(n){return n._firestoreClient||B1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function B1(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _U(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new Y2(n._authCredentials,n._appCheckCredentials,n._queue,r)}function j1(n,e,t){const r=new Ti;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield T1(n,t),yield D1(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===fe.FAILED_PRECONDITION||a.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function $1(n){if(n._initialized||n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Dc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gl(li.fromBase64String(e))}catch(t){throw new ke(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gl(li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class up{constructor(e){this._methodName=e}}class nT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}const yB=/^__.*__$/;class vB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xf(e,this.data,this.fieldMask,t,this.fieldTransforms):new U0(e,this.data,t,this.fieldTransforms)}}class H1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function G1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class rT{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new rT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return oT(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(G1(this.Ya)&&yB.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class wB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||ew(e)}uc(e,t,r,i=!1){return new rT({Ya:e,methodName:t,oc:r,path:Di.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function lp(n){const e=n._freezeSettings(),t=ew(n._databaseId);return new wB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iT(n,e,t,r,i,a={}){const l=n.uc(a.merge||a.mergeFields?2:0,e,t,i);mM("Data must be an object, but it was:",l,r);const h=z1(r,l);let g,v;if(a.merge)g=new Am(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const N=_M(e,S,t);if(!l.contains(N))throw new ke(fe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Z1(D,N)||D.push(N)}g=new Am(D),v=l.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,v=l.fieldTransforms;return new vB(new _s(h),g,v)}class iw extends up{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof iw}}function W1(n,e,t){return new rT({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class fM extends up{_toFieldTransform(e){return new F0(e.path,new Om)}isEqual(e){return e instanceof fM}}class EB extends up{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=W1(this,e,!0),r=this.ac.map(a=>cp(a,t)),i=new Qf(r);return new F0(e.path,i)}isEqual(e){return this===e}}class IB extends up{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=W1(this,e,!0),r=this.ac.map(a=>cp(a,t)),i=new Jf(r);return new F0(e.path,i)}isEqual(e){return this===e}}class bB extends up{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Lm(e.M,Bk(e.M,this.cc));return new F0(e.path,t)}isEqual(e){return this===e}}function pM(n,e,t,r){const i=n.uc(1,e,t);mM("Data must be an object, but it was:",i,r);const a=[],l=_s.empty();qf(r,(g,v)=>{const D=sT(e,g,t);v=(0,k.m9)(v);const S=i.nc(D);if(v instanceof iw)a.push(D);else{const N=cp(v,S);null!=N&&(a.push(D),l.set(D,N))}});const h=new Am(a);return new H1(l,h,i.fieldTransforms)}function gM(n,e,t,r,i,a){const l=n.uc(1,e,t),h=[_M(e,r,t)],g=[i];if(a.length%2!=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(_M(e,a[N])),g.push(a[N+1]);const v=[],D=_s.empty();for(let N=h.length-1;N>=0;--N)if(!Z1(v,h[N])){const j=h[N];let Z=g[N];Z=(0,k.m9)(Z);const Ee=l.nc(j);if(Z instanceof iw)v.push(j);else{const Oe=cp(Z,Ee);null!=Oe&&(v.push(j),D.set(j,Oe))}}const S=new Am(v);return new H1(D,S,l.fieldTransforms)}function q1(n,e,t,r=!1){return cp(t,n.uc(r?4:3,e))}function cp(n,e){if(K1(n=(0,k.m9)(n)))return mM("Unsupported field value:",e,n),z1(n,e);if(n instanceof up)return function(t,r){if(!G1(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=cp(l,r.sc(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bk(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Lr.fromDate(t);return{timestampValue:H0(r.M,i)}}if(t instanceof Lr){const i=new Lr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:H0(r.M,i)}}if(t instanceof nT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gl)return{bytesValue:sO(r.M,t._byteString)};if(t instanceof ir){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Px(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${eT(t)}`)}(n,e)}function z1(n,e){const t={};return mk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qf(n,(r,i)=>{const a=cp(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function K1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Lr||n instanceof nT||n instanceof gl||n instanceof ir||n instanceof up)}function mM(n,e,t){if(!K1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=eT(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function _M(n,e,t){if((e=(0,k.m9)(e))instanceof Dc)return e._internalPath;if("string"==typeof e)return sT(n,e);throw oT("Field path arguments must be of type string or ",n,!1,void 0,t)}const CB=new RegExp("[~\\*/\\[\\]]");function sT(n,e,t){if(e.search(CB)>=0)throw oT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dc(...e.split("."))._internalPath}catch(r){throw oT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function oT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new ke(fe.INVALID_ARGUMENT,h+n+g)}function Z1(n,e){return n.some(t=>t.isEqual(e))}class sw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TB extends sw{data(){return super.data()}}function aT(n,e){return"string"==typeof e?sT(n,e):e instanceof Dc?e._internalPath:e._delegate._internalPath}class dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sc extends sw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ow(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(aT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ow extends Sc{data(e={}){return super.data(e)}}class nh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ow(this._firestore,this._userDataWriter,r.key,r,new dp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new ow(r._firestore,r._userDataWriter,l.doc.key,l.doc,new dp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new ow(r._firestore,r._userDataWriter,l.doc.key,l.doc,new dp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:DB(l.type),doc:h,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function Y1(n,e){return n instanceof Sc&&e instanceof Sc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof nh&&e instanceof nh&&n._firestore===e._firestore&&V1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Q1(n){if(xC(n)&&0===n.explicitOrderBy.length)throw new ke(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aw{}function rh(n,...e){for(const t of e)n=t._apply(n);return n}class SB extends aw{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=lp(e.firestore),r=function(i,a,l,h,g,v,D){let S;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){rL(D,v);const j=[];for(const Z of D)j.push(nL(h,i,Z));S={arrayValue:{values:j}}}else S=nL(h,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||rL(D,v),S=q1(l,"where",D,"in"===v||"not-in"===v);const N=Yi.create(g,v,S);return function(j,Z){if(Z.S()){const Oe=Dx(j);if(null!==Oe&&!Oe.isEqual(Z.field))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Oe.toString()}' and '${Z.field.toString()}'`);const Et=Tx(j);null!==Et&&iL(0,Z.field,Et)}const Ee=function(Oe,Et){for(const Qe of Oe.filters)if(Et.indexOf(Qe.op)>=0)return Qe.op;return null}(j,function(Oe){switch(Oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==Ee)throw new ke(fe.INVALID_ARGUMENT,Ee===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${Ee.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new ys(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new Cc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class xB extends aw{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Nm(i,a);return function(h,g){if(null===Tx(h)){const v=Dx(h);null!==v&&iL(0,v,g.field)}}(r,l),l}(e._query,this.hc,this.dc);return new ys(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Cc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class J1 extends aw{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new ys(e.firestore,e.converter,kk(e._query,this._c,this.wc))}}class X1 extends aw{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=tL(e,this.type,this.mc,this.gc);return new ys(e.firestore,e.converter,(i=t,new Cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class eL extends aw{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=tL(e,this.type,this.mc,this.gc);return new ys(e.firestore,e.converter,(i=t,new Cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function tL(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof sw)return function(i,a,l,h,g){if(!h)throw new ke(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of km(i))if(D.field.isKeyField())v.push(Rm(a,h.key));else{const S=h.data.field(D.field);if(Ex(S))throw new ke(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=D.field.canonicalString();throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(S)}return new Kd(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=lp(n.firestore);return function(a,l,h,g,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new ke(fe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let j=0;j<v.length;j++){const Z=v[j];if(S[j].field.isKeyField()){if("string"!=typeof Z)throw new ke(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof Z}`);if(!Sx(a)&&-1!==Z.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${Z}' contains a slash.`);const Ee=a.path.child(hn.fromString(Z));if(!ze.isDocumentKey(Ee))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Ee}' is not because it contains an odd number of segments.`);const Oe=new ze(Ee);N.push(Rm(l,Oe))}else{const Ee=q1(h,g,Z);N.push(Ee)}}return new Kd(N,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function nL(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sx(e)&&-1!==t.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(hn.fromString(t));if(!ze.isDocumentKey(r))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rm(n,new ze(r))}if(t instanceof ir)return Rm(n,t._key);throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eT(t)}.`)}function rL(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function iL(n,e,t){if(!t.isEqual(e))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yM{convertValue(e,t="none"){switch(Zf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return qf(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new nT(Dr(e.latitude),Dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_k(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(x0(e));default:return null}}convertTimestamp(e){const t=qd(e);return new Lr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=hn.fromString(e);Lt(gO(r));const i=new Ic(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(t)||qr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function uT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class FB extends yM{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}class sL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lp(e)}set(e,t,r){this._verifyNotCommitted();const i=ih(e,this._firestore),a=uT(i.converter,t,r),l=iT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,zr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=ih(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Dc?gM(this._dataReader,"WriteBatch.update",a._key,t,r,i):pM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,zr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ih(e,this._firestore);return this._mutations=this._mutations.concat(new V0(t._key,zr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ih(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new ke(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hp extends yM{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}function oL(n,e,t){n=on(n,ir);const r=on(n.firestore,hr),i=uT(n.converter,e,t);return e_(r,[iT(lp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,zr.none())])}function aL(n,e,t,...r){n=on(n,ir);const i=on(n.firestore,hr),a=lp(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Dc?gM(a,"updateDoc",n._key,e,t,r):pM(a,"updateDoc",n._key,e),e_(i,[l.toMutation(n._key,zr.exists(!0))])}function uL(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||hM(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(hM(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,v,D;if(n instanceof ir)v=on(n.firestore,hr),D=Pm(n._key.path),g={next:S=>{e[l]&&e[l](vM(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=on(n,ys);v=on(S.firestore,hr),D=S._query;const N=new hp(v);g={next:j=>{e[l]&&e[l](new nh(v,N,S,j))},error:e[l+1],complete:e[l+2]},Q1(n._query)}return function(S,N,j,Z){const Ee=new JC(Z),Oe=new RR(N,Ee,j);return S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return TR(yield Xm(S),Oe)})),()=>{Ee.pa(),S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return SR(yield Xm(S),Oe)}))}}(Zr(v),D,h,g)}function e_(n,e){return function(t,r){const i=new Ti;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function R2(n,e,t){return OR.apply(this,arguments)}(yield lM(t),r,i)})),i.promise}(Zr(n),e)}function vM(n,e,t){const r=t.docs.get(e._key),i=new hp(n);return new Sc(n,i,e._key,r,new dp(t.hasPendingWrites,t.fromCache),e.converter)}class zB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lp(e)}get(e){const t=ih(e,this._firestore),r=new FB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new sw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new sw(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=ih(e,this._firestore),a=uT(i.converter,t,r),l=iT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=ih(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Dc?gM(this._dataReader,"Transaction.update",a._key,t,r,i):pM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ih(e,this._firestore),r=new hp(this._firestore);return super.get(e).then(i=>new Sc(this._firestore,r,t._key,i._document,new dp(!1,!1),t.converter))}}function wM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function cL(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function dL(){if(!function gU(){return"undefined"!=typeof atob}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Dm=wi.SDK_VERSION,(0,wi._registerComponent)(new mr.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new hr(i,new lU(t.getProvider("auth-internal")),new hU(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,wi.registerVersion)(ck,"3.4.7",n),(0,wi.registerVersion)(ck,"3.4.7","esm2017")}();class uw{constructor(e){this._delegate=e}static fromBase64String(e){return dL(),new uw(gl.fromBase64String(e))}static fromUint8Array(e){return cL(),new uw(gl.fromUint8Array(e))}toBase64(){return dL(),this._delegate.toBase64()}toUint8Array(){return cL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function EM(n){return function nj(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rj{enableIndexedDbPersistence(e,t){return function cB(n,e){$1(n=on(n,hr));const t=Zr(n),r=n._freezeSettings(),i=new nM;return j1(t,i,new b1(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dB(n){$1(n=on(n,hr));const e=Zr(n),t=n._freezeSettings(),r=new nM;return j1(e,r,new q2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hB(n){if(n._initialized&&!n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ti;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Su.vt())return Promise.resolve();const i=r+"main";yield Su.delete(i)}),function(r){return t.apply(this,arguments)})(Kx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class hL{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ic||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&S0("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function sB(n,e,t,r={}){var i;const a=(n=on(n,rw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&S0("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Zi.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ke(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Zi(g)}n._authCredentials=new uU(new dk(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function pB(n){return function Q2(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield S1(n),t=yield A1(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i.lu.delete(0),tw(i)}(t)}))}(Zr(n=on(n,hr)))}(this._delegate)}disableNetwork(){return function gB(n){return function J2(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield S1(n),t=yield A1(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=et(i);a.lu.add(0),yield qm(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Zr(n=on(n,hr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,N1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fB(n){return function(e){const t=new Ti;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function k2(n,e){return BR.apply(this,arguments)}(yield lM(e),t)})),t.promise}(Zr(n=on(n,hr)))}(this._delegate)}onSnapshotsInSync(e){return function qB(n,e){return function tB(n,e){const t=new JC(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Xm(n),i=t,et(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Xm(n),i=t,void et(r).Tu.delete(i);var r,i}))}}(Zr(n=on(n,hr)),hM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new t_(this,F1(this._delegate,e))}catch(t){throw Bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ha(this,tT(this._delegate,e))}catch(t){throw Bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new js(this,function oB(n,e){if(n=on(n,rw),dM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ys(n,null,(t=e,new Cc(hn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function KB(n,e){return function nB(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,XC(i).then(a=>a.datastore));var i;new Z2(n.asyncQueue,r,e,t).run()})),t.promise}(Zr(n=on(n,hr)),t=>e(new zB(n,t)))}(this._delegate,t=>e(new fL(this,t)))}batch(){return Zr(this._delegate),new pL(new sL(this._delegate,e=>e_(this._delegate,e)))}loadBundle(e){return function mB(n,e){const t=Zr(n=on(n,hr)),r=new uB;return function rB(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return C1(g,v);if(g instanceof ArrayBuffer)return C1(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new z2(g,l);var g}(t,ew(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function W2(n,e,t){const r=et(n);var i;(i=(0,ve.Z)(function*(a,l,h){try{const g=yield l.getMetadata();if(yield function(N,j){const Z=et(N),Ee=Si(j.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Oe=>Z.ds.getBundleMetadata(Oe,j.id)).then(Oe=>!!Oe&&Oe.createTime.compareTo(Ee)>=0)}(a.localStore,g))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=g).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(f1(g));const v=new C2(g,a.localStore,l.M);let D=yield l.fa();for(;D;){const N=yield v.Nu(D);N&&h._updateProgress(N),D=yield l.fa()}const S=yield v.complete();return yield Tc(a,S.Ou,void 0),yield function(N,j){const Z=et(N);return Z.persistence.runTransaction("Save bundle","readwrite",Ee=>Z.ds.saveBundleMetadata(Ee,j))}(a.localStore,g),h._completeWith(S.progress),Promise.resolve(S.Mu)}catch(g){return S0("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var N}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield lM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _B(n,e){return function iB(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield uM(n),e)}))}(Zr(n=on(n,hr)),e).then(t=>t?new ys(n,null,t.query):null)}(this._delegate,e).then(t=>t?new js(this,t):null)}}class lT extends yM{constructor(e){super(),this.firestore=e}convertBytes(e){return new uw(new gl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ha.forKey(t,this.firestore,null)}}class fL{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lT(e)}get(e){const t=pp(e);return this._delegate.get(t).then(r=>new lw(this._firestore,new Sc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=pp(e);return r?(wM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=pp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=pp(e);return this._delegate.delete(t),this}}class pL{constructor(e){this._delegate=e}set(e,t,r){const i=pp(e);return r?(wM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=pp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=pp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class fp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ow(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=fp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new fp(e,new lT(e),t),i.set(t,a)),a}}fp.INSTANCES=new WeakMap;class Ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ha(t,new ir(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new Ha(t,new ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new t_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new t_(this.firestore,F1(this._delegate,e))}catch(t){throw Bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof ir&&U1(this._delegate,e)}set(e,t){t=wM("DocumentReference.set",t);try{return t?oL(this._delegate,e,t):oL(this._delegate,e)}catch(r){throw Bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?aL(this._delegate,e):aL(this._delegate,e,t,...r)}catch(i){throw Bs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function GB(n){return e_(on(n.firestore,hr),[new V0(n._key,zr.none())])}(this._delegate)}onSnapshot(...e){const t=gL(e),r=mL(e,i=>new lw(this.firestore,new Sc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return uL(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function VB(n){n=on(n,ir);const e=on(n.firestore,hr),t=Zr(e),r=new hp(e);return function X2(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const h=yield function(g,v){const D=et(g);return D.persistence.runTransaction("read document","readonly",S=>D.ai.Bs(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new ke(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=Zm(h,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield uM(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Sc(e,r,n._key,i,new dp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function BB(n){n=on(n,ir);const e=on(n.firestore,hr);return x1(Zr(e),n._key,{source:"server"}).then(t=>vM(e,n,t))}(this._delegate):function UB(n){n=on(n,ir);const e=on(n.firestore,hr);return x1(Zr(e),n._key).then(t=>vM(e,n,t))}(this._delegate),t.then(r=>new lw(this.firestore,new Sc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ha(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}function Bs(n,e,t){return n.message=n.message.replace(e,t),n}function gL(n){for(const e of n)if("object"==typeof e&&!EM(e))return e;return{}}function mL(n,e){var t,r;let i;return i=EM(n[0])?n[0]:EM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class lw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Y1(this._delegate,e._delegate)}}class cw extends lw{data(e){const t=this._delegate.data(e);return function oU(n,e){n||ct()}(void 0!==t),t}}class js{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lT(e)}where(e,t,r){try{return new js(this.firestore,rh(this._delegate,function AB(n,e,t){const r=e,i=aT("where",n);return new SB(i,r,t)}(e,t,r)))}catch(i){throw Bs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new js(this.firestore,rh(this._delegate,function RB(n,e="asc"){const t=e,r=aT("orderBy",n);return new xB(r,t)}(e,t)))}catch(r){throw Bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new js(this.firestore,rh(this._delegate,function MB(n){return O1("limit",n),new J1("limit",n,"F")}(e)))}catch(t){throw Bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new js(this.firestore,rh(this._delegate,function NB(n){return O1("limitToLast",n),new J1("limitToLast",n,"L")}(e)))}catch(t){throw Bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new js(this.firestore,rh(this._delegate,function PB(...n){return new X1("startAt",n,!0)}(...e)))}catch(t){throw Bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new js(this.firestore,rh(this._delegate,function kB(...n){return new X1("startAfter",n,!1)}(...e)))}catch(t){throw Bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new js(this.firestore,rh(this._delegate,function OB(...n){return new eL("endBefore",n,!1)}(...e)))}catch(t){throw Bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new js(this.firestore,rh(this._delegate,function LB(...n){return new eL("endAt",n,!0)}(...e)))}catch(t){throw Bs(t,"endAt()","Query.endAt()")}}isEqual(e){return V1(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function $B(n){n=on(n,ys);const e=on(n.firestore,hr),t=Zr(e),r=new hp(e);return function eB(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,l){try{const h=yield qC(i,a,!0),g=new m1(a,h.hi),v=g.Gu(h.documents),D=g.applyChanges(v,!1);l.resolve(D.snapshot)}catch(h){const g=Zm(h,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield uM(n),e,t);var r})),t.promise}(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function HB(n){n=on(n,ys);const e=on(n.firestore,hr),t=Zr(e),r=new hp(e);return R1(t,n._query,{source:"server"}).then(i=>new nh(e,r,n,i))}(this._delegate):function jB(n){n=on(n,ys);const e=on(n.firestore,hr),t=Zr(e),r=new hp(e);return Q1(n._query),R1(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate),t.then(r=>new IM(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=gL(e),r=mL(e,i=>new IM(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return uL(this._delegate,t,r)}withConverter(e){return new js(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}class sj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class IM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new js(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new cw(this._firestore,r))})}isEqual(e){return Y1(this._delegate,e._delegate)}}class t_ extends js{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ha(this.firestore,e):null}doc(e){try{return new Ha(this.firestore,void 0===e?tT(this._delegate):tT(this._delegate,e))}catch(t){throw Bs(t,"doc()","CollectionReference.doc()")}}add(e){return function WB(n,e){const t=on(n.firestore,hr),r=tT(n),i=uT(n.converter,e);return e_(t,[iT(lp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,zr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ha(this.firestore,t))}isEqual(e){return U1(this._delegate,e._delegate)}withConverter(e){return new t_(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}function pp(n){return on(n,ir)}class bM{constructor(...e){this._delegate=new Dc(...e)}static documentId(){return new bM(Di.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Dc&&this._delegate._internalPath.isEqual(e._internalPath)}}class gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YB(){return new fM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gp(e)}static delete(){const e=function ZB(){return new iw("deleteField")}();return e._methodName="FieldValue.delete",new gp(e)}static arrayUnion(...e){const t=function QB(...n){return new EB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gp(t)}static arrayRemove(...e){const t=function JB(...n){return new IB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gp(t)}static increment(e){const t=function XB(n){return new bB("increment",n)}(e);return t._methodName="FieldValue.increment",new gp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oj={Firestore:hL,GeoPoint:nT,Timestamp:Lr,Blob:uw,Transaction:fL,WriteBatch:pL,DocumentReference:Ha,DocumentSnapshot:lw,Query:js,QueryDocumentSnapshot:cw,QuerySnapshot:IM,CollectionReference:t_,FieldPath:bM,FieldValue:gp,setLogLevel:function ij(n){!function sU(n){Wd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function _L(n,e){return function lj(n,e=Wp.z){return new ur.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function CM(n,e){return _L(n,e).pipe((0,xt.U)(t=>({payload:t,type:"query"})))}function cT(n,e){return CM(n,e).pipe(Fi(void 0),SA(),(0,xt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const g=i.find(D=>D.doc.ref.isEqual(l.ref)),v=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function yL(n,e,t){return cT(n,t).pipe(jr((r,i)=>function dj(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hj(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),L_(),(0,xt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function TM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function vL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function uj(n){(function aj(n,e){n.INTERNAL.registerComponent(new mr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},oj)))})(n,(e,t)=>new hL(e,t,new rj)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(U_.Z);class wL{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=cT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,xt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Fi(void 0),SA(),Ms(([r,i])=>i.length>0||!r),(0,xt.U)(([r,i])=>i),ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(jr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vL(e);return yL(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return CM(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ln.iC)}get(e){return(0,bn.D)(this.query.get(e)).pipe(ln.iC)}add(e){return this.ref.add(e)}doc(e){return new EL(this.ref.doc(e),this.afs)}}class EL{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=CL(r,t);return new wL(i,a,this.afs)}snapshotChanges(){return function cj(n,e){return _L(n,e).pipe(Fi(void 0),SA(),(0,xt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,xt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,bn.D)(this.ref.get(e)).pipe(ln.iC)}}class fj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cT(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ms(t=>t.length>0),ln.iC):cT(this.query,this.afs.schedulers.outsideAngular).pipe(ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(jr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vL(e);return yL(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return CM(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ln.iC)}get(e){return(0,bn.D)(this.query.get(e)).pipe(ln.iC)}}const IL=new _.OlP("angularfire2.enableFirestorePersistence"),bL=new _.OlP("angularfire2.firestore.persistenceSettings"),pj=new _.OlP("angularfire2.firestore.settings"),gj=new _.OlP("angularfire2.firestore.use-emulator");function CL(n,e=(t=>t)){return{query:e(n),ref:n}}let TL=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S,N,j,Z,Ee,Oe,Et,Qe){this.schedulers=g;const St=(0,Cr.on)(t,h,r),st=D;S&&Fv(St,h,N,Z,Ee,Oe,j,Et),[this.firestore,this.persistenceEnabled$]=(0,Cr.cc)(`${St.name}.firestore`,"AngularFirestore",St.name,()=>{const Ut=h.runOutsideAngular(()=>St.firestore());if(a&&Ut.settings(a),st&&Ut.useEmulator(...st),i&&!da(l)){const Vt=()=>{try{return(0,bn.D)(Ut.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(_o){return"undefined"!=typeof console&&console.warn(_o),gt(!1)}};return[Ut,h.runOutsideAngular(Vt)]}return[Ut,gt(!1)]},[a,st,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=CL(i,r),h=this.schedulers.ngZone.run(()=>a);return new wL(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new fj(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new EL(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Cr.Dh),_.LFG(Cr.xv,8),_.LFG(IL,8),_.LFG(pj,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ln.HU),_.LFG(bL,8),_.LFG(gj,8),_.LFG(um,8),_.LFG(Ov,8),_.LFG(im,8),_.LFG(sm,8),_.LFG(om,8),_.LFG(am,8),_.LFG(Lv,8),_.LFG(Nf,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mj=(()=>{class n{constructor(){rm.Z.registerVersion("angularfire",ln.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:IL,useValue:!0},{provide:bL,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[TL]}),n})();const DL_firebase={apiKey:"AIzaSyBbGNe_sYx8N09SWbcOfCmLNVfkWvQ4Jbg",authDomain:"me-chat-a2693.firebaseapp.com",databaseURL:"https://me-chat-a2693-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"me-chat-a2693",storageBucket:"me-chat-a2693.appspot.com",messagingSenderId:"352618140115",appId:"1:352618140115:web:085afd4a2a902afc2d1f26",measurementId:"G-KVB58EKES8"};var _j=L(424);let mp=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new _j.N).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(TL),_.LFG(um),_.LFG(Bi),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(mp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-sign-in"]],decls:29,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Sign In"),_.qZA(),_.TgZ(5,"div",3),_._UZ(6,"input",4,5),_.qZA(),_.TgZ(8,"div",3),_._UZ(9,"input",6,7),_.qZA(),_.TgZ(11,"div",3)(12,"input",8),_.NdJ("click",function(){_.CHM(i);const l=_.MAs(7),h=_.MAs(10);return r.authService.SignIn(l.value,h.value)}),_.qZA()(),_.TgZ(13,"div",3)(14,"span",9)(15,"span",10),_._uU(16,"Or"),_.qZA()()(),_.TgZ(17,"div",3)(18,"button",11),_.NdJ("click",function(){return r.authService.GoogleAuth()}),_._UZ(19,"i",12),_._uU(20," Log in with Google "),_.qZA()(),_.TgZ(21,"div",13)(22,"span",14),_._uU(23,"Forgot Password?"),_.qZA()()(),_.TgZ(24,"div",15)(25,"span"),_._uU(26,"Don't have an account?"),_.TgZ(27,"span",16),_._uU(28," Sign Up"),_.qZA()()()()()}},directives:[Ql],styles:[""]}),n})(),vj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(mp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Sign Up"),_.qZA(),_.TgZ(5,"div",3),_._UZ(6,"input",4,5),_.qZA(),_.TgZ(8,"div",3),_._UZ(9,"input",6,7),_.qZA(),_.TgZ(11,"div",3)(12,"input",8),_.NdJ("click",function(){_.CHM(i);const l=_.MAs(7),h=_.MAs(10);return r.authService.SignUp(l.value,h.value)}),_.qZA()(),_.TgZ(13,"div",3)(14,"span",9)(15,"span",10),_._uU(16,"Or"),_.qZA()()(),_.TgZ(17,"div",3)(18,"button",11),_.NdJ("click",function(){return r.authService.GoogleAuth()}),_._UZ(19,"i",12),_._uU(20," Continue with Google "),_.qZA()()(),_.TgZ(21,"div",13)(22,"span"),_._uU(23,"Already have an account? "),_.TgZ(24,"span",14),_._uU(25,"Log In"),_.qZA()()()()()}},directives:[Ql],styles:[""]}),n})(),wj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(mp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=_.EpF();_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Reset Password"),_.qZA(),_.TgZ(5,"p",3),_._uU(6,"Please enter your email address to request a password reset."),_.qZA(),_.TgZ(7,"div",4),_._UZ(8,"input",5,6),_.qZA(),_.TgZ(10,"div",4)(11,"input",7),_.NdJ("click",function(){_.CHM(i);const l=_.MAs(9);return r.authService.ForgotPassword(l.value)}),_.qZA()()(),_.TgZ(12,"div",8)(13,"span"),_._uU(14,"Go back to ? "),_.TgZ(15,"span",9),_._uU(16,"Log In"),_.qZA()()()()()}},directives:[Ql],styles:[""]}),n})();function Ej(n,e){if(1&n&&(_.TgZ(0,"div",4)(1,"p",9),_._uU(2,"We have sent a confirmation email to "),_.TgZ(3,"strong"),_._uU(4),_.qZA(),_._uU(5,"."),_.qZA(),_.TgZ(6,"p",9),_._uU(7,"Please check your email and click on the link to verfiy your email address."),_.qZA()()),2&n){const t=e.ngIf;_.xp6(4),_.Oqu(t.email)}}let Ij=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(mp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),_._uU(4,"Thank You for Registering"),_.qZA(),_.YNc(5,Ej,8,1,"div",3),_.TgZ(6,"div",4)(7,"button",5),_.NdJ("click",function(){return r.authService.SendVerificationMail()}),_._UZ(8,"i",6),_._uU(9," Resend Verification Email "),_.qZA()()(),_.TgZ(10,"div",7)(11,"span"),_._uU(12,"Go back to?"),_.TgZ(13,"span",8),_._uU(14," Sign in"),_.qZA()()()()()),2&t&&(_.xp6(5),_.Q6J("ngIf",r.authService.userData))},directives:[Nr,Ql],styles:[""]}),n})();function bj(n,e){if(1&n&&(_.TgZ(0,"div",4)(1,"div",18)(2,"div",19),_._UZ(3,"img",20),_.TgZ(4,"div",21)(5,"h1"),_._uU(6,"Hello: "),_.TgZ(7,"strong"),_._uU(8),_.qZA()(),_.TgZ(9,"p"),_._uU(10,"User ID: "),_.TgZ(11,"strong"),_._uU(12),_.qZA()(),_.TgZ(13,"p"),_._uU(14,"Email: "),_.TgZ(15,"strong"),_._uU(16),_.qZA()(),_.TgZ(17,"p"),_._uU(18,"Email Verified: "),_.TgZ(19,"strong"),_._uU(20),_.qZA()()()()()()),2&n){const t=e.ngIf;_.xp6(3),_.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",_.LSH),_.s9C("alt",t.displayName),_.xp6(5),_.Oqu(t.displayName?t.displayName:"User"),_.xp6(4),_.Oqu(t.uid),_.xp6(4),_.Oqu(t.email),_.xp6(4),_.Oqu(t.emailVerified)}}const Cj=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:yj},{path:"register-user",component:vj},{path:"dashboard",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(mp))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(_.TgZ(0,"nav",0)(1,"a",1),_._UZ(2,"img",2),_.qZA()(),_.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),_._UZ(10,"i",10),_._uU(11,"User Profile "),_.qZA()(),_.TgZ(12,"li",8)(13,"a",11),_.NdJ("click",function(){return r.authService.SignOut()}),_._UZ(14,"i",12),_._uU(15,"Log out "),_.qZA()()()()(),_.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),_._uU(20,"User Profile"),_.qZA()(),_.YNc(21,bj,21,6,"div",17),_.qZA()()()()),2&t&&(_.xp6(21),_.Q6J("ngIf",r.authService.userData))},directives:[Nr],styles:[""]}),n})(),canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(mp),_.LFG(Bi))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:wj},{path:"verify-email-address",component:Ij}];let Tj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[Nh.forRoot(Cj)],Nh]}),n})(),Dj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[$T]}),n.\u0275inj=_.cJS({providers:[mp],imports:[[Pc,Co,Cr.hO.initializeApp(DL_firebase),wb,mj,QL,bN,Tj]]}),n})();(0,_.G48)(),Qa().bootstrapModule(Dj).catch(n=>console.error(n))},5867:(dt,Te,L)=>{L.d(Te,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=L(9681);(0,_.registerVersion)("firebase","9.6.10","app")},127:(dt,Te,L)=>{L.d(Te,{Z:()=>_.Z});var _=L(3942);_.Z.registerVersion("firebase","9.6.10","app-compat")},5881:(dt,Te,L)=>{L.r(Te);var _=L(5861),G=L(3942),P=L(424),se=L(2090),ce=(L(9681),L(1877),L(4859));function ue(){return window}function q(){return(q=(0,_.Z)(function*(O,V,H){var ae;const{BuildInfo:Ve}=ue();(0,P.ap)(V.sessionId,"AuthEvent did not contain a session ID");const qe=yield be(V.sessionId),wt={};return(0,P.aq)()?wt.ibi=Ve.packageName:(0,P.ar)()?wt.apn=Ve.packageName:(0,P.as)(O,"operation-not-supported-in-this-environment"),Ve.displayName&&(wt.appDisplayName=Ve.displayName),wt.sessionId=qe,(0,P.at)(O,H,V.type,void 0,null!==(ae=V.eventId)&&void 0!==ae?ae:void 0,wt)})).apply(this,arguments)}function Ge(){return(Ge=(0,_.Z)(function*(O){const{BuildInfo:V}=ue(),H={};(0,P.aq)()?H.iosBundleId=V.packageName:(0,P.ar)()?H.androidPackageName=V.packageName:(0,P.as)(O,"operation-not-supported-in-this-environment"),yield(0,P.au)(O,H)})).apply(this,arguments)}function Ue(){return(Ue=(0,_.Z)(function*(O,V,H){const{cordova:ae}=ue();let Ve=()=>{};try{yield new Promise((qe,wt)=>{let tt=null;function Tt(){var zt;qe();const xr=null===(zt=ae.plugins.browsertab)||void 0===zt?void 0:zt.close;"function"==typeof xr&&xr(),"function"==typeof(null==H?void 0:H.close)&&H.close()}function Tn(){tt||(tt=window.setTimeout(()=>{wt((0,P.av)(O,"redirect-cancelled-by-user"))},2e3))}function sr(){"visible"===(null==document?void 0:document.visibilityState)&&Tn()}V.addPassiveListener(Tt),document.addEventListener("resume",Tn,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",sr,!1),Ve=()=>{V.removePassiveListener(Tt),document.removeEventListener("resume",Tn,!1),document.removeEventListener("visibilitychange",sr,!1),tt&&window.clearTimeout(tt)}})}finally{Ve()}})).apply(this,arguments)}function be(O){return Je.apply(this,arguments)}function Je(){return(Je=(0,_.Z)(function*(O){const V=$e(O),H=yield crypto.subtle.digest("SHA-256",V);return Array.from(new Uint8Array(H)).map(Ve=>Ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $e(O){if((0,P.ap)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(O);const V=new ArrayBuffer(O.length),H=new Uint8Array(V);for(let ae=0;ae<O.length;ae++)H[ae]=O.charCodeAt(ae);return H}class Ae extends P.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(V=>{this.resolveInialized=V})}addPassiveListener(V){this.passiveListeners.add(V)}removePassiveListener(V){this.passiveListeners.delete(V)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(V){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(V)),super.onEvent(V)}initialized(){var V=this;return(0,_.Z)(function*(){yield V.initPromise})()}}function te(O){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,_.Z)(function*(O){const V=yield le()._get(pe(O));return V&&(yield le()._remove(pe(O))),V})).apply(this,arguments)}function de(){const O=[],V="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const ae=Math.floor(Math.random()*V.length);O.push(V.charAt(ae))}return O.join("")}function le(){return(0,P.ax)(P.b)}function pe(O){return(0,P.ay)("authEvent",O.config.apiKey,O.name)}function It(O){if(!(null==O?void 0:O.includes("?")))return{};const[V,...H]=O.split("?");return(0,se.zd)(H.join("?"))}function ht(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.av)("no-auth-event")}}function Jt(){var O;return(null===(O=null==self?void 0:self.location)||void 0===O?void 0:O.protocol)||null}function xn(O=(0,se.z$)()){return!("file:"!==Jt()&&"ionic:"!==Jt()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function fi(){try{const O=self.localStorage,V=P.aG();if(O)return O.setItem(V,"1"),O.removeItem(V),!function Ji(O=(0,se.z$)()){return function yr(){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)}()||function vr(O=(0,se.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,se.hl)()}catch(O){return pr()&&(0,se.hl)()}return!1}function pr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function wr(){return(function nn(){return"http:"===Jt()||"https:"===Jt()}()||(0,se.ru)()||xn())&&!function fr(){return(0,se.b$)()||(0,se.UG)()}()&&fi()&&!pr()}function Xi(){return xn()&&"undefined"!=typeof document}function Sr(){return(Sr=(0,_.Z)(function*(){return!!Xi()&&new Promise(O=>{const V=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(V),O(!0)})})})).apply(this,arguments)}const rn={LOCAL:"local",NONE:"none",SESSION:"session"},Gn=P.aw,Yr="persistence";function Pn(O){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,_.Z)(function*(O){yield O._initializationPromise;const V=Bt(),H=P.ay(Yr,O.config.apiKey,O.name);V&&V.setItem(H,O._getPersistence())})).apply(this,arguments)}function Bt(){var O;try{return(null===(O=function Un(){return"undefined"!=typeof window?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch(V){return null}}const lt=P.aw;class rt{constructor(){this.browserResolver=P.ax(P.k),this.cordovaResolver=P.ax(class Fn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aA}_initialize(V){var H=this;return(0,_.Z)(function*(){const ae=V._key();let Ve=H.eventManagers.get(ae);return Ve||(Ve=new Ae(V),H.eventManagers.set(ae,Ve),H.attachCallbackListeners(V,Ve)),Ve})()}_openPopup(V){(0,P.as)(V,"operation-not-supported-in-this-environment")}_openRedirect(V,H,ae,Ve){var qe=this;return(0,_.Z)(function*(){!function me(O){var V,H,ae,Ve,qe,wt,tt,Tt,Tn,sr;const zt=ue();(0,P.aw)("function"==typeof(null===(V=null==zt?void 0:zt.universalLinks)||void 0===V?void 0:V.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aw)(void 0!==(null===(H=null==zt?void 0:zt.BuildInfo)||void 0===H?void 0:H.packageName),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aw)("function"==typeof(null===(qe=null===(Ve=null===(ae=null==zt?void 0:zt.cordova)||void 0===ae?void 0:ae.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===qe?void 0:qe.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(Tt=null===(tt=null===(wt=null==zt?void 0:zt.cordova)||void 0===wt?void 0:wt.plugins)||void 0===tt?void 0:tt.browsertab)||void 0===Tt?void 0:Tt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(sr=null===(Tn=null==zt?void 0:zt.cordova)||void 0===Tn?void 0:Tn.InAppBrowser)||void 0===sr?void 0:sr.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(V);const wt=yield qe._initialize(V);yield wt.initialized(),wt.resetRedirect(),(0,P.aB)(),yield qe._originValidation(V);const tt=function Ie(O,V,H=null){return{type:V,eventId:H,urlResponse:null,sessionId:de(),postBody:null,tenantId:O.tenantId,error:(0,P.av)(O,"no-auth-event")}}(V,ae,Ve);yield function Ke(O,V){return le()._set(pe(O),V)}(V,tt);const Tt=yield function z(O,V,H){return q.apply(this,arguments)}(V,tt,H),Tn=yield function Me(O){const{cordova:V}=ue();return new Promise(H=>{V.plugins.browsertab.isAvailable(ae=>{let Ve=null;ae?V.plugins.browsertab.openUrl(O):Ve=V.InAppBrowser.open(O,(0,P.ao)()?"_blank":"_system","location=yes"),H(Ve)})})}(Tt);return function Fe(O,V,H){return Ue.apply(this,arguments)}(V,wt,Tn)})()}_isIframeWebStorageSupported(V,H){throw new Error("Method not implemented.")}_originValidation(V){const H=V._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function ne(O){return Ge.apply(this,arguments)}(V)),this.originValidationPromises[H]}attachCallbackListeners(V,H){const{universalLinks:ae,handleOpenURL:Ve,BuildInfo:qe}=ue(),wt=setTimeout((0,_.Z)(function*(){yield te(V),H.onEvent(ht())}),500),tt=function(){var sr=(0,_.Z)(function*(zt){clearTimeout(wt);const xr=yield te(V);let Mi=null;xr&&(null==zt?void 0:zt.url)&&(Mi=function Q(O,V){var H,ae;const Ve=function oe(O){const V=It(O),H=V.link?decodeURIComponent(V.link):void 0,ae=It(H).link,Ve=V.deep_link_id?decodeURIComponent(V.deep_link_id):void 0;return It(Ve).link||Ve||ae||H||O}(V);if(Ve.includes("/__/auth/callback")){const qe=It(Ve),wt=qe.firebaseError?function Le(O){try{return JSON.parse(O)}catch(V){return null}}(decodeURIComponent(qe.firebaseError)):null,tt=null===(ae=null===(H=null==wt?void 0:wt.code)||void 0===H?void 0:H.split("auth/"))||void 0===ae?void 0:ae[1],Tt=tt?(0,P.av)(tt):null;return Tt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Tt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:Ve,postBody:null}}return null}(xr,zt.url)),H.onEvent(Mi||ht())});return function(xr){return sr.apply(this,arguments)}}();void 0!==ae&&"function"==typeof ae.subscribe&&ae.subscribe(null,tt);const Tt=Ve,Tn=`${qe.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var sr=(0,_.Z)(function*(zt){if(zt.toLowerCase().startsWith(Tn)&&tt({url:zt}),"function"==typeof Tt)try{Tt(zt)}catch(xr){console.error(xr)}});return function(zt){return sr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aA}_initialize(V){var H=this;return(0,_.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(V)})()}_openPopup(V,H,ae,Ve){var qe=this;return(0,_.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openPopup(V,H,ae,Ve)})()}_openRedirect(V,H,ae,Ve){var qe=this;return(0,_.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openRedirect(V,H,ae,Ve)})()}_isIframeWebStorageSupported(V,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(V,H)}_originValidation(V){return this.assertedUnderlyingResolver._originValidation(V)}get _shouldInitProactively(){return Xi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var V=this;return(0,_.Z)(function*(){if(V.underlyingResolver)return;const H=yield function ft(){return Sr.apply(this,arguments)}();V.underlyingResolver=H?V.cordovaResolver:V.browserResolver})()}}function Qr(O){return O.unwrap()}function Wt(O){return Vn(O)}function Vn(O){const{_tokenResponse:V}=O instanceof se.ZR?O.customData:O;if(!V)return null;if(!(O instanceof se.ZR)&&"temporaryProof"in V&&"phoneNumber"in V)return P.P.credentialFromResult(O);const H=V.providerId;if(!H||H===P.o.PASSWORD)return null;let ae;switch(H){case P.o.GOOGLE:ae=P.N;break;case P.o.FACEBOOK:ae=P.M;break;case P.o.GITHUB:ae=P.Q;break;case P.o.TWITTER:ae=P.V;break;default:const{oauthIdToken:Ve,oauthAccessToken:qe,oauthTokenSecret:wt,pendingToken:tt,nonce:Tt}=V;return qe||wt||Ve||tt?tt?H.startsWith("saml.")?P.aJ._create(H,tt):P.I._fromParams({providerId:H,signInMethod:H,pendingToken:tt,idToken:Ve,accessToken:qe}):new P.T(H).credential({idToken:Ve,accessToken:qe,rawNonce:Tt}):null}return O instanceof se.ZR?ae.credentialFromError(O):ae.credentialFromResult(O)}function sn(O,V){return V.catch(H=>{throw H instanceof se.ZR&&function ts(O,V){var H;const ae=null===(H=V.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===V.code)V.resolver=new qt(O,P.am(O,V));else if(ae){const Ve=Vn(V),qe=V;Ve&&(qe.credential=Ve,qe.tenantId=ae.tenantId||void 0,qe.email=ae.email||void 0,qe.phoneNumber=ae.phoneNumber||void 0)}}(O,H),H}).then(H=>{const Ve=H.user;return{operationType:H.operationType,credential:Wt(H),additionalUserInfo:P.ak(H),user:He.getOrCreate(Ve)}})}function mt(O,V){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,_.Z)(function*(O,V){const H=yield V;return{verificationId:H.verificationId,confirm:ae=>sn(O,H.confirm(ae))}})).apply(this,arguments)}class qt{constructor(V,H){this.resolver=H,this.auth=function es(O){return O.wrapped()}(V)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(V){return sn(Qr(this.auth),this.resolver.resolveSignIn(V))}}class He{constructor(V){this._delegate=V,this.multiFactor=P.an(V)}static getOrCreate(V){return He.USER_MAP.has(V)||He.USER_MAP.set(V,new He(V)),He.USER_MAP.get(V)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(V){return this._delegate.getIdTokenResult(V)}getIdToken(V){return this._delegate.getIdToken(V)}linkAndRetrieveDataWithCredential(V){return this.linkWithCredential(V)}linkWithCredential(V){var H=this;return(0,_.Z)(function*(){return sn(H.auth,P.Y(H._delegate,V))})()}linkWithPhoneNumber(V,H){var ae=this;return(0,_.Z)(function*(){return mt(ae.auth,P.l(ae._delegate,V,H))})()}linkWithPopup(V){var H=this;return(0,_.Z)(function*(){return sn(H.auth,P.d(H._delegate,V,rt))})()}linkWithRedirect(V){var H=this;return(0,_.Z)(function*(){return yield Pn(P.aC(H.auth)),P.g(H._delegate,V,rt)})()}reauthenticateAndRetrieveDataWithCredential(V){return this.reauthenticateWithCredential(V)}reauthenticateWithCredential(V){var H=this;return(0,_.Z)(function*(){return sn(H.auth,P.Z(H._delegate,V))})()}reauthenticateWithPhoneNumber(V,H){return mt(this.auth,P.r(this._delegate,V,H))}reauthenticateWithPopup(V){return sn(this.auth,P.e(this._delegate,V,rt))}reauthenticateWithRedirect(V){var H=this;return(0,_.Z)(function*(){return yield Pn(P.aC(H.auth)),P.h(H._delegate,V,rt)})()}sendEmailVerification(V){return P.aa(this._delegate,V)}unlink(V){var H=this;return(0,_.Z)(function*(){return yield P.aj(H._delegate,V),H})()}updateEmail(V){return P.af(this._delegate,V)}updatePassword(V){return P.ag(this._delegate,V)}updatePhoneNumber(V){return P.u(this._delegate,V)}updateProfile(V){return P.ae(this._delegate,V)}verifyBeforeUpdateEmail(V,H){return P.ab(this._delegate,V,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}He.USER_MAP=new WeakMap;const Ce=P.aw;let Xe=(()=>{class O{constructor(H,ae){if(this.app=H,ae.isInitialized())return this._delegate=ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ve}=H.options;Ce(Ve,"invalid-api-key",{appName:H.name}),Ce(Ve,"invalid-api-key",{appName:H.name});const qe="undefined"!=typeof window?rt:void 0;this._delegate=ae.initialize({options:{persistence:Mt(Ve,H.name),popupRedirectResolver:qe}}),this._delegate._updateErrorMap(P.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?He.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,ae){P.E(this._delegate,H,ae)}applyActionCode(H){return P.a1(this._delegate,H)}checkActionCode(H){return P.a2(this._delegate,H)}confirmPasswordReset(H,ae){return P.a0(this._delegate,H,ae)}createUserWithEmailAndPassword(H,ae){var Ve=this;return(0,_.Z)(function*(){return sn(Ve._delegate,P.a4(Ve._delegate,H,ae))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return P.a9(this._delegate,H)}isSignInWithEmailLink(H){return P.a7(this._delegate,H)}getRedirectResult(){var H=this;return(0,_.Z)(function*(){Ce(wr(),H._delegate,"operation-not-supported-in-this-environment");const ae=yield P.j(H._delegate,rt);return ae?sn(H._delegate,Promise.resolve(ae)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function pn(O,V){(0,P.aC)(O)._logFramework(V)}(this._delegate,H)}onAuthStateChanged(H,ae,Ve){const{next:qe,error:wt,complete:tt}=pt(H,ae,Ve);return this._delegate.onAuthStateChanged(qe,wt,tt)}onIdTokenChanged(H,ae,Ve){const{next:qe,error:wt,complete:tt}=pt(H,ae,Ve);return this._delegate.onIdTokenChanged(qe,wt,tt)}sendSignInLinkToEmail(H,ae){return P.a6(this._delegate,H,ae)}sendPasswordResetEmail(H,ae){return P.$(this._delegate,H,ae||void 0)}setPersistence(H){var ae=this;return(0,_.Z)(function*(){let Ve;switch(function Nn(O,V){Gn(Object.values(rn).includes(V),O,"invalid-persistence-type"),(0,se.b$)()?Gn(V!==rn.SESSION,O,"unsupported-persistence-type"):(0,se.UG)()?Gn(V===rn.NONE,O,"unsupported-persistence-type"):pr()?Gn(V===rn.NONE||V===rn.LOCAL&&(0,se.hl)(),O,"unsupported-persistence-type"):Gn(V===rn.NONE||fi(),O,"unsupported-persistence-type")}(ae._delegate,H),H){case rn.SESSION:Ve=P.a;break;case rn.LOCAL:Ve=(yield P.ax(P.i)._isAvailable())?P.i:P.b;break;case rn.NONE:Ve=P.K;break;default:return P.as("argument-error",{appName:ae._delegate.name})}return ae._delegate.setPersistence(Ve)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return sn(this._delegate,P.W(this._delegate))}signInWithCredential(H){return sn(this._delegate,P.X(this._delegate,H))}signInWithCustomToken(H){return sn(this._delegate,P._(this._delegate,H))}signInWithEmailAndPassword(H,ae){return sn(this._delegate,P.a5(this._delegate,H,ae))}signInWithEmailLink(H,ae){return sn(this._delegate,P.a8(this._delegate,H,ae))}signInWithPhoneNumber(H,ae){return mt(this._delegate,P.s(this._delegate,H,ae))}signInWithPopup(H){var ae=this;return(0,_.Z)(function*(){return Ce(wr(),ae._delegate,"operation-not-supported-in-this-environment"),sn(ae._delegate,P.c(ae._delegate,H,rt))})()}signInWithRedirect(H){var ae=this;return(0,_.Z)(function*(){return Ce(wr(),ae._delegate,"operation-not-supported-in-this-environment"),yield Pn(ae._delegate),P.f(ae._delegate,H,rt)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return P.a3(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=rn,O})();function pt(O,V,H){let ae=O;"function"!=typeof O&&({next:ae,error:V,complete:H}=O);const Ve=ae;return{next:wt=>Ve(wt&&He.getOrCreate(wt)),error:V,complete:H}}function Mt(O,V){const H=function $s(O,V){const H=Bt();if(!H)return[];const ae=P.ay(Yr,O,V);switch(H.getItem(ae)){case rn.NONE:return[P.K];case rn.LOCAL:return[P.i,P.a];case rn.SESSION:return[P.a];default:return[]}}(O,V);if("undefined"!=typeof self&&!H.includes(P.i)&&H.push(P.i),"undefined"!=typeof window)for(const ae of[P.b,P.a])H.includes(ae)||H.push(ae);return H.includes(P.K)||H.push(P.K),H}class Nt{constructor(){this.providerId="phone",this._delegate=new P.P(Qr(G.Z.auth()))}static credential(V,H){return P.P.credential(V,H)}verifyPhoneNumber(V,H){return this._delegate.verifyPhoneNumber(V,H)}unwrap(){return this._delegate}}Nt.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Nt.PROVIDER_ID=P.P.PROVIDER_ID;const K=P.aw;class ${constructor(V,H,ae=G.Z.app()){var Ve;K(null===(Ve=ae.options)||void 0===Ve?void 0:Ve.apiKey,"invalid-api-key",{appName:ae.name}),this._delegate=new P.R(V,H,ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function he(O){O.INTERNAL.registerComponent(new ce.wA("auth-compat",V=>{const H=V.getProvider("app-compat").getImmediate(),ae=V.getProvider("auth");return new Xe(H,ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.L,FacebookAuthProvider:P.M,GithubAuthProvider:P.Q,GoogleAuthProvider:P.N,OAuthProvider:P.T,SAMLAuthProvider:P.U,PhoneAuthProvider:Nt,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:$,TwitterAuthProvider:P.V,Auth:Xe,AuthCredential:P.G,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.2.11")}(G.Z)},8306:(dt,Te,L)=>{L.d(Te,{y:()=>z});var _=L(930),G=L(727),P=L(8822),se=L(4671);var ce=L(2416),ue=L(576),ge=L(2806);let z=(()=>{class Me{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const me=new Me;return me.source=this,me.operator=Ue,me}subscribe(Ue,me,be){const Je=function Ge(Me){return Me&&Me instanceof _.Lv||function ne(Me){return Me&&(0,ue.m)(Me.next)&&(0,ue.m)(Me.error)&&(0,ue.m)(Me.complete)}(Me)&&(0,G.Nn)(Me)}(Ue)?Ue:new _.Hp(Ue,me,be);return(0,ge.x)(()=>{const{operator:$e,source:Re}=this;Je.add($e?$e.call(Je,Re):Re?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(me){Ue.error(me)}}forEach(Ue,me){return new(me=q(me))((be,Je)=>{const $e=new _.Hp({next:Re=>{try{Ue(Re)}catch(Ae){Je(Ae),$e.unsubscribe()}},error:Je,complete:be});this.subscribe($e)})}_subscribe(Ue){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(Ue)}[P.L](){return this}pipe(...Ue){return function _e(Me){return 0===Me.length?se.y:1===Me.length?Me[0]:function(Ue){return Me.reduce((me,be)=>be(me),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=q(Ue))((me,be)=>{let Je;this.subscribe($e=>Je=$e,$e=>be($e),()=>me(Je))})}}return Me.create=Fe=>new Me(Fe),Me})();function q(Me){var Fe;return null!==(Fe=null!=Me?Me:ce.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(dt,Te,L)=>{L.d(Te,{x:()=>ce});var _=L(8306),G=L(727);const se=(0,L(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=L(8737),_e=L(2806);let ce=(()=>{class ge extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ne=new ue(this,this);return ne.operator=q,ne}_throwIfClosed(){if(this.closed)throw new se}next(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(q)}})}error(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ne}=this;for(;ne.length;)ne.shift().error(q)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ne,isStopped:Ge,observers:Me}=this;return ne||Ge?G.Lc:(this.currentObservers=null,Me.push(q),new G.w0(()=>{this.currentObservers=null,(0,re.P)(Me,q)}))}_checkFinalizedStatuses(q){const{hasError:ne,thrownError:Ge,isStopped:Me}=this;ne?q.error(Ge):Me&&q.complete()}asObservable(){const q=new _.y;return q.source=this,q}}return ge.create=(z,q)=>new ue(z,q),ge})();class ue extends ce{constructor(z,q){super(),this.destination=z,this.source=q}next(z){var q,ne;null===(ne=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ne||ne.call(q,z)}error(z){var q,ne;null===(ne=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ne||ne.call(q,z)}complete(){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===q||q.call(z)}_subscribe(z){var q,ne;return null!==(ne=null===(q=this.source)||void 0===q?void 0:q.subscribe(z))&&void 0!==ne?ne:G.Lc}}},930:(dt,Te,L)=>{L.d(Te,{Hp:()=>Ue,Lv:()=>ne});var _=L(576),G=L(727),P=L(2416),se=L(7849),re=L(5032);const _e=ge("C",void 0,void 0);function ge(Re,Ae,Ie){return{kind:Re,value:Ae,error:Ie}}var z=L(3410),q=L(2806);class ne extends G.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,G.Nn)(Ae)&&Ae.add(this)):this.destination=$e}static create(Ae,Ie,Ke){return new Ue(Ae,Ie,Ke)}next(Ae){this.isStopped?Je(function ue(Re){return ge("N",Re,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?Je(function ce(Re){return ge("E",void 0,Re)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?Je(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Me(Re,Ae){return Ge.call(Re,Ae)}class Fe{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ae)}catch(Ke){me(Ke)}}error(Ae){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ae)}catch(Ke){me(Ke)}else me(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(Ie){me(Ie)}}}class Ue extends ne{constructor(Ae,Ie,Ke){let te;if(super(),(0,_.m)(Ae)||!Ae)te={next:null!=Ae?Ae:void 0,error:null!=Ie?Ie:void 0,complete:null!=Ke?Ke:void 0};else{let Ye;this&&P.v.useDeprecatedNextContext?(Ye=Object.create(Ae),Ye.unsubscribe=()=>this.unsubscribe(),te={next:Ae.next&&Me(Ae.next,Ye),error:Ae.error&&Me(Ae.error,Ye),complete:Ae.complete&&Me(Ae.complete,Ye)}):te=Ae}this.destination=new Fe(te)}}function me(Re){P.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Re):(0,se.h)(Re)}function Je(Re,Ae){const{onStoppedNotification:Ie}=P.v;Ie&&z.z.setTimeout(()=>Ie(Re,Ae))}const $e={closed:!0,next:re.Z,error:function be(Re){throw Re},complete:re.Z}},727:(dt,Te,L)=>{L.d(Te,{Lc:()=>_e,w0:()=>re,Nn:()=>ce});var _=L(576);const P=(0,L(3888).d)(ge=>function(q){ge(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ne,Ge)=>`${Ge+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var se=L(8737);class re{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Me of q)Me.remove(this);else q.remove(this);const{initialTeardown:ne}=this;if((0,_.m)(ne))try{ne()}catch(Me){z=Me instanceof P?Me.errors:[Me]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Me of Ge)try{ue(Me)}catch(Fe){z=null!=z?z:[],Fe instanceof P?z=[...z,...Fe.errors]:z.push(Fe)}}if(z)throw new P(z)}}add(z){var q;if(z&&z!==this)if(this.closed)ue(z);else{if(z instanceof re){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(z)}}_hasParent(z){const{_parentage:q}=this;return q===z||Array.isArray(q)&&q.includes(z)}_addParent(z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(z),q):q?[q,z]:z}_removeParent(z){const{_parentage:q}=this;q===z?this._parentage=null:Array.isArray(q)&&(0,se.P)(q,z)}remove(z){const{_finalizers:q}=this;q&&(0,se.P)(q,z),z instanceof re&&z._removeParent(this)}}re.EMPTY=(()=>{const ge=new re;return ge.closed=!0,ge})();const _e=re.EMPTY;function ce(ge){return ge instanceof re||ge&&"closed"in ge&&(0,_.m)(ge.remove)&&(0,_.m)(ge.add)&&(0,_.m)(ge.unsubscribe)}function ue(ge){(0,_.m)(ge)?ge():ge.unsubscribe()}},2416:(dt,Te,L)=>{L.d(Te,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(dt,Te,L)=>{L.d(Te,{E:()=>G});const G=new(L(8306).y)(re=>re.complete())},8996:(dt,Te,L)=>{L.d(Te,{D:()=>Ae});var _=L(8421),G=L(5363),P=L(9468),_e=L(8306),ue=L(2202),ge=L(576),z=L(9672);function ne(Ie,Ke){if(!Ie)throw new Error("Iterable cannot be null");return new _e.y(te=>{(0,z.f)(te,Ke,()=>{const Ye=Ie[Symbol.asyncIterator]();(0,z.f)(te,Ke,()=>{Ye.next().then(Q=>{Q.done?te.complete():te.next(Q.value)})},0,!0)})})}var Ge=L(3670),Me=L(8239),Fe=L(1144),Ue=L(6495),me=L(2206),be=L(4532),Je=L(3260);function Ae(Ie,Ke){return Ke?function Re(Ie,Ke){if(null!=Ie){if((0,Ge.c)(Ie))return function se(Ie,Ke){return(0,_.Xf)(Ie).pipe((0,P.R)(Ke),(0,G.Q)(Ke))}(Ie,Ke);if((0,Fe.z)(Ie))return function ce(Ie,Ke){return new _e.y(te=>{let Ye=0;return Ke.schedule(function(){Ye===Ie.length?te.complete():(te.next(Ie[Ye++]),te.closed||this.schedule())})})}(Ie,Ke);if((0,Me.t)(Ie))return function re(Ie,Ke){return(0,_.Xf)(Ie).pipe((0,P.R)(Ke),(0,G.Q)(Ke))}(Ie,Ke);if((0,me.D)(Ie))return ne(Ie,Ke);if((0,Ue.T)(Ie))return function q(Ie,Ke){return new _e.y(te=>{let Ye;return(0,z.f)(te,Ke,()=>{Ye=Ie[ue.h](),(0,z.f)(te,Ke,()=>{let Q,de;try{({value:Q,done:de}=Ye.next())}catch(le){return void te.error(le)}de?te.complete():te.next(Q)},0,!0)}),()=>(0,ge.m)(null==Ye?void 0:Ye.return)&&Ye.return()})}(Ie,Ke);if((0,Je.L)(Ie))return function $e(Ie,Ke){return ne((0,Je.Q)(Ie),Ke)}(Ie,Ke)}throw(0,be.z)(Ie)}(Ie,Ke):(0,_.Xf)(Ie)}},8421:(dt,Te,L)=>{L.d(Te,{Xf:()=>Ge});var _=L(655),G=L(1144),P=L(8239),se=L(8306),re=L(3670),_e=L(2206),ce=L(4532),ue=L(6495),ge=L(3260),z=L(576),q=L(7849),ne=L(8822);function Ge(Re){if(Re instanceof se.y)return Re;if(null!=Re){if((0,re.c)(Re))return function Me(Re){return new se.y(Ae=>{const Ie=Re[ne.L]();if((0,z.m)(Ie.subscribe))return Ie.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,G.z)(Re))return function Fe(Re){return new se.y(Ae=>{for(let Ie=0;Ie<Re.length&&!Ae.closed;Ie++)Ae.next(Re[Ie]);Ae.complete()})}(Re);if((0,P.t)(Re))return function Ue(Re){return new se.y(Ae=>{Re.then(Ie=>{Ae.closed||(Ae.next(Ie),Ae.complete())},Ie=>Ae.error(Ie)).then(null,q.h)})}(Re);if((0,_e.D)(Re))return be(Re);if((0,ue.T)(Re))return function me(Re){return new se.y(Ae=>{for(const Ie of Re)if(Ae.next(Ie),Ae.closed)return;Ae.complete()})}(Re);if((0,ge.L)(Re))return function Je(Re){return be((0,ge.Q)(Re))}(Re)}throw(0,ce.z)(Re)}function be(Re){return new se.y(Ae=>{(function $e(Re,Ae){var Ie,Ke,te,Ye;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,_.KL)(Re);!(Ke=yield Ie.next()).done;)if(Ae.next(Ke.value),Ae.closed)return}catch(Q){te={error:Q}}finally{try{Ke&&!Ke.done&&(Ye=Ie.return)&&(yield Ye.call(Ie))}finally{if(te)throw te.error}}Ae.complete()})})(Re,Ae).catch(Ie=>Ae.error(Ie))})}},6451:(dt,Te,L)=>{L.d(Te,{T:()=>_e});var _=L(8189),G=L(8421),P=L(515),se=L(7669),re=L(8996);function _e(...ce){const ue=(0,se.yG)(ce),ge=(0,se._6)(ce,1/0),z=ce;return z.length?1===z.length?(0,G.Xf)(z[0]):(0,_.J)(ge)((0,re.D)(z,ue)):P.E}},5403:(dt,Te,L)=>{L.d(Te,{x:()=>G});var _=L(930);function G(se,re,_e,ce,ue){return new P(se,re,_e,ce,ue)}class P extends _.Lv{constructor(re,_e,ce,ue,ge,z){super(re),this.onFinalize=ge,this.shouldUnsubscribe=z,this._next=_e?function(q){try{_e(q)}catch(ne){re.error(ne)}}:super._next,this._error=ue?function(q){try{ue(q)}catch(ne){re.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(q){re.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(dt,Te,L)=>{L.d(Te,{U:()=>P});var _=L(4482),G=L(5403);function P(se,re){return(0,_.e)((_e,ce)=>{let ue=0;_e.subscribe((0,G.x)(ce,ge=>{ce.next(se.call(re,ge,ue++))}))})}},8189:(dt,Te,L)=>{L.d(Te,{J:()=>P});var _=L(5577),G=L(4671);function P(se=1/0){return(0,_.z)(G.y,se)}},5577:(dt,Te,L)=>{L.d(Te,{z:()=>ue});var _=L(4004),G=L(8421),P=L(4482),se=L(9672),re=L(5403),ce=L(576);function ue(ge,z,q=1/0){return(0,ce.m)(z)?ue((ne,Ge)=>(0,_.U)((Me,Fe)=>z(ne,Me,Ge,Fe))((0,G.Xf)(ge(ne,Ge))),q):("number"==typeof z&&(q=z),(0,P.e)((ne,Ge)=>function _e(ge,z,q,ne,Ge,Me,Fe,Ue){const me=[];let be=0,Je=0,$e=!1;const Re=()=>{$e&&!me.length&&!be&&z.complete()},Ae=Ke=>be<ne?Ie(Ke):me.push(Ke),Ie=Ke=>{Me&&z.next(Ke),be++;let te=!1;(0,G.Xf)(q(Ke,Je++)).subscribe((0,re.x)(z,Ye=>{null==Ge||Ge(Ye),Me?Ae(Ye):z.next(Ye)},()=>{te=!0},void 0,()=>{if(te)try{for(be--;me.length&&be<ne;){const Ye=me.shift();Fe?(0,se.f)(z,Fe,()=>Ie(Ye)):Ie(Ye)}Re()}catch(Ye){z.error(Ye)}}))};return ge.subscribe((0,re.x)(z,Ae,()=>{$e=!0,Re()})),()=>{null==Ue||Ue()}}(ne,Ge,ge,q)))}},5363:(dt,Te,L)=>{L.d(Te,{Q:()=>se});var _=L(9672),G=L(4482),P=L(5403);function se(re,_e=0){return(0,G.e)((ce,ue)=>{ce.subscribe((0,P.x)(ue,ge=>(0,_.f)(ue,re,()=>ue.next(ge),_e),()=>(0,_.f)(ue,re,()=>ue.complete(),_e),ge=>(0,_.f)(ue,re,()=>ue.error(ge),_e)))})}},3099:(dt,Te,L)=>{L.d(Te,{B:()=>_e});var _=L(8996),G=L(5698),P=L(7579),se=L(930),re=L(4482);function _e(ue={}){const{connector:ge=(()=>new P.x),resetOnError:z=!0,resetOnComplete:q=!0,resetOnRefCountZero:ne=!0}=ue;return Ge=>{let Me=null,Fe=null,Ue=null,me=0,be=!1,Je=!1;const $e=()=>{null==Fe||Fe.unsubscribe(),Fe=null},Re=()=>{$e(),Me=Ue=null,be=Je=!1},Ae=()=>{const Ie=Me;Re(),null==Ie||Ie.unsubscribe()};return(0,re.e)((Ie,Ke)=>{me++,!Je&&!be&&$e();const te=Ue=null!=Ue?Ue:ge();Ke.add(()=>{me--,0===me&&!Je&&!be&&(Fe=ce(Ae,ne))}),te.subscribe(Ke),Me||(Me=new se.Hp({next:Ye=>te.next(Ye),error:Ye=>{Je=!0,$e(),Fe=ce(Re,z,Ye),te.error(Ye)},complete:()=>{be=!0,$e(),Fe=ce(Re,q),te.complete()}}),(0,_.D)(Ie).subscribe(Me))})(Ge)}}function ce(ue,ge,...z){return!0===ge?(ue(),null):!1===ge?null:ge(...z).pipe((0,G.q)(1)).subscribe(()=>ue())}},9468:(dt,Te,L)=>{L.d(Te,{R:()=>G});var _=L(4482);function G(P,se=0){return(0,_.e)((re,_e)=>{_e.add(P.schedule(()=>re.subscribe(_e),se))})}},5698:(dt,Te,L)=>{L.d(Te,{q:()=>se});var _=L(515),G=L(4482),P=L(5403);function se(re){return re<=0?()=>_.E:(0,G.e)((_e,ce)=>{let ue=0;_e.subscribe((0,P.x)(ce,ge=>{++ue<=re&&(ce.next(ge),re<=ue&&ce.complete())}))})}},8505:(dt,Te,L)=>{L.d(Te,{b:()=>re});var _=L(576),G=L(4482),P=L(5403),se=L(4671);function re(_e,ce,ue){const ge=(0,_.m)(_e)||ce||ue?{next:_e,error:ce,complete:ue}:_e;return ge?(0,G.e)((z,q)=>{var ne;null===(ne=ge.subscribe)||void 0===ne||ne.call(ge);let Ge=!0;z.subscribe((0,P.x)(q,Me=>{var Fe;null===(Fe=ge.next)||void 0===Fe||Fe.call(ge,Me),q.next(Me)},()=>{var Me;Ge=!1,null===(Me=ge.complete)||void 0===Me||Me.call(ge),q.complete()},Me=>{var Fe;Ge=!1,null===(Fe=ge.error)||void 0===Fe||Fe.call(ge,Me),q.error(Me)},()=>{var Me,Fe;Ge&&(null===(Me=ge.unsubscribe)||void 0===Me||Me.call(ge)),null===(Fe=ge.finalize)||void 0===Fe||Fe.call(ge)}))}):se.y}},4408:(dt,Te,L)=>{L.d(Te,{o:()=>re});var _=L(727);class G extends _.w0{constructor(ce,ue){super()}schedule(ce,ue=0){return this}}const P={setInterval(_e,ce,...ue){const{delegate:ge}=P;return(null==ge?void 0:ge.setInterval)?ge.setInterval(_e,ce,...ue):setInterval(_e,ce,...ue)},clearInterval(_e){const{delegate:ce}=P;return((null==ce?void 0:ce.clearInterval)||clearInterval)(_e)},delegate:void 0};var se=L(8737);class re extends G{constructor(ce,ue){super(ce,ue),this.scheduler=ce,this.work=ue,this.pending=!1}schedule(ce,ue=0){if(this.closed)return this;this.state=ce;const ge=this.id,z=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(z,ge,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(z,this.id,ue),this}requestAsyncId(ce,ue,ge=0){return P.setInterval(ce.flush.bind(ce,this),ge)}recycleAsyncId(ce,ue,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return ue;P.clearInterval(ue)}execute(ce,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ce,ue);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ue){let z,ge=!1;try{this.work(ce)}catch(q){ge=!0,z=q||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ce,scheduler:ue}=this,{actions:ge}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ge,this),null!=ce&&(this.id=this.recycleAsyncId(ue,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(dt,Te,L)=>{L.d(Te,{v:()=>P});var _=L(6063);class G{constructor(re,_e=G.now){this.schedulerActionCtor=re,this.now=_e}schedule(re,_e=0,ce){return new this.schedulerActionCtor(this,re).schedule(ce,_e)}}G.now=_.l.now;class P extends G{constructor(re,_e=G.now){super(re,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:_e}=this;if(this._active)return void _e.push(re);let ce;this._active=!0;do{if(ce=re.execute(re.state,re.delay))break}while(re=_e.shift());if(this._active=!1,ce){for(;re=_e.shift();)re.unsubscribe();throw ce}}}},4986:(dt,Te,L)=>{L.d(Te,{z:()=>P});var _=L(4408);const P=new(L(7565).v)(_.o)},6063:(dt,Te,L)=>{L.d(Te,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(dt,Te,L)=>{L.d(Te,{z:()=>_});const _={setTimeout(G,P,...se){const{delegate:re}=_;return(null==re?void 0:re.setTimeout)?re.setTimeout(G,P,...se):setTimeout(G,P,...se)},clearTimeout(G){const{delegate:P}=_;return((null==P?void 0:P.clearTimeout)||clearTimeout)(G)},delegate:void 0}},2202:(dt,Te,L)=>{L.d(Te,{h:()=>G});const G=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dt,Te,L)=>{L.d(Te,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(dt,Te,L)=>{L.d(Te,{_6:()=>_e,jO:()=>se,yG:()=>re});var _=L(576);function P(ce){return ce[ce.length-1]}function se(ce){return(0,_.m)(P(ce))?ce.pop():void 0}function re(ce){return function G(ce){return ce&&(0,_.m)(ce.schedule)}(P(ce))?ce.pop():void 0}function _e(ce,ue){return"number"==typeof P(ce)?ce.pop():ue}},8737:(dt,Te,L)=>{function _(G,P){if(G){const se=G.indexOf(P);0<=se&&G.splice(se,1)}}L.d(Te,{P:()=>_})},3888:(dt,Te,L)=>{function _(G){const se=G(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}L.d(Te,{d:()=>_})},2806:(dt,Te,L)=>{L.d(Te,{O:()=>se,x:()=>P});var _=L(2416);let G=null;function P(re){if(_.v.useDeprecatedSynchronousErrorHandling){const _e=!G;if(_e&&(G={errorThrown:!1,error:null}),re(),_e){const{errorThrown:ce,error:ue}=G;if(G=null,ce)throw ue}}else re()}function se(re){_.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=re)}},9672:(dt,Te,L)=>{function _(G,P,se,re=0,_e=!1){const ce=P.schedule(function(){se(),_e?G.add(this.schedule(null,re)):this.unsubscribe()},re);if(G.add(ce),!_e)return ce}L.d(Te,{f:()=>_})},4671:(dt,Te,L)=>{function _(G){return G}L.d(Te,{y:()=>_})},1144:(dt,Te,L)=>{L.d(Te,{z:()=>_});const _=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(dt,Te,L)=>{L.d(Te,{D:()=>G});var _=L(576);function G(P){return Symbol.asyncIterator&&(0,_.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(dt,Te,L)=>{function _(G){return"function"==typeof G}L.d(Te,{m:()=>_})},3670:(dt,Te,L)=>{L.d(Te,{c:()=>P});var _=L(8822),G=L(576);function P(se){return(0,G.m)(se[_.L])}},6495:(dt,Te,L)=>{L.d(Te,{T:()=>P});var _=L(2202),G=L(576);function P(se){return(0,G.m)(null==se?void 0:se[_.h])}},8239:(dt,Te,L)=>{L.d(Te,{t:()=>G});var _=L(576);function G(P){return(0,_.m)(null==P?void 0:P.then)}},3260:(dt,Te,L)=>{L.d(Te,{L:()=>se,Q:()=>P});var _=L(655),G=L(576);function P(re){return(0,_.FC)(this,arguments,function*(){const ce=re.getReader();try{for(;;){const{value:ue,done:ge}=yield(0,_.qq)(ce.read());if(ge)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ue)}}finally{ce.releaseLock()}})}function se(re){return(0,G.m)(null==re?void 0:re.getReader)}},4482:(dt,Te,L)=>{L.d(Te,{A:()=>G,e:()=>P});var _=L(576);function G(se){return(0,_.m)(null==se?void 0:se.lift)}function P(se){return re=>{if(G(re))return re.lift(function(_e){try{return se(_e,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(dt,Te,L)=>{function _(){}L.d(Te,{Z:()=>_})},7849:(dt,Te,L)=>{L.d(Te,{h:()=>P});var _=L(2416),G=L(3410);function P(se){G.z.setTimeout(()=>{const{onUnhandledError:re}=_.v;if(!re)throw se;re(se)})}},4532:(dt,Te,L)=>{function _(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Te,{z:()=>_})},655:(dt,Te,L)=>{function se(Q,de){var le={};for(var pe in Q)Object.prototype.hasOwnProperty.call(Q,pe)&&de.indexOf(pe)<0&&(le[pe]=Q[pe]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(pe=Object.getOwnPropertySymbols(Q);Le<pe.length;Le++)de.indexOf(pe[Le])<0&&Object.prototype.propertyIsEnumerable.call(Q,pe[Le])&&(le[pe[Le]]=Q[pe[Le]])}return le}function ue(Q,de,le,pe){return new(le||(le=Promise))(function(oe,It){function en(ht){try{ut(pe.next(ht))}catch(pn){It(pn)}}function Fn(ht){try{ut(pe.throw(ht))}catch(pn){It(pn)}}function ut(ht){ht.done?oe(ht.value):function Le(oe){return oe instanceof le?oe:new le(function(It){It(oe)})}(ht.value).then(en,Fn)}ut((pe=pe.apply(Q,de||[])).next())})}function me(Q){return this instanceof me?(this.v=Q,this):new me(Q)}function be(Q,de,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,pe=le.apply(Q,de||[]),oe=[];return Le={},It("next"),It("throw"),It("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function It(an){pe[an]&&(Le[an]=function(hi){return new Promise(function(tn,Jt){oe.push([an,hi,tn,Jt])>1||en(an,hi)})})}function en(an,hi){try{!function Fn(an){an.value instanceof me?Promise.resolve(an.value.v).then(ut,ht):pn(oe[0][2],an)}(pe[an](hi))}catch(tn){pn(oe[0][3],tn)}}function ut(an){en("next",an)}function ht(an){en("throw",an)}function pn(an,hi){an(hi),oe.shift(),oe.length&&en(oe[0][0],oe[0][1])}}function $e(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,de=Q[Symbol.asyncIterator];return de?de.call(Q):(Q=function ne(Q){var de="function"==typeof Symbol&&Symbol.iterator,le=de&&Q[de],pe=0;if(le)return le.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&pe>=Q.length&&(Q=void 0),{value:Q&&Q[pe++],done:!Q}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),le={},pe("next"),pe("throw"),pe("return"),le[Symbol.asyncIterator]=function(){return this},le);function pe(oe){le[oe]=Q[oe]&&function(It){return new Promise(function(en,Fn){!function Le(oe,It,en,Fn){Promise.resolve(Fn).then(function(ut){oe({value:ut,done:en})},It)}(en,Fn,(It=Q[oe](It)).done,It.value)})}}}L.d(Te,{FC:()=>be,KL:()=>$e,_T:()=>se,mG:()=>ue,qq:()=>me})},5e3:(dt,Te,L)=>{L.d(Te,{$8M:()=>ru,$Z:()=>Ly,AFp:()=>Uv,AaK:()=>ue,CHM:()=>uh,CRH:()=>cb,CZH:()=>cm,CqO:()=>$E,EJc:()=>rA,EpF:()=>jE,F4k:()=>Hy,FYo:()=>mv,FiY:()=>ii,G48:()=>mA,GfV:()=>qI,JOm:()=>Na,LFG:()=>nt,LSH:()=>td,Lbi:()=>jv,MAs:()=>hg,NdJ:()=>vg,OlP:()=>Hn,Oqu:()=>tv,PXZ:()=>dA,Q6J:()=>Fy,QGY:()=>yg,Qsj:()=>GI,R0b:()=>ea,RDi:()=>qs,Rgc:()=>gc,SBq:()=>ll,Sil:()=>Tb,Suo:()=>lb,TTD:()=>ca,TgZ:()=>mg,VLi:()=>cA,X6Q:()=>gA,XFs:()=>ft,Xpm:()=>Nt,Y36:()=>lc,YKP:()=>vv,YNc:()=>uo,Yjl:()=>Ve,Yz7:()=>tn,ZZ4:()=>t0,_UZ:()=>Vy,_Vd:()=>Hg,_c5:()=>TA,_uU:()=>ev,aQg:()=>_m,c2e:()=>$v,cJS:()=>nn,cg1:()=>uv,dDg:()=>Sb,deG:()=>Tp,dqk:()=>Wt,eFA:()=>xb,g9A:()=>Ib,h0i:()=>Ef,hGG:()=>Wb,iGM:()=>ub,ifc:()=>Bt,ip1:()=>Eb,kL8:()=>pI,lG2:()=>ae,oAB:()=>O,q4F:()=>CS,qLn:()=>Up,qZA:()=>_g,s9C:()=>wg,sBO:()=>_A,sIi:()=>oc,s_b:()=>Tf,soG:()=>Hv,tBr:()=>_i,tb:()=>bb,tp0:()=>Oo,uIk:()=>Zh,vHH:()=>Fe,vpe:()=>Xo,wAp:()=>Ct,xp6:()=>tl,z2F:()=>ta,zSh:()=>oo,zs3:()=>ds});var _=L(7579),G=L(727),P=L(8306),se=L(6451),re=L(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=_e({__forward_ref__:_e});function q(s){return s.__forward_ref__=q,s.toString=function(){return ue(this())},s}function ne(s){return function Ge(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===q}(s)?s():s}class Fe extends Error{constructor(o,u){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}function Ae(s,o){const u=o?` in ${o}`:"";throw new Fe(-201,`No provider for ${be(s)} found${u}`)}function ut(s,o){null==s&&function ht(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function tn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function nn(s){return{providers:s.providers||[],imports:s.imports||[]}}function xn(s){return fr(s,fi)||fr(s,wr)}function fr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ji(s){return s&&(s.hasOwnProperty(pr)||s.hasOwnProperty(Xi))?s[pr]:null}const fi=_e({\u0275prov:_e}),pr=_e({\u0275inj:_e}),wr=_e({ngInjectableDef:_e}),Xi=_e({ngInjectorDef:_e});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Sr;function rn(s){const o=Sr;return Sr=s,o}function Gn(s,o,u){const c=xn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ft.Optional?null:void 0!==o?o:void Ae(ue(s),"Injector")}function Nn(s){return{toString:s}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),Bt=(()=>{return(s=Bt||(Bt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Bt;var s})();const lt="undefined"!=typeof globalThis&&globalThis,rt="undefined"!=typeof window&&window,Qr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wt=lt||"undefined"!=typeof global&&global||rt||Qr,sn={},mt=[],Bn=_e({\u0275cmp:_e}),qt=_e({\u0275dir:_e}),He=_e({\u0275pipe:_e}),Ce=_e({\u0275mod:_e}),Xe=_e({\u0275fac:_e}),pt=_e({__NG_ELEMENT_ID__:_e});let Mt=0;function Nt(s){return Nn(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||mt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Bt.Emulated,id:"c",styles:s.styles||mt,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,y=s.pipes;return c.id+=Mt++,c.inputs=H(s.inputs,u),c.outputs=H(s.outputs),f&&f.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map($):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(Y):null,c})}function $(s){return qe(s)||function wt(s){return s[qt]||null}(s)}function Y(s){return function tt(s){return s[He]||null}(s)}const he={};function O(s){return Nn(()=>{const o={type:s.type,bootstrap:s.bootstrap||mt,declarations:s.declarations||mt,imports:s.imports||mt,exports:s.exports||mt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(he[s.id]=s.type),o})}function H(s,o){if(null==s)return sn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,o&&(o[d]=f)}return u}const ae=Nt;function Ve(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function qe(s){return s[Bn]||null}function Tt(s,o){const u=s[Ce]||null;if(!u&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return u}function Jr(s){return Array.isArray(s)&&"object"==typeof s[1]}function rs(s){return Array.isArray(s)&&!0===s[1]}function Mu(s){return 0!=(8&s.flags)}function oa(s){return 2==(2&s.flags)}function aa(s){return 1==(1&s.flags)}function Ni(s){return null!==s.template}function _l(s){return 0!=(512&s[2])}function pi(s,o){return s.hasOwnProperty(Xe)?s[Xe]:null}class sh{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function ca(){return ku}function ku(s){return s.type.prototype.ngOnChanges&&(s.setInput=qa),oh}function oh(){const s=Pi(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===sn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function qa(s,o,u,c){const d=Pi(s)||function bs(s,o){return s[Pc]=o}(s,{previous:sn,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],b=y[E];f[E]=new sh(b&&b.currentValue,o,y===sn),s[c]=o}ca.ngInherit=!0;const Pc="__ngSimpleChanges__";function Pi(s){return s[Pc]||null}let Lu;function qs(s){Lu=s}function En(s){return!!s.listen}const Eo={createRenderer:(s,o)=>function wo(){return void 0!==Lu?Lu:"undefined"!=typeof document?document:void 0}()};function _n(s){for(;Array.isArray(s);)s=s[0];return s}function Ir(s,o){return _n(o[s.index])}function Fu(s,o){return s.data[o]}function Ur(s,o){const u=o[s];return Jr(u)?u:u[0]}function Cs(s){return 4==(4&s[2])}function bo(s){return 128==(128&s[2])}function ki(s,o){return null==o?null:s[o]}function is(s){s[18]=0}function Ts(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const yt={lFrame:Dl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ma(){return yt.bindingsEnabled}function De(){return yt.lFrame.lView}function jt(){return yt.lFrame.tView}function uh(s){return yt.lFrame.contextLView=s,s[8]}function In(){let s=Uu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Uu(){return yt.lFrame.currentTNode}function Oi(s,o){const u=yt.lFrame;u.currentTNode=s,u.isParent=o}function El(){return yt.lFrame.isParent}function _a(){return yt.isInCheckNoChangesMode}function ya(s){yt.isInCheckNoChangesMode=s}function wa(){return yt.lFrame.bindingIndex++}function Fc(s,o){const u=yt.lFrame;u.bindingIndex=u.bindingRootIndex=s,bl(o)}function bl(s){yt.lFrame.currentDirectiveIndex=s}function ch(){return yt.lFrame.currentQueryIndex}function Cl(s){yt.lFrame.currentQueryIndex=s}function Tl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Vu(s,o,u){if(u&ft.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&ft.Host||(d=Tl(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const c=yt.lFrame=To();return c.currentTNode=o,c.lView=s,!0}function Ja(s){const o=To(),u=s[1];yt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function To(){const s=yt.lFrame,o=null===s?null:s.child;return null===o?Dl(s):o}function Dl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function dh(){const s=yt.lFrame;return yt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Uc=dh;function Do(){const s=dh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Vr(){return yt.lFrame.selectedIndex}function Ys(s){yt.lFrame.selectedIndex=s}function $n(){const s=yt.lFrame;return Fu(s.tView,s.selectedIndex)}function Xa(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:R}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function xl(s,o,u){Bc(s,o,3,u)}function Bu(s,o,u,c){(3&s[2])===u&&Bc(s,o,u,c)}function Qn(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Bc(s,o,u,c){const f=null!=c?c:-1,y=o.length-1;let E=0;for(let b=void 0!==c?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[18]+=65536),(E<f||-1==f)&&(jc(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function jc(s,o,u,c){const d=u[c]<0,f=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class ju{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function gt(s,o,u){const c=En(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const y=u[d++],E=u[d++],b=u[d++];c?s.setAttribute(o,E,b,y):o.setAttributeNS(y,E,b)}else{const y=f,E=u[++d];ti(y)?c&&s.setProperty(o,y,E):c?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Ss(s){return 3===s||4===s||6===s}function ti(s){return 64===s.charCodeAt(0)}function ur(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Hc(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Hc(s,o,u,c,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[f+1]=d));if(c===s[f+1])return void(s[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==d&&s.splice(f++,0,d)}function Wn(s){return-1!==s}function Qs(s){return 32767&s}function Js(s,o){let u=function Rl(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let ba=!0;function Li(s){const o=ba;return ba=s,o}let $u=0;function Cn(s,o){const u=Nl(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Xs(c.data,s),Xs(o,null),Xs(c.blueprint,null));const d=Br(s,o),f=s.injectorIndex;if(Wn(d)){const y=Qs(d),E=Js(d,o),b=E[1].data;for(let A=0;A<8;A++)o[f+A]=E[y+A]|b[y+A]}return o[f+8]=d,f}function Xs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Nl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Br(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(c=2===y?f.declTNode:1===y?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Ao(s,o,u){!function Hu(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(pt)&&(c=u[pt]),null==c&&(c=u[pt]=$u++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function eo(s,o,u){if(u&ft.Optional)return s;Ae(o,"NodeInjector")}function tu(s,o,u,c){if(u&ft.Optional&&void 0===c&&(c=null),0==(u&(ft.Self|ft.Host))){const d=s[9],f=rn(void 0);try{return d?d.get(o,c,u&ft.Optional):Gn(o,c,u&ft.Optional)}finally{rn(f)}}return eo(c,o,u)}function xo(s,o,u,c=ft.Default,d){if(null!==s){const f=function Da(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(pt)?s[pt]:void 0;return"number"==typeof o?o>=0?255&o:Pl:o}(u);if("function"==typeof f){if(!Vu(o,s,c))return c&ft.Host?eo(d,u,c):tu(o,u,c,d);try{const y=f(c);if(null!=y||c&ft.Optional)return y;Ae(u)}finally{Uc()}}else if("number"==typeof f){let y=null,E=Nl(s,o),b=-1,A=c&ft.Host?o[16][6]:null;for((-1===E||c&ft.SkipSelf)&&(b=-1===E?Br(s,o):o[E+8],-1!==b&&Jn(c,!1)?(y=o[1],E=Qs(b),o=Js(b,o)):E=-1);-1!==E;){const R=o[1];if(nu(f,E,R.data)){const U=gh(E,o,u,y,c,A);if(U!==As)return U}b=o[E+8],-1!==b&&Jn(c,o[1].data[E+8]===A)&&nu(f,E,o)?(y=R,E=Qs(b),o=Js(b,o)):E=-1}}}return tu(o,u,c,d)}const As={};function Pl(){return new xs(In(),De())}function gh(s,o,u,c,d,f){const y=o[1],E=y.data[s+8],R=to(E,y,u,null==c?oa(E)&&ba:c!=y&&0!=(3&E.type),d&ft.Host&&f===E);return null!==R?Ta(o,y,R,E):As}function to(s,o,u,c,d){const f=s.providerIndexes,y=o.data,E=1048575&f,b=s.directiveStart,R=f>>20,W=d?E+R:s.directiveEnd;for(let X=c?E:E+R;X<W;X++){const we=y[X];if(X<b&&u===we||X>=b&&we.type===u)return X}if(d){const X=y[b];if(X&&Ni(X)&&X.type===u)return b}return null}function Ta(s,o,u,c){let d=s[u];const f=o.data;if(function eu(s){return s instanceof ju}(d)){const y=d;y.resolving&&function Je(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${s}${u}`)}(be(f[u]));const E=Li(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?rn(y.injectImpl):null;Vu(s,c,ft.Default);try{d=s[u]=y.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function So(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const y=ku(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==b&&rn(b),Li(E),y.resolving=!1,Uc()}}return d}function nu(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Jn(s,o){return!(s&ft.Self||s&ft.Host&&o)}class xs{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return xo(this._tNode,this._lView,o,c,u)}}function ru(s){return function Ca(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(Ss(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(In(),s)}const Rs="__parameters__";function Mn(s,o,u){return Nn(()=>{const c=function os(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(b,A,R){const U=b.hasOwnProperty(Rs)?b[Rs]:Object.defineProperty(b,Rs,{value:[]})[Rs];for(;U.length<=R;)U.push(null);return(U[R]=U[R]||[]).push(y),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Hn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Tp=new Hn("AnalyzeForEntryComponents");function Pr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Pr(c,o)):o!==s&&o.push(c)}return o}function us(s,o){s.forEach(u=>Array.isArray(u)?us(u,o):o(u))}function su(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function No(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const ko={},zu="__NG_DI_FLAG__",au="ngTempTokenPath",T=/\n/gm,B="__source",J=_e({provide:String,useValue:_e});let ie;function Ne(s){const o=ie;return ie=s,o}function Pe(s,o=ft.Default){if(void 0===ie)throw new Fe(203,"");return null===ie?Gn(s,void 0,o):ie.get(s,o&ft.Optional?null:void 0,o)}function nt(s,o=ft.Default){return(function Un(){return Sr}()||Pe)(ne(s),o)}const Gt=nt;function Dt(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Fe(900,"");let d,f=ft.Default;for(let y=0;y<c.length;y++){const E=c[y],b=zn(E);"number"==typeof b?-1===b?d=E.token:f|=b:d=E}o.push(nt(d,f))}else o.push(nt(c))}return o}function er(s,o){return s[zu]=o,s.prototype[zu]=o,s}function zn(s){return s[zu]}const _i=er(Mn("Inject",s=>({token:s})),-1),ii=er(Mn("Optional"),8),Oo=er(Mn("SkipSelf"),4);class Jc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const p=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,I=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var yn=(()=>((yn=yn||{})[yn.NONE=0]="NONE",yn[yn.HTML=1]="HTML",yn[yn.STYLE=2]="STYLE",yn[yn.SCRIPT=3]="SCRIPT",yn[yn.URL=4]="URL",yn[yn.RESOURCE_URL=5]="RESOURCE_URL",yn))();function td(s){const o=function el(){const s=De();return s&&s[12]}();return o?o.sanitize(yn.URL,s)||"":function Vo(s,o){const u=function Hl(s){return s instanceof Jc&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?function Ra(s){return s instanceof Jc?s.changingThisBreaksApplicationSecurity:s}(s):function x(s){return(s=String(s)).match(p)||s.match(I)?s:"unsafe:"+s}(me(s))}const _w="__ngContext__";function vi(s,o){s[_w]=o}function v_(s){const o=function Ah(s){return s[_w]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Zl(s){return s.ngOriginalError}function bT(s,...o){s.error(...o)}class Up{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function IT(s){return s&&s.ngErrorLogger||bT}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Zl(o);for(;u&&Zl(u);)u=Zl(u);return u||null}}const NT=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wt))();function jo(s){return s instanceof Function?s():s}var Na=(()=>((Na=Na||{})[Na.Important=1]="Important",Na[Na.DashCase=2]="DashCase",Na))();function Vp(s,o){return undefined(s,o)}function Rh(s){const o=s[3];return rs(o)?o[3]:o}function Mh(s){return Sw(s[13])}function jp(s){return Sw(s[4])}function Sw(s){for(;null!==s&&!rs(s);)s=s[4];return s}function nd(s,o,u,c,d){if(null!=c){let f,y=!1;rs(c)?f=c:Jr(c)&&(y=!0,c=c[0]);const E=_n(c);0===s&&null!==u?null==d?x_(o,u,E):Ps(o,u,E,d||null,!0):1===s&&null!==u?Ps(o,u,E,d||null,!0):2===s?function P_(s,o,u){const c=Nh(s,o);c&&function BT(s,o,u,c){En(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=f&&function O_(s,o,u,c,d){const f=u[7];f!==_n(u)&&nd(o,s,c,f,d);for(let E=10;E<u.length;E++){const b=u[E];Gp(b[1],b,s,o,c,f)}}(o,s,f,u,d)}}function C_(s,o,u){if(En(s))return s.createElement(o,u);{const c=null!==u?function kc(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function xw(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Ts(d,-1)),u.splice(c,1)}function D_(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&xw(d,c),o>0&&(s[u-1][4]=c[4]);const f=No(s,10+o);!function Bi(s,o){Gp(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function S_(s,o){if(!(256&o[2])){const u=o[11];En(u)&&u.destroyNode&&Gp(s,o,u,3,null,null),function Ql(s){let o=s[13];if(!o)return A_(s[1],s);for(;o;){let u=null;if(Jr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Jr(o)&&A_(o[1],o),o=o[3];null===o&&(o=s),Jr(o)&&A_(o[1],o),u=o&&o[4]}o=u}}(o)}}function A_(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Mw(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof ju)){const f=u[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],b=f[y+1];try{b.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function Rw(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],E="function"==typeof y?y(o):_n(o[y]),b=c[d=u[f+2]],A=u[f+3];"boolean"==typeof A?E.removeEventListener(u[f],b,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),f+=2}else{const y=c[d=u[f+1]];u[f].call(y)}if(null!==c){for(let f=d+1;f<c.length;f++)c[f]();o[7]=null}}(s,o),1===o[1].type&&En(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&rs(o[3])){u!==o[3]&&xw(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function $p(s,o,u){return function VT(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===Bt.None||d===Bt.Emulated)return null}return Ir(c,u)}(s,o.parent,u)}function Ps(s,o,u,c,d){En(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function x_(s,o,u){En(s)?s.appendChild(o,u):o.appendChild(u)}function Nw(s,o,u,c,d){null!==c?Ps(s,o,u,c,d):x_(s,o,u)}function Nh(s,o){return En(s)?s.parentNode(o):o.parentNode}let R_=function kw(s,o,u){return 40&s.type?Ir(s,u):null};function Hp(s,o,u,c){const d=$p(s,c,o),f=o[11],E=function Pw(s,o,u){return R_(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)Nw(f,d,u[b],E,!1);else Nw(f,d,u,E,!1)}function id(s,o){if(null!==o){const u=o.type;if(3&u)return Ir(o,s);if(4&u)return N_(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return id(s,c);{const d=s[o.index];return rs(d)?N_(-1,d):_n(d)}}if(32&u)return Vp(o,s)()||_n(s[o.index]);{const c=Lw(s,o);return null!==c?Array.isArray(c)?c[0]:id(Rh(s[16]),c):id(s,o.next)}}return null}function Lw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function N_(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return id(c,d)}return o[7]}function k_(s,o,u,c,d,f,y){for(;null!=u;){const E=c[u.index],b=u.type;if(y&&0===o&&(E&&vi(_n(E),c),u.flags|=4),64!=(64&u.flags))if(8&b)k_(s,o,u.child,c,d,f,!1),nd(o,s,d,E,f);else if(32&b){const A=Vp(u,c);let R;for(;R=A();)nd(o,s,d,R,f);nd(o,s,d,E,f)}else 16&b?Wp(s,o,c,u,d,f):nd(o,s,d,E,f);u=y?u.projectionNext:u.next}}function Gp(s,o,u,c,d,f){k_(u,c,s.firstChild,o,d,f,!1)}function Wp(s,o,u,c,d,f){const y=u[16],b=y[6].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)nd(o,s,d,b[A],f);else k_(s,o,b,y[3],d,f,!0)}function L_(s,o,u){En(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function F_(s,o,u){En(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function Uw(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||s.charCodeAt(d+f)<=32)return d}u=d+1}}const Vw="ng-template";function ln(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==Uw(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Cr(s){return 4===s.type&&s.value!==Vw}function RM(s,o,u){return o===(4!==s.type||u?s.value:Vw)}function U_(s,o,u){let c=4;const d=s.attrs||[],f=function $o(s){for(let o=0;o<s.length;o++)if(Ss(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!y)if(4&c){if(c=2|1&c,""!==b&&!RM(s,b,u)||""===b&&1===o.length){if(mr(c))return!1;y=!0}}else{const A=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!ln(s.attrs,A,u)){if(mr(c))return!1;y=!0}continue}const U=ve(8&c?"class":b,d,Cr(s),u);if(-1===U){if(mr(c))return!1;y=!0;continue}if(""!==A){let W;W=U>f?"":d[U+1].toLowerCase();const X=8&c?W:null;if(X&&-1!==Uw(X,A,0)||2&c&&A!==W){if(mr(c))return!1;y=!0}}}}else{if(!y&&!mr(c)&&!mr(b))return!1;if(y&&mr(b))continue;y=!1,c=b|1&c}}return mr(c)||y}function mr(s){return 0==(1&s)}function ve(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function Bw(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function wi(s,o,u=!1){for(let c=0;c<o.length;c++)if(U_(s,o[c],u))return!0;return!1}function qp(s,o){return s?":not("+o.trim()+")":o}function $w(s){let o=s[0],u=1,c=2,d="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!mr(y)&&(o+=qp(f,d),d=""),c=y,f=f||!mr(c);u++}return""!==d&&(o+=qp(f,d)),o}const Ot={};function tl(s){zp(jt(),De(),Vr()+s,_a())}function zp(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&xl(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Bu(o,f,0,u)}Ys(u)}function eg(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const y=s.data[f];Cl(d),y.contentQueries(2,o[f],f)}}}function ud(s,o,u,c,d,f,y,E,b,A){const R=o.blueprint.slice();return R[0]=d,R[2]=140|c,is(R),R[3]=R[15]=s,R[8]=u,R[10]=y||s&&s[10],R[11]=E||s&&s[11],R[12]=b||s&&s[12]||null,R[9]=A||s&&s[9]||null,R[6]=f,R[16]=2==o.type?s[16]:R,R}function ld(s,o,u,c,d){let f=s.data[o];if(null===f)f=function K_(s,o,u,c,d){const f=Uu(),y=El(),b=s.data[o]=function Q_(s,o,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(s,o,u,c,d),function lh(){return yt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const y=function Ks(){const s=yt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Oi(f,!0),f}function cd(s,o,u,c){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function dd(s,o,u){Ja(o);try{const c=s.viewQuery;null!==c&&gu(1,c,u);const d=s.template;null!==d&&Kw(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&eg(s,o),s.staticViewQueries&&gu(2,s.viewQuery,u);const f=s.components;null!==f&&function QT(s,o){for(let u=0;u<o.length;u++)Kn(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Do()}}function tc(s,o,u,c){const d=o[2];if(256==(256&d))return;Ja(o);const f=_a();try{is(o),function va(s){return yt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Kw(s,o,u,2,c);const y=3==(3&d);if(!f)if(y){const A=s.preOrderCheckHooks;null!==A&&xl(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Bu(o,A,0,null),Qn(o,0)}if(function tD(s){for(let o=Mh(s);null!==o;o=jp(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(1024&d[2])&&Ts(f,1),d[2]|=1024}}}(o),function ry(s){for(let o=Mh(s);null!==o;o=jp(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];bo(c)&&tc(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&eg(s,o),!f)if(y){const A=s.contentCheckHooks;null!==A&&xl(o,A)}else{const A=s.contentHooks;null!==A&&Bu(o,A,1),Qn(o,1)}!function z_(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Ys(~d);else{const f=d,y=u[++c],E=u[++c];Fc(y,f),E(2,o[f])}}}finally{Ys(-1)}}(s,o);const E=s.components;null!==E&&function YT(s,o){for(let u=0;u<o.length;u++)$h(s,o[u])}(o,E);const b=s.viewQuery;if(null!==b&&gu(2,b,c),!f)if(y){const A=s.viewCheckHooks;null!==A&&xl(o,A)}else{const A=s.viewHooks;null!==A&&Bu(o,A,2),Qn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ts(o[3],-1))}finally{Do()}}function zw(s,o,u,c){const d=o[10],f=!_a(),y=Cs(o);try{f&&!y&&d.begin&&d.begin(),y&&dd(s,o,c),tc(s,o,u,c)}finally{f&&!y&&d.end&&d.end()}}function Kw(s,o,u,c,d){const f=Vr(),y=2&c;try{Ys(-1),y&&o.length>20&&zp(s,o,20,_a()),u(c,d)}finally{Ys(f)}}function Z_(s,o,u){!ma()||(function iE(s,o,u,c){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||Cn(u,o),vi(c,o);const y=u.initialInputs;for(let E=d;E<f;E++){const b=s.data[E],A=Ni(b);A&&cE(o,u,b);const R=Ta(o,s,E,u);vi(R,o),null!==y&&dn(0,E-d,R,b,0,y),A&&(Ur(u.index,o)[8]=R)}}(s,o,u,Ir(u,o)),128==(128&u.flags)&&function sE(s,o,u){const c=u.directiveStart,d=u.directiveEnd,y=u.index,E=function Qa(){return yt.lFrame.currentDirectiveIndex}();try{Ys(y);for(let b=c;b<d;b++){const A=s.data[b],R=o[b];bl(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&ty(A,R)}}finally{Ys(-1),bl(E)}}(s,o,u))}function Y_(s,o,u=Ir){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function Yw(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Vh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Vh(s,o,u,c,d,f,y,E,b,A){const R=20+c,U=R+d,W=function Qw(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ot);return u}(R,U),X="function"==typeof A?A():A;return W[1]={type:s,blueprint:W,template:u,queries:null,viewQuery:E,declTNode:o,data:W.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:X,incompleteFirstPass:!1}}function nc(s,o,u,c){const d=pE(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&gE(s).push(c,d.length-1))}function eE(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function si(s,o,u,c,d,f,y,E){const b=Ir(o,u);let R,A=o.inputs;!E&&null!=A&&(R=A[c])?(_E(s,u,R,c,d),oa(o)&&function J_(s,o){const u=Ur(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function Bh(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,En(f)?f.setProperty(b,c,d):ti(c)||(b.setProperty?b.setProperty(c,d):b[c]=d))}function X_(s,o,u,c){let d=!1;if(ma()){const f=function oE(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];wi(u,y.selectors,!1)&&(d||(d=[]),Ao(Cn(u,o),s,y.type),Ni(y)?(aE(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==f){d=!0,ny(u,s.data.length,f.length);for(let R=0;R<f.length;R++){const U=f[R];U.providersResolver&&U.providersResolver(U)}let E=!1,b=!1,A=cd(s,o,f.length,null);for(let R=0;R<f.length;R++){const U=f[R];u.mergedAttrs=ur(u.mergedAttrs,U.hostAttrs),jh(s,u,o,A,U),lE(A,U,y),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const W=U.type.prototype;!E&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!b&&(W.ngOnChanges||W.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),A++}!function JT(s,o){const c=o.directiveEnd,d=s.data,f=o.attrs,y=[];let E=null,b=null;for(let A=o.directiveStart;A<c;A++){const R=d[A],U=R.inputs,W=null===f||Cr(o)?null:Kt(U,f);y.push(W),E=eE(U,A,E),b=eE(R.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=b}(s,u)}y&&function uE(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new Fe(-301,!1);c.push(o[d],f)}}}(u,c,y)}return u.mergedAttrs=ur(u.mergedAttrs,u.attrs),d}function ey(s,o,u,c,d,f){const y=f.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function eD(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=b&&E.push(b),E.push(c,d,y)}}function ty(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function aE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function lE(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Ni(o)&&(u[""]=s)}}function ny(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function jh(s,o,u,c,d){s.data[c]=d;const f=d.factory||(d.factory=pi(d.type)),y=new ju(f,Ni(d),null);s.blueprint[c]=y,u[c]=y,ey(s,o,0,c,cd(s,u,d.hostVars,Ot),d)}function cE(s,o,u){const c=Ir(o,s),d=Yw(u),f=s[10],y=Gr(s,ud(s,d,null,u.onPush?64:16,c,o,f,f.createRenderer(c,u),null,null));s[o.index]=y}function Go(s,o,u,c,d,f){const y=Ir(s,o);!function cn(s,o,u,c,d,f,y){if(null==f)En(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==y?me(f):y(f,c||"",d);En(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],y,f,s.value,u,c,d)}function dn(s,o,u,c,d,f){const y=f[o];if(null!==y){const E=c.setInput;for(let b=0;b<y.length;){const A=y[b++],R=y[b++],U=y[b++];null!==E?c.setInput(u,U,A,R):u[R]=U}}}function Kt(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Sn(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function $h(s,o){const u=Ur(o,s);if(bo(u)){const c=u[1];80&u[2]?tc(c,u,c.template,u[8]):u[5]>0&&tg(u)}}function tg(s){for(let c=Mh(s);null!==c;c=jp(c))for(let d=10;d<c.length;d++){const f=c[d];if(1024&f[2]){const y=f[1];tc(y,f,y.template,f[8])}else f[5]>0&&tg(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Ur(u[c],s);bo(d)&&d[5]>0&&tg(d)}}function Kn(s,o){const u=Ur(o,s),c=u[1];(function Zt(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),dd(c,u,u[8])}function Gr(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function iy(s){for(;s;){s[2]|=64;const o=Rh(s);if(_l(s)&&!o)return s;s=o}return null}function oy(s,o,u){const c=o[10];c.begin&&c.begin();try{tc(s,o,s.template,u)}catch(d){throw mE(o,d),d}finally{c.end&&c.end()}}function dE(s){!function cs(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=v_(u),d=c[1];zw(d,c,d.template,u)}}(s[8])}function gu(s,o,u){Cl(0),o(s,u)}const Hh=(()=>Promise.resolve(null))();function pE(s){return s[7]||(s[7]=[])}function gE(s){return s.cleanup||(s.cleanup=[])}function mE(s,o){const u=s[9],c=u?u.get(Up,null):null;c&&c.handleError(o)}function _E(s,o,u,c,d){for(let f=0;f<u.length;){const y=u[f++],E=u[f++],b=o[y],A=s.data[y];null!==A.setInput?A.setInput(b,d,c,E):b[E]=d}}function mu(s,o,u){const c=function zs(s,o){return _n(o[s])}(o,s);!function b_(s,o,u){En(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function Gh(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=ge(d,E):2==f&&(c=ge(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const hd=new Hn("INJECTOR",-1);class ly{get(o,u=ko){if(u===ko){const c=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw c.name="NullInjectorError",c}return u}}const oo=new Hn("Set Injector scope."),rl={},Wo={};let cy;function ji(){return void 0===cy&&(cy=new ly),cy}function yE(s,o=null,u=null,c){const d=ng(s,o,u,c);return d._resolveInjectorDefTypes(),d}function ng(s,o=null,u=null,c){return new dy(s,u,o||ji(),c)}class dy{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&us(u,E=>this.processProvider(E,o,u)),us([o],E=>this.processInjectorType(E,[],f)),this.records.set(hd,qo(void 0,this));const y=this.records.get(oo);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=ko,c=ft.Default){this.assertNotDestroyed();const d=Ne(this),f=rn(void 0);try{if(!(c&ft.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function oD(s){return"function"==typeof s||"object"==typeof s&&s instanceof Hn}(o)&&xn(o);E=b&&this.injectableDefInScope(b)?qo(hy(o),rl):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&ft.Self?ji():this.parent).get(o,u=c&ft.Optional&&u===ko?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[au]=y[au]||[]).unshift(ue(o)),d)throw y;return function uu(s,o,u,c){const d=s[au];throw o[B]&&d.unshift(o[B]),s.message=function ro(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[au]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{rn(f),Ne(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ue(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(o,u,c){if(!(o=ne(o)))return!1;let d=Ji(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,E=-1!==c.indexOf(y);if(void 0!==f&&(d=Ji(f)),null==d)return!1;if(null!=d.imports&&!E){let R;c.push(y);try{us(d.imports,U=>{this.processInjectorType(U,u,c)&&(void 0===R&&(R=[]),R.push(U))})}finally{}if(void 0!==R)for(let U=0;U<R.length;U++){const{ngModule:W,providers:X}=R[U];us(X,we=>this.processProvider(we,W,X||mt))}}this.injectorDefTypes.add(y);const b=pi(y)||(()=>new y);this.records.set(y,qo(b,rl));const A=d.providers;if(null!=A&&!E){const R=o;us(A,U=>this.processProvider(U,R,A))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,c){let d=fd(o=ne(o))?o:ne(o&&o.provide);const f=function wE(s,o,u){return py(s)?qo(void 0,s.useValue):qo(function fy(s,o,u){let c;if(fd(s)){const d=ne(s);return pi(d)||hy(d)}if(py(s))c=()=>ne(s.useValue);else if(function rD(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Dt(s.deps||[]));else if(function EE(s){return!(!s||!s.useExisting)}(s))c=()=>nt(ne(s.useExisting));else{const d=ne(s&&(s.useClass||s.provide));if(!function On(s){return!!s.deps}(s))return pi(d)||hy(d);c=()=>new d(...Dt(s.deps))}return c}(s),rl)}(o);if(fd(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=qo(void 0,rl,!0),y.factory=()=>Dt(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===rl&&(u.value=Wo,u.value=u.factory()),"object"==typeof u.value&&u.value&&function sD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function hy(s){const o=xn(s),u=null!==o?o.factory:pi(s);if(null!==u)return u;if(s instanceof Hn)throw new Fe(204,!1);if(s instanceof Function)return function vE(s){const o=s.length;if(o>0)throw function ri(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Fe(204,!1);const u=function yr(s){const o=s&&(s[fi]||s[wr]);if(o){const u=function vr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Fe(204,!1)}function qo(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function py(s){return null!==s&&"object"==typeof s&&J in s}function fd(s){return"function"==typeof s}let ds=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return yE({name:""},c,u,"");{const f=null!==(d=u.name)&&void 0!==d?d:"";return yE({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=ko,s.NULL=new ly,s.\u0275prov=tn({token:s,providedIn:"any",factory:()=>nt(hd)}),s.__NG_ELEMENT_ID__=-1,s})();function ag(s,o){Xa(v_(s)[1],In())}let cg=null;function _u(){if(!cg){const s=Wt.Symbol;if(s&&s.iterator)cg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(cg=c)}}}return cg}function oc(s){return!!by(s)&&(Array.isArray(s)||!(s instanceof Map)&&_u()in s)}function by(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ii(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Zh(s,o,u,c){const d=De();return Ii(d,wa(),o)&&(jt(),Go($n(),d,s,o,u,c)),Zh}function yu(s,o,u,c){return Ii(s,wa(),u)?o+me(u)+c:Ot}function uo(s,o,u,c,d,f,y,E){const b=De(),A=jt(),R=s+20,U=A.firstCreatePass?function Ln(s,o,u,c,d,f,y,E,b){const A=o.consts,R=ld(o,s,4,y||null,ki(A,E));X_(o,u,R,ki(A,b)),Xa(o,R);const U=R.tViews=Vh(2,R,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),U.queries=o.queries.embeddedTView(R)),R}(R,A,b,o,u,c,d,f,y):A.data[R];Oi(U,!1);const W=b[11].createComment("");Hp(A,b,W,U),vi(W,b),Gr(b,b[R]=Sn(W,b,W,U)),aa(U)&&Z_(A,b,U),null!=y&&Y_(b,U,E)}function hg(s){return function gi(s,o){return s[o]}(function Il(){return yt.lFrame.contextLView}(),20+s)}function lc(s,o=ft.Default){const u=De();return null===u?nt(s,o):xo(In(),u,ne(s),o)}function Ly(){throw new Error("invalid")}function Fy(s,o,u){const c=De();return Ii(c,wa(),o)&&si(jt(),$n(),c,s,o,c[11],u,!1),Fy}function gg(s,o,u,c,d){const y=d?"class":"style";_E(s,u,o.inputs[y],y,c)}function mg(s,o,u,c){const d=De(),f=jt(),y=20+s,E=d[11],b=d[y]=C_(E,o,function Vc(){return yt.lFrame.currentNamespace}()),A=f.firstCreatePass?function Uy(s,o,u,c,d,f,y){const E=o.consts,A=ld(o,s,2,d,ki(E,f));return X_(o,u,A,ki(E,y)),null!==A.attrs&&Gh(A,A.attrs,!1),null!==A.mergedAttrs&&Gh(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,d,0,o,u,c):f.data[y];Oi(A,!0);const R=A.mergedAttrs;null!==R&&gt(E,b,R);const U=A.classes;null!==U&&F_(E,b,U);const W=A.styles;return null!==W&&L_(E,b,W),64!=(64&A.flags)&&Hp(f,d,b,A),0===function Oc(){return yt.lFrame.elementDepthCount}()&&vi(b,d),function ga(){yt.lFrame.elementDepthCount++}(),aa(A)&&(Z_(f,d,A),function Zw(s,o,u){if(Mu(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}(f,A,d)),null!==c&&Y_(d,A),mg}function _g(){let s=In();El()?function Ya(){yt.lFrame.isParent=!1}():(s=s.parent,Oi(s,!1));const o=s;!function Lc(){yt.lFrame.elementDepthCount--}();const u=jt();return u.firstCreatePass&&(Xa(u,s),Mu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ph(s){return 0!=(16&s.flags)}(o)&&gg(u,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function i_(s){return 0!=(32&s.flags)}(o)&&gg(u,o,De(),o.stylesWithoutHost,!1),_g}function Vy(s,o,u,c){return mg(s,o,u,c),_g(),Vy}function jE(){return De()}function yg(s){return!!s&&"function"==typeof s.then}function Hy(s){return!!s&&"function"==typeof s.subscribe}const $E=Hy;function vg(s,o,u,c){const d=De(),f=jt(),y=In();return function GE(s,o,u,c,d,f,y,E){const b=aa(c),R=s.firstCreatePass&&gE(s),U=o[8],W=pE(o);let X=!0;if(3&c.type||E){const We=Ir(c,o),it=E?E(We):We,Se=W.length,_t=E?Qt=>E(_n(Qt[c.index])):c.index;if(En(u)){let Qt=null;if(!E&&b&&(Qt=function HE(s,o,u,c){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===u&&d[f+1]===c){const E=o[7],b=d[f+2];return E.length>b?E[b]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,c.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=f,Qt.__ngLastListenerFn__=f,X=!1;else{f=Gy(c,o,U,f,!1);const wn=u.listen(it,d,f);W.push(f,wn),R&&R.push(d,_t,Se,Se+1)}}else f=Gy(c,o,U,f,!0),it.addEventListener(d,f,y),W.push(f),R&&R.push(d,_t,Se,y)}else f=Gy(c,o,U,f,!1);const we=c.outputs;let Be;if(X&&null!==we&&(Be=we[d])){const We=Be.length;if(We)for(let it=0;it<We;it+=2){const Ls=o[Be[it]][Be[it+1]].subscribe(f),_c=W.length;W.push(f,Ls),R&&R.push(d,c.index,_c,-(_c+1))}}}(f,d,d[11],y,s,o,!!u,c),vg}function WE(s,o,u,c){try{return!1!==u(c)}catch(d){return mE(s,d),!1}}function Gy(s,o,u,c,d){return function f(y){if(y===Function)return c;const E=2&s.flags?Ur(s.index,o):o;0==(32&o[2])&&iy(E);let b=WE(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)b=WE(o,0,A,y)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function wg(s,o,u){return Fa(s,"",o,"",u),wg}function Fa(s,o,u,c,d){const f=De(),y=yu(f,o,u,c);return y!==Ot&&si(jt(),$n(),f,s,y,f[11],d,!1),Fa}function ev(s,o=""){const u=De(),c=jt(),d=s+20,f=c.firstCreatePass?ld(c,d,1,o,null):c.data[d],y=u[d]=function I_(s,o){return En(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Hp(c,u,y,f),Oi(f,!1)}function tv(s){return dc("",s,""),tv}function dc(s,o,u){const c=De(),d=yu(c,s,o,u);return d!==Ot&&mu(c,Vr(),d),dc}const Eu=void 0;var FD=["en",[["a","p"],["AM","PM"],Eu],[["AM","PM"],Eu,Eu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Eu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Eu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Eu,"{1} 'at' {0}",Eu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function LD(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Sd={};function uv(s){const o=function Ad(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Pg(o);if(u)return u;const c=o.split("-")[0];if(u=Pg(c),u)return u;if("en"===c)return FD;throw new Error(`Missing locale data for the locale "${s}".`)}function pI(s){return uv(s)[Ct.PluralCase]}function Pg(s){return s in Sd||(Sd[s]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[s]),Sd[s]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const xd="en-US";let lv=xd;class Cu{}class ES{resolveComponentFactory(o){throw function oi(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Hg=(()=>{class s{}return s.NULL=new ES,s})();function IS(){return Od(In(),De())}function Od(s,o){return new ll(Ir(s,o))}let ll=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=IS,s})();function bS(s){return s instanceof ll?s.nativeElement:s}class mv{}let GI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function WI(){const s=De(),u=Ur(In().index,s);return function _v(s){return s[11]}(Jr(u)?u:s)}(),s})(),Gg=(()=>{class s{}return s.\u0275prov=tn({token:s,providedIn:"root",factory:()=>null}),s})();class qI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const CS=new qI("13.3.0"),yv={};function Ld(s,o,u,c,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(_n(f)),rs(f))for(let E=10;E<f.length;E++){const b=f[E],A=b[1].firstChild;null!==A&&Ld(b[1],b,A,c)}const y=u.type;if(8&y)Ld(s,o,u.child,c);else if(32&y){const E=Vp(u,o);let b;for(;b=E();)c.push(b)}else if(16&y){const E=Lw(o,u);if(Array.isArray(E))c.push(...E);else{const b=Rh(o[16]);Ld(b[1],b,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class Wg{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Ld(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(rs(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(D_(o,c),No(u,c))}this._attachedToViewContainer=!1}S_(this._lView[1],this._lView)}onDestroy(o){nc(this._lView[1],this._lView,null,o)}markForCheck(){iy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){oy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function nD(s,o,u){ya(!0);try{oy(s,o,u)}finally{ya(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Aw(s,o){Gp(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=o}}class eN extends Wg{constructor(o){super(o),this._view=o}detectChanges(){dE(this._view)}checkNoChanges(){!function hE(s){ya(!0);try{dE(s)}finally{ya(!1)}}(this._view)}get context(){return null}}class zI extends Hg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=qe(o);return new ZI(u,this.ngModule)}}function KI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class ZI extends Cu{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function HT(s){return s.map($w).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return KI(this.componentDef.inputs)}get outputs(){return KI(this.componentDef.outputs)}create(o,u,c,d){const f=(d=d||this.ngModule)?function nN(s,o){return{get:(u,c,d)=>{const f=s.get(u,yv,d);return f!==yv||c===yv?f:o.get(u,c,d)}}}(o,d.injector):o,y=f.get(mv,Eo),E=f.get(Gg,null),b=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=c?function Xw(s,o,u){if(En(s))return s.selectRootElement(o,u===Bt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(b,c,this.componentDef.encapsulation):C_(y.createRenderer(null,this.componentDef),A,function tN(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),U=this.componentDef.onPush?576:528,W=function bE(s,o){return{components:[],scheduler:s||NT,clean:Hh,playerHandler:o||null,flags:0}}(),X=Vh(0,null,null,1,0,null,null,null,null,null),we=ud(null,X,W,U,null,null,y,b,E,f);let Be,We;Ja(we);try{const it=function og(s,o,u,c,d,f){const y=u[1];u[20]=s;const b=ld(y,20,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(Gh(b,A,!0),null!==s&&(gt(d,s,A),null!==b.classes&&F_(d,s,b.classes),null!==b.styles&&L_(d,s,b.styles)));const R=c.createRenderer(s,o),U=ud(u,Yw(o),null,o.onPush?64:16,u[20],b,c,R,f||null,null);return y.firstCreatePass&&(Ao(Cn(b,u),y,o.type),aE(y,b),ny(b,u.length,1)),Gr(u,U),u[20]=U}(R,this.componentDef,we,y,b);if(R)if(c)gt(b,R,["ng-version",CS.full]);else{const{attrs:Se,classes:_t}=function GT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++c]):8===d&&u.push(f);else{if(!mr(d))break;d=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Se&&gt(b,R,Se),_t&&_t.length>0&&F_(b,R,_t.join(" "))}if(We=Fu(X,20),void 0!==u){const Se=We.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const Qt=u[_t];Se.push(null!=Qt?Array.from(Qt):null)}}Be=function md(s,o,u,c,d){const f=u[1],y=function rE(s,o,u){const c=In();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),jh(s,c,o,cd(s,o,1,null),u));const d=Ta(o,s,c.directiveStart,c);vi(d,o);const f=Ir(c,o);return f&&vi(f,o),d}(f,u,o);if(c.components.push(y),s[8]=y,d&&d.forEach(b=>b(y,o)),o.contentQueries){const b=In();o.contentQueries(1,y,b.directiveStart)}const E=In();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ys(E.index),ey(u[1],E,0,E.directiveStart,E.directiveEnd,o),ty(o,y)),y}(it,this.componentDef,we,W,[ag]),dd(X,we,null)}finally{Do()}return new iN(this.componentType,Be,Od(We,we),we,We)}}class iN extends class wS{}{constructor(o,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new eN(d),this.componentType=o}get injector(){return new xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ef{}class vv{}const Fd=new Map;class YI extends Ef{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new zI(this);const c=Tt(o);this._bootstrapComponents=jo(c.bootstrap),this._r3Injector=ng(o,u,[{provide:Ef,useValue:this},{provide:Hg,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=ds.THROW_IF_NOT_FOUND,c=ft.Default){return o===ds||o===Ef||o===hd?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ev extends vv{constructor(o){super(),this.moduleType=o,null!==Tt(o)&&function Jo(s){const o=new Set;!function u(c){const d=Tt(c,!0),f=d.id;null!==f&&(function Or(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ue(o)} vs ${ue(o.name)}`)}(f,Fd.get(f),c),Fd.set(f,c));const y=jo(d.imports);for(const E of y)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new YI(this.moduleType,o)}}function bv(s){return o=>{setTimeout(s,void 0,o)}}const Xo=class PS extends _.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,f,y;let E=o,b=u||(()=>null),A=c;if(o&&"object"==typeof o){const U=o;E=null===(d=U.next)||void 0===d?void 0:d.bind(U),b=null===(f=U.error)||void 0===f?void 0:f.bind(U),A=null===(y=U.complete)||void 0===y?void 0:y.bind(U)}this.__isAsync&&(b=bv(b),E&&(E=bv(E)),A&&(A=bv(A)));const R=super.subscribe({next:E,error:b,complete:A});return o instanceof G.w0&&o.add(R),R}};function Cv(){return this._results[_u()]()}class Qg{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=_u(),c=Qg.prototype;c[u]||(c[u]=Cv)}get changes(){return this._changes||(this._changes=new Xo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Pr(o);(this._changesDetected=!function Wu(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],f=o[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let gc=(()=>{class s{}return s.__NG_ELEMENT_ID__=kS,s})();const ib=gc,Cf=class extends ib{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=ud(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(u)),dd(u,c,o),new Wg(c)}};function kS(){return Ud(In(),De())}function Ud(s,o){return 4&s.type?new Cf(o,s,Od(s,o)):null}let Tf=(()=>{class s{}return s.__NG_ELEMENT_ID__=OS,s})();function OS(){return sb(In(),De())}const Tv=Tf,Dv=class extends Tv{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Od(this._hostTNode,this._hostLView)}get injector(){return new xs(this._hostTNode,this._hostLView)}get parentInjector(){const o=Br(this._hostTNode,this._hostLView);if(Wn(o)){const u=Js(o,this._hostLView),c=Qs(o);return new xs(u[1].data[c+8],u)}return new xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Sv(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,f){const y=o&&!function Gu(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const U=u||{};E=U.index,c=U.injector,d=U.projectableNodes,f=U.ngModuleRef}const b=y?o:new ZI(qe(o)),A=c||this.parentInjector;if(!f&&null==b.ngModule){const W=(y?A:this.parentInjector).get(Ef,null);W&&(f=W)}const R=b.create(A,d,void 0,f);return this.insert(R.hostView,E),R}insert(o,u){const c=o._lView,d=c[1];if(function pa(s){return rs(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const U=c[3],W=new Dv(U,U[6],U[3]);W.detach(W.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function T_(s,o,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=o),c<f-10?(o[4]=u[d],su(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function rd(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,y,f);const E=N_(f,y),b=c[11],A=Nh(b,y[7]);return null!==A&&function UT(s,o,u,c,d,f){c[0]=d,c[6]=o,Gp(s,c,u,1,d,f)}(d,y[6],b,c,A,E),o.attachToViewContainerRef(),su(Df(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Sv(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=D_(this._lContainer,u);c&&(No(Df(this._lContainer),u),S_(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=D_(this._lContainer,u);return c&&null!=No(Df(this._lContainer),u)?new Wg(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function Sv(s){return s[8]}function Df(s){return s[8]||(s[8]=[])}function sb(s,o){let u;const c=o[s.index];if(rs(c))u=c;else{let d;if(8&s.type)d=_n(c);else{const f=o[11];d=f.createComment("");const y=Ir(s,o);Ps(f,Nh(f,y),d,function jT(s,o){return En(s)?s.nextSibling(o):o.nextSibling}(f,y),!1)}o[s.index]=u=Sn(c,o,d,s),Gr(o,u)}return new Dv(u,s,o)}class Sf{constructor(o){this.queryList=o,this.matches=null}clone(){return new Sf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Af{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const y=u.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Af(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Mv(o,u).matches&&this.queries[u].setDirty()}}class Jg{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Xg{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Xg(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class xv{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new xv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,u,ob(u,f)),this.matchTNodeWithReadOption(o,u,to(u,o,f,!1,!1))}else c===gc?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,to(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ll||d===Tf||d===gc&&4&u.type)this.addMatch(u.index,-2);else{const f=to(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function ob(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function US(s,o,u,c){return-1===u?function em(s,o){return 11&s.type?Od(s,o):4&s.type?Ud(s,o):null}(o,s):-2===u?function VS(s,o,u){return u===ll?Od(o,s):u===gc?Ud(o,s):u===Tf?sb(o,s):void 0}(s,o,c):Ta(s,s[1],u,o)}function ab(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const f=s.data,y=u.matches,E=[];for(let b=0;b<y.length;b+=2){const A=y[b];E.push(A<0?null:US(o,f[A],y[b+1],u.metadata.read))}d.matches=E}return d.matches}function Rv(s,o,u,c){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const y=ab(s,o,d,u);for(let E=0;E<f.length;E+=2){const b=f[E];if(b>0)c.push(y[E/2]);else{const A=f[E+1],R=o[-b];for(let U=10;U<R.length;U++){const W=R[U];W[17]===W[3]&&Rv(W[1],W,A,c)}if(null!==R[9]){const U=R[9];for(let W=0;W<U.length;W++){const X=U[W];Rv(X[1],X,A,c)}}}}}return c}function ub(s){const o=De(),u=jt(),c=ch();Cl(c+1);const d=Mv(u,c);if(s.dirty&&Cs(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?Rv(u,o,c,[]):ab(u,o,d,c);s.reset(f,bS),s.notifyOnChanges()}return!0}return!1}function lb(s,o,u,c){const d=jt();if(d.firstCreatePass){const f=In();(function xf(s,o,u){null===s.queries&&(s.queries=new Xg),s.queries.track(new xv(o,u))})(d,new Jg(o,u,c),f.index),function hb(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function db(s,o,u){const c=new Qg(4==(4&u));nc(s,o,c,c.destroy),null===o[19]&&(o[19]=new Af),o[19].queries.push(new Sf(c))}(d,De(),u)}function cb(){return function jS(s,o){return s[19].queries[o].queryList}(De(),ch())}function Mv(s,o){return s.queries.getByIndex(o)}function Pf(...s){}const Eb=new Hn("Application Initializer");let cm=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Pf,this.reject=Pf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(yg(f))u.push(f);else if($E(f)){const y=new Promise((E,b)=>{f.subscribe({complete:E,error:b})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(nt(Eb,8))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Uv=new Hn("AppId",{providedIn:"root",factory:function Vv(){return`${Bv()}${Bv()}${Bv()}`}});function Bv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ib=new Hn("Platform Initializer"),jv=new Hn("Platform ID"),bb=new Hn("appBootstrapListener");let $v=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();const Hv=new Hn("LocaleId",{providedIn:"root",factory:()=>Gt(Hv,ft.Optional|ft.SkipSelf)||function nA(){return"undefined"!=typeof $localize&&$localize.locale||xd}()}),rA=new Hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Cb{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Tb=(()=>{class s{compileModuleSync(u){return new Ev(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=jo(Tt(u).declarations).reduce((y,E)=>{const b=qe(E);return b&&y.push(new ZI(b)),y},[]);return new Cb(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const cr=(()=>Promise.resolve(0))();function kf(s){"undefined"==typeof Zone?cr.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ea{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xo(!1),this.onMicrotaskEmpty=new Xo(!1),this.onStable=new Xo(!1),this.onError=new Xo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Gv(){let s=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function aA(s){const o=()=>{!function oA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,qv(s),s.isCheckStableRunning=!0,Wv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),qv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,y,E)=>{try{return zv(s),u.invokeTask(d,f,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),Db(s)}},onInvoke:(u,c,d,f,y,E,b)=>{try{return zv(s),u.invoke(d,f,y,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),Db(s)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,qv(s),Wv(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ea.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ea.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,sA,Pf,Pf);try{return f.runTask(y,u,c)}finally{f.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const sA={};function Wv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function qv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function zv(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Db(s){s._nesting--,Wv(s)}class uA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xo,this.onMicrotaskEmpty=new Xo,this.onStable=new Xo,this.onError=new Xo}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let Sb=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ea.assertNotInAngularZone(),kf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kf(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(nt(ea))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})(),Kv=(()=>{class s{constructor(){this._applications=new Map,dl.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return dl.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();class lA{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function cA(s){dl=s}let po,dl=new lA;const ai=new Hn("AllowMultipleToken");class dA{constructor(o,u){this.name=o,this.token=u}}function xb(s,o,u=[]){const c=`Platform: ${o}`,d=new Hn(c);return(f=[])=>{let y=Rb();if(!y||y.injector.get(ai,!1))if(s)s(u.concat(f).concat({provide:d,useValue:!0}));else{const E=u.concat(f).concat({provide:d,useValue:!0},{provide:oo,useValue:"platform"});!function hA(s){if(po&&!po.destroyed&&!po.injector.get(ai,!1))throw new Fe(400,"");po=s.get(Lf);const o=s.get(Ib,null);o&&o.forEach(u=>u())}(ds.create({providers:E,name:c}))}return function fA(s){const o=Rb();if(!o)throw new Fe(401,"");return o}()}}function Rb(){return po&&!po.destroyed?po:null}let Lf=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function Mb(s,o){let u;return u="noop"===s?new uA:("zone.js"===s?void 0:s)||new ea({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:ea,useValue:E}];return E.run(()=>{const A=ds.create({providers:b,parent:this.injector,name:u.moduleType.name}),R=u.create(A),U=R.injector.get(Up,null);if(!U)throw new Fe(402,"");return E.runOutsideAngular(()=>{const W=E.onError.subscribe({next:X=>{U.handleError(X)}});R.onDestroy(()=>{fm(this._modules,R),W.unsubscribe()})}),function Zv(s,o,u){try{const c=u();return yg(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(U,E,()=>{const W=R.injector.get(cm);return W.runInitializers(),W.donePromise.then(()=>(function gI(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(lv=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Hv,xd)||xd),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,c=[]){const d=hm({},c);return function Ab(s,o,u){const c=new Ev(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(ta);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Fe(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(nt(ds))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();function hm(s,o){return Array.isArray(o)?o.reduce(hm,s):Object.assign(Object.assign({},s),o)}let ta=(()=>{class s{constructor(u,c,d,f,y){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new P.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),b=new P.y(A=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{ea.assertNotInAngularZone(),kf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{ea.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{R.unsubscribe(),U.unsubscribe()}});this.isStable=(0,se.T)(E,b.pipe((0,re.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Fe(405,"");let d;d=u instanceof Cu?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function Of(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Ef),E=d.create(ds.NULL,[],c||d.selector,f),b=E.location.nativeElement,A=E.injector.get(Sb,null),R=A&&E.injector.get(Kv);return A&&R&&R.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),fm(this.components,E),R&&R.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;fm(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(bb,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(nt(ea),nt(ds),nt(Up),nt(Hg),nt(cm))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function fm(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Ff=!0,Nb=!1;function gA(){return Nb=!0,Ff}function mA(){if(Nb)throw new Error("Cannot enable prod mode after platform setup.");Ff=!1}let _A=(()=>{class s{}return s.__NG_ELEMENT_ID__=yA,s})();function yA(s){return function vA(s,o,u){if(oa(s)&&!u){const c=Ur(s.index,o);return new Wg(c,c)}return 47&s.type?new Wg(o[16],o):null}(In(),De(),16==(16&s))}class Xv{constructor(){}supports(o){return oc(o)}create(o){return new e0(o)}}const bA=(s,o)=>o;class e0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||bA}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const y=!c||u&&u.currentIndex<$b(c,d,f)?u:c,E=$b(y,d,f),b=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{f||(f=[]);const A=E-d,R=b-d;if(A!=R){for(let W=0;W<A;W++){const X=W<f.length?f[W]:f[W]=0,we=X+W;R<=we&&we<A&&(f[W]=X+1)}f[y.previousIndex]=R-A}}E!==b&&o(y,E,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!oc(o))throw new Fe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,f,y,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,E),c=!0),u=u._next}else d=0,function hD(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[_u()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new Vb(u,c),f,d),o}_verifyReinsertion(o,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new jb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Vb{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class jb{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Bb,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $b(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class na{constructor(){}supports(o){return o instanceof Map||by(o)}create(){return new Ba}}class Ba{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||by(o)))throw new Fe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new mm(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class mm{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hb(){return new t0([new Xv])}let t0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Hb()),deps:[[s,new Oo,new ii]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Fe(901,"")}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:Hb}),s})();function $d(){return new _m([new na])}let _m=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||$d()),deps:[[s,new Oo,new ii]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(c)return c;throw new Fe(901,"")}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:$d}),s})();const TA=xb(null,"core",[{provide:jv,useValue:"unknown"},{provide:Lf,deps:[ds]},{provide:Kv,deps:[]},{provide:$v,deps:[]}]);let Wb=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(nt(ta))},s.\u0275mod=O({type:s}),s.\u0275inj=nn({}),s})()},3942:(dt,Te,L)=>{L.d(Te,{Z:()=>Fe});var _=L(2090),G=L(4859),P=L(9681),se=L(1877);class re{constructor(me,be){this._delegate=me,this.firebase=be,(0,P._addComponent)(me,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(me,be=P._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(me);return!$e.isInitialized()&&"EXPLICIT"===(null===(Je=$e.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:be})}_removeServiceInstance(me,be=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(be)}_addComponent(me){(0,P._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,P._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ge(){const Ue=function ue(Ue){const me={},be={__esModule:!0,initializeApp:function Re(te,Ye={}){const Q=P.initializeApp(te,Ye);if((0,_.r3)(me,Q.name))return me[Q.name];const de=new Ue(Q,be);return me[Q.name]=de,de},app:$e,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie(te){const Ye=te.name,Q=Ye.replace("-compat","");if(P._registerComponent(te)&&"PUBLIC"===te.type){const de=(le=$e())=>{if("function"!=typeof le[Q])throw ce.create("invalid-app-argument",{appName:Ye});return le[Q]()};void 0!==te.serviceProps&&(0,_.ZB)(de,te.serviceProps),be[Q]=de,Ue.prototype[Q]=function(...le){return this._getService.bind(this,Ye).apply(this,te.multipleInstances?le:[])}}return"PUBLIC"===te.type?be[Q]:null},removeApp:function Je(te){delete me[te]},useAsService:function Ke(te,Ye){return"serverAuth"===Ye?null:Ye},modularAPIs:P}};function $e(te){if(!(0,_.r3)(me,te=te||P._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:te});return me[te]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ae(){return Object.keys(me).map(te=>me[te])}}),$e.App=Ue,be}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function me(be){(0,_.ZB)(Ue,be)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Ue}(),q=new se.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=z;!function Me(Ue){(0,P.registerVersion)("@firebase/app-compat","0.1.21",Ue)}()},9681:(dt,Te,L)=>{L.r(Te),L.d(Te,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Ji,_DEFAULT_ENTRY_NAME:()=>Fn,_addComponent:()=>an,_addOrOverwriteComponent:()=>hi,_apps:()=>ht,_clearComponents:()=>xn,_components:()=>pn,_getProvider:()=>Jt,_registerComponent:()=>tn,_removeServiceInstance:()=>nn,deleteApp:()=>Xi,getApp:()=>pr,getApps:()=>wr,initializeApp:()=>fi,onLog:()=>Un,registerVersion:()=>Sr,setLogLevel:()=>rn});var _=L(5861),G=L(4859),P=L(1877),se=L(2090);class re{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function _e(He){const Ce=He.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(Xe)){const pt=Xe.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Xe=>Xe).join(" ")}}const ce="@firebase/app",ge=new P.Yd("@firebase/app"),Fn="[DEFAULT]",ut={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,pn=new Map;function an(He,Ce){try{He.container.addComponent(Ce)}catch(Xe){ge.debug(`Component ${Ce.name} failed to register with FirebaseApp ${He.name}`,Xe)}}function hi(He,Ce){He.container.addOrOverwriteComponent(Ce)}function tn(He){const Ce=He.name;if(pn.has(Ce))return ge.debug(`There were multiple attempts to register component ${Ce}.`),!1;pn.set(Ce,He);for(const Xe of ht.values())an(Xe,He);return!0}function Jt(He,Ce){const Xe=He.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),He.container.getProvider(Ce)}function nn(He,Ce,Xe=Fn){Jt(He,Ce).clearInstance(Xe)}function xn(){pn.clear()}const yr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class vr{constructor(Ce,Xe,pt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const Ji="9.6.10";function fi(He,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const Xe=Object.assign({name:Fn,automaticDataCollectionEnabled:!1},Ce),pt=Xe.name;if("string"!=typeof pt||!pt)throw yr.create("bad-app-name",{appName:String(pt)});const Mt=ht.get(pt);if(Mt){if((0,se.vZ)(He,Mt.options)&&(0,se.vZ)(Xe,Mt.config))return Mt;throw yr.create("duplicate-app",{appName:pt})}const Nt=new G.H0(pt);for(const $ of pn.values())Nt.addComponent($);const K=new vr(He,Xe,Nt);return ht.set(pt,K),K}function pr(He=Fn){const Ce=ht.get(He);if(!Ce)throw yr.create("no-app",{appName:He});return Ce}function wr(){return Array.from(ht.values())}function Xi(He){return ft.apply(this,arguments)}function ft(){return(ft=(0,_.Z)(function*(He){const Ce=He.name;ht.has(Ce)&&(ht.delete(Ce),yield Promise.all(He.container.getProviders().map(Xe=>Xe.delete())),He.isDeleted=!0)})).apply(this,arguments)}function Sr(He,Ce,Xe){var pt;let Mt=null!==(pt=ut[He])&&void 0!==pt?pt:He;Xe&&(Mt+=`-${Xe}`);const Nt=Mt.match(/\s|\//),K=Ce.match(/\s|\//);if(Nt||K){const $=[`Unable to register library "${Mt}" with version "${Ce}":`];return Nt&&$.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),Nt&&K&&$.push("and"),K&&$.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void ge.warn($.join(" "))}tn(new G.wA(`${Mt}-version`,()=>({library:Mt,version:Ce}),"VERSION"))}function Un(He,Ce){if(null!==He&&"function"!=typeof He)throw yr.create("invalid-log-argument");(0,P.Am)(He,Ce)}function rn(He){(0,P.Ub)(He)}const Nn="firebase-heartbeat-store";let Pn=null;function Ar(){return Pn||(Pn=(0,se.X3)("firebase-heartbeat-database",1,(He,Ce)=>{0===Ce&&He.createObjectStore(Nn)}).catch(He=>{throw yr.create("storage-open",{originalErrorMessage:He.message})})),Pn}function Bt(){return(Bt=(0,_.Z)(function*(He){try{return(yield Ar()).transaction(Nn).objectStore(Nn).get(Qr(He))}catch(Ce){throw yr.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function lt(He,Ce){return rt.apply(this,arguments)}function rt(){return(rt=(0,_.Z)(function*(He,Ce){try{const pt=(yield Ar()).transaction(Nn,"readwrite");return yield pt.objectStore(Nn).put(Ce,Qr(He)),pt.complete}catch(Xe){throw yr.create("storage-set",{originalErrorMessage:Xe.message})}})).apply(this,arguments)}function Qr(He){return`${He.name}!${He.options.appId}`}class ts{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new mt(Xe),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var Ce=this;return(0,_.Z)(function*(){const pt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=Vn();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!Ce._heartbeatsCache.heartbeats.some(Nt=>Nt.date===Mt))return Ce._heartbeatsCache.heartbeats.push({date:Mt,agent:pt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Nt=>{const K=new Date(Nt.date).valueOf();return Date.now()-K<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,_.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Xe=Vn(),{heartbeatsToSend:pt,unsentEntries:Mt}=function sn(He,Ce=1024){const Xe=[];let pt=He.slice();for(const Mt of He){const Nt=Xe.find(K=>K.agent===Mt.agent);if(Nt){if(Nt.dates.push(Mt.date),Bn(Xe)>Ce){Nt.dates.pop();break}}else if(Xe.push({agent:Mt.agent,dates:[Mt.date]}),Bn(Xe)>Ce){Xe.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:pt}}(Ce._heartbeatsCache.heartbeats),Nt=(0,se.L)(JSON.stringify({version:2,heartbeats:pt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Xe,Mt.length>0?(Ce._heartbeatsCache.heartbeats=Mt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Nt})()}}function Vn(){return(new Date).toISOString().substring(0,10)}class mt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,_.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function $s(He){return Bt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Xe=this;return(0,_.Z)(function*(){var pt;if(yield Xe._canUseIndexedDBPromise){const Nt=yield Xe.read();return lt(Xe.app,{lastSentHeartbeatDate:null!==(pt=Ce.lastSentHeartbeatDate)&&void 0!==pt?pt:Nt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Xe=this;return(0,_.Z)(function*(){var pt;if(yield Xe._canUseIndexedDBPromise){const Nt=yield Xe.read();return lt(Xe.app,{lastSentHeartbeatDate:null!==(pt=Ce.lastSentHeartbeatDate)&&void 0!==pt?pt:Nt.lastSentHeartbeatDate,heartbeats:[...Nt.heartbeats,...Ce.heartbeats]})}})()}}function Bn(He){return(0,se.L)(JSON.stringify({version:2,heartbeats:He})).length}!function qt(He){tn(new G.wA("platform-logger",Ce=>new re(Ce),"PRIVATE")),tn(new G.wA("heartbeat",Ce=>new ts(Ce),"PRIVATE")),Sr(ce,"0.7.20",He),Sr(ce,"0.7.20","esm2017"),Sr("fire-js","")}("")},4859:(dt,Te,L)=>{L.d(Te,{H0:()=>ue,wA:()=>P,zt:()=>re});var _=L(5861),G=L(2090);class P{constructor(z,q,ne){this.name=z,this.instanceFactory=q,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const se="[DEFAULT]";class re{constructor(z,q){this.name=z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const q=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(q)){const ne=new G.BH;if(this.instancesDeferred.set(q,ne),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:q});Ge&&ne.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(q).promise}getImmediate(z){var q;const ne=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),Ge=null!==(q=null==z?void 0:z.optional)&&void 0!==q&&q;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Me){if(Ge)return null;throw Me}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ce(ge){return"EAGER"===ge.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:se})}catch(q){}for(const[q,ne]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(q);try{const Me=this.getOrInitializeService({instanceIdentifier:Ge});ne.resolve(Me)}catch(Me){}}}}clearInstance(z=se){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,_.Z)(function*(){const q=Array.from(z.instances.values());yield Promise.all([...q.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...q.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=se){return this.instances.has(z)}getOptions(z=se){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:q={}}=z,ne=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ne,options:q});for(const[Me,Fe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Me)&&Fe.resolve(Ge);return Ge}onInit(z,q){var ne;const Ge=this.normalizeInstanceIdentifier(q),Me=null!==(ne=this.onInitCallbacks.get(Ge))&&void 0!==ne?ne:new Set;Me.add(z),this.onInitCallbacks.set(Ge,Me);const Fe=this.instances.get(Ge);return Fe&&z(Fe,Ge),()=>{Me.delete(z)}}invokeOnInitCallbacks(z,q){const ne=this.onInitCallbacks.get(q);if(ne)for(const Ge of ne)try{Ge(z,q)}catch(Me){}}getOrInitializeService({instanceIdentifier:z,options:q={}}){let ne=this.instances.get(z);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=z,ge===se?void 0:ge),options:q}),this.instances.set(z,ne),this.instancesOptions.set(z,q),this.invokeOnInitCallbacks(ne,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ne)}catch(Ge){}var ge;return ne||null}normalizeInstanceIdentifier(z=se){return this.component?this.component.multipleInstances?z:se:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const q=this.getProvider(z.name);if(q.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);q.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const q=new re(z,this);return this.providers.set(z,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(dt,Te,L)=>{L.d(Te,{Am:()=>ge,Ub:()=>ue,Yd:()=>ce,in:()=>G});const _=[];var G=(()=>{return(z=G||(G={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",G;var z})();const P={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},se=G.INFO,re={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},_e=(z,q,...ne)=>{if(q<z.logLevel)return;const Ge=(new Date).toISOString(),Me=re[q];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Me](`[${Ge}]  ${z.name}:`,...ne)};class ce{constructor(q){this.name=q,this._logLevel=se,this._logHandler=_e,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in G))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?P[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...q),this._logHandler(this,G.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...q),this._logHandler(this,G.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,G.INFO,...q),this._logHandler(this,G.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,G.WARN,...q),this._logHandler(this,G.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...q),this._logHandler(this,G.ERROR,...q)}}function ue(z){_.forEach(q=>{q.setLogLevel(z)})}function ge(z,q){for(const ne of _){let Ge=null;q&&q.level&&(Ge=P[q.level]),ne.userLogHandler=null===z?null:(Me,Fe,...Ue)=>{const me=Ue.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(Je){return null}}).filter(be=>be).join(" ");Fe>=(null!=Ge?Ge:Me.logLevel)&&z({level:G[Fe].toLowerCase(),message:me,args:Ue,type:Me.name})}}}},5861:(dt,Te,L)=>{function _(P,se,re,_e,ce,ue,ge){try{var z=P[ue](ge),q=z.value}catch(ne){return void re(ne)}z.done?se(q):Promise.resolve(q).then(_e,ce)}function G(P){return function(){var se=this,re=arguments;return new Promise(function(_e,ce){var ue=P.apply(se,re);function ge(q){_(ue,_e,ce,ge,z,"next",q)}function z(q){_(ue,_e,ce,ge,z,"throw",q)}ge(void 0)})}}L.d(Te,{Z:()=>G})}},dt=>{dt(dt.s=4083)}]);